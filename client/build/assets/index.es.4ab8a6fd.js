import{b4 as pb,b1 as gb,b7 as Cn,b8 as yb,b9 as Ml,d as _b}from"./index.7b9ea63a.js";import{e as cr}from"./events.15ab3da8.js";var Go={},du={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var t,r,s,a,f,m,v,w,x,R,j,z,$,V,Z,ee,ue,M,B,N,U,O,u;(function(_){var Q=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:{};_(c(Q,c(n.exports)));function c(d,p){return d!==Q&&(typeof Object.create=="function"?Object.defineProperty(d,"__esModule",{value:!0}):d.__esModule=!0),function(E,y){return d[E]=p?p(E,y):y}}})(function(_){var Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var p in d)d.hasOwnProperty(p)&&(c[p]=d[p])};t=function(c,d){Q(c,d);function p(){this.constructor=c}c.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)},r=Object.assign||function(c){for(var d,p=1,E=arguments.length;p<E;p++){d=arguments[p];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(c[y]=d[y])}return c},s=function(c,d){var p={};for(var E in c)Object.prototype.hasOwnProperty.call(c,E)&&d.indexOf(E)<0&&(p[E]=c[E]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,E=Object.getOwnPropertySymbols(c);y<E.length;y++)d.indexOf(E[y])<0&&Object.prototype.propertyIsEnumerable.call(c,E[y])&&(p[E[y]]=c[E[y]]);return p},a=function(c,d,p,E){var y=arguments.length,g=y<3?d:E===null?E=Object.getOwnPropertyDescriptor(d,p):E,A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(c,d,p,E);else for(var F=c.length-1;F>=0;F--)(A=c[F])&&(g=(y<3?A(g):y>3?A(d,p,g):A(d,p))||g);return y>3&&g&&Object.defineProperty(d,p,g),g},f=function(c,d){return function(p,E){d(p,E,c)}},m=function(c,d){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,d)},v=function(c,d,p,E){function y(g){return g instanceof p?g:new p(function(A){A(g)})}return new(p||(p=Promise))(function(g,A){function F(q){try{P(E.next(q))}catch(te){A(te)}}function W(q){try{P(E.throw(q))}catch(te){A(te)}}function P(q){q.done?g(q.value):y(q.value).then(F,W)}P((E=E.apply(c,d||[])).next())})},w=function(c,d){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,y,g,A;return A={next:F(0),throw:F(1),return:F(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function F(P){return function(q){return W([P,q])}}function W(P){if(E)throw new TypeError("Generator is already executing.");for(;p;)try{if(E=1,y&&(g=P[0]&2?y.return:P[0]?y.throw||((g=y.return)&&g.call(y),0):y.next)&&!(g=g.call(y,P[1])).done)return g;switch(y=0,g&&(P=[P[0]&2,g.value]),P[0]){case 0:case 1:g=P;break;case 4:return p.label++,{value:P[1],done:!1};case 5:p.label++,y=P[1],P=[0];continue;case 7:P=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(P[0]===6||P[0]===2)){p=0;continue}if(P[0]===3&&(!g||P[1]>g[0]&&P[1]<g[3])){p.label=P[1];break}if(P[0]===6&&p.label<g[1]){p.label=g[1],g=P;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(P);break}g[2]&&p.ops.pop(),p.trys.pop();continue}P=d.call(c,p)}catch(q){P=[6,q],y=0}finally{E=g=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},u=function(c,d,p,E){E===void 0&&(E=p),c[E]=d[p]},x=function(c,d){for(var p in c)p!=="default"&&!d.hasOwnProperty(p)&&(d[p]=c[p])},R=function(c){var d=typeof Symbol=="function"&&Symbol.iterator,p=d&&c[d],E=0;if(p)return p.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&E>=c.length&&(c=void 0),{value:c&&c[E++],done:!c}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},j=function(c,d){var p=typeof Symbol=="function"&&c[Symbol.iterator];if(!p)return c;var E=p.call(c),y,g=[],A;try{for(;(d===void 0||d-- >0)&&!(y=E.next()).done;)g.push(y.value)}catch(F){A={error:F}}finally{try{y&&!y.done&&(p=E.return)&&p.call(E)}finally{if(A)throw A.error}}return g},z=function(){for(var c=[],d=0;d<arguments.length;d++)c=c.concat(j(arguments[d]));return c},$=function(){for(var c=0,d=0,p=arguments.length;d<p;d++)c+=arguments[d].length;for(var E=Array(c),y=0,d=0;d<p;d++)for(var g=arguments[d],A=0,F=g.length;A<F;A++,y++)E[y]=g[A];return E},V=function(c){return this instanceof V?(this.v=c,this):new V(c)},Z=function(c,d,p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=p.apply(c,d||[]),y,g=[];return y={},A("next"),A("throw"),A("return"),y[Symbol.asyncIterator]=function(){return this},y;function A(re){E[re]&&(y[re]=function(ie){return new Promise(function(ge,le){g.push([re,ie,ge,le])>1||F(re,ie)})})}function F(re,ie){try{W(E[re](ie))}catch(ge){te(g[0][3],ge)}}function W(re){re.value instanceof V?Promise.resolve(re.value.v).then(P,q):te(g[0][2],re)}function P(re){F("next",re)}function q(re){F("throw",re)}function te(re,ie){re(ie),g.shift(),g.length&&F(g[0][0],g[0][1])}},ee=function(c){var d,p;return d={},E("next"),E("throw",function(y){throw y}),E("return"),d[Symbol.iterator]=function(){return this},d;function E(y,g){d[y]=c[y]?function(A){return(p=!p)?{value:V(c[y](A)),done:y==="return"}:g?g(A):A}:g}},ue=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=c[Symbol.asyncIterator],p;return d?d.call(c):(c=typeof R=="function"?R(c):c[Symbol.iterator](),p={},E("next"),E("throw"),E("return"),p[Symbol.asyncIterator]=function(){return this},p);function E(g){p[g]=c[g]&&function(A){return new Promise(function(F,W){A=c[g](A),y(F,W,A.done,A.value)})}}function y(g,A,F,W){Promise.resolve(W).then(function(P){g({value:P,done:F})},A)}},M=function(c,d){return Object.defineProperty?Object.defineProperty(c,"raw",{value:d}):c.raw=d,c},B=function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var p in c)Object.hasOwnProperty.call(c,p)&&(d[p]=c[p]);return d.default=c,d},N=function(c){return c&&c.__esModule?c:{default:c}},U=function(c,d){if(!d.has(c))throw new TypeError("attempted to get private field on non-instance");return d.get(c)},O=function(c,d,p){if(!d.has(c))throw new TypeError("attempted to set private field on non-instance");return d.set(c,p),p},_("__extends",t),_("__assign",r),_("__rest",s),_("__decorate",a),_("__param",f),_("__metadata",m),_("__awaiter",v),_("__generator",w),_("__exportStar",x),_("__createBinding",u),_("__values",R),_("__read",j),_("__spread",z),_("__spreadArrays",$),_("__await",V),_("__asyncGenerator",Z),_("__asyncDelegator",ee),_("__asyncValues",ue),_("__makeTemplateObject",M),_("__importStar",B),_("__importDefault",N),_("__classPrivateFieldGet",U),_("__classPrivateFieldSet",O)})})(du);var ws={};Object.defineProperty(ws,"__esModule",{value:!0});function vb(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}ws.safeJsonParse=vb;function bb(n){return typeof n=="string"?n:JSON.stringify(n,(t,r)=>typeof r>"u"?null:r)}ws.safeJsonStringify=bb;var rs={exports:{}},ql;function mb(){return ql||(ql=1,function(){let n;function t(){}n=t,n.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},n.prototype.setItem=function(r,s){this[r]=String(s)},n.prototype.removeItem=function(r){delete this[r]},n.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},n.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof globalThis<"u"&&globalThis.localStorage?rs.exports=globalThis.localStorage:typeof window<"u"&&window.localStorage?rs.exports=window.localStorage:rs.exports=new t}()),rs.exports}var Tc={},is={},Hl;function wb(){if(Hl)return is;Hl=1,Object.defineProperty(is,"__esModule",{value:!0}),is.IKeyValueStorage=void 0;class n{}return is.IKeyValueStorage=n,is}var ns={},zl;function Eb(){if(zl)return ns;zl=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.parseEntry=void 0;const n=ws;function t(r){var s;return[r[0],n.safeJsonParse((s=r[1])!==null&&s!==void 0?s:"")]}return ns.parseEntry=t,ns}var Bl;function Sb(){return Bl||(Bl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=du.exports;t.__exportStar(wb(),n),t.__exportStar(Eb(),n)}(Tc)),Tc}Object.defineProperty(Go,"__esModule",{value:!0});Go.KeyValueStorage=void 0;const Pn=du.exports,Kl=ws,Ib=Pn.__importDefault(mb()),Ob=Sb();class wd{constructor(){this.localStorage=Ib.default}getKeys(){return Pn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Pn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(Ob.parseEntry)})}getItem(t){return Pn.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(t);if(r!==null)return Kl.safeJsonParse(r)})}setItem(t,r){return Pn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(t,Kl.safeJsonStringify(r))})}removeItem(t){return Pn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(t)})}}Go.KeyValueStorage=wd;var Pb=Go.default=wd,Nn={},Es={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var t,r,s,a,f,m,v,w,x,R,j,z,$,V,Z,ee,ue,M,B,N,U,O,u;(function(_){var Q=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:{};_(c(Q,c(n.exports)));function c(d,p){return d!==Q&&(typeof Object.create=="function"?Object.defineProperty(d,"__esModule",{value:!0}):d.__esModule=!0),function(E,y){return d[E]=p?p(E,y):y}}})(function(_){var Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var p in d)d.hasOwnProperty(p)&&(c[p]=d[p])};t=function(c,d){Q(c,d);function p(){this.constructor=c}c.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)},r=Object.assign||function(c){for(var d,p=1,E=arguments.length;p<E;p++){d=arguments[p];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(c[y]=d[y])}return c},s=function(c,d){var p={};for(var E in c)Object.prototype.hasOwnProperty.call(c,E)&&d.indexOf(E)<0&&(p[E]=c[E]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,E=Object.getOwnPropertySymbols(c);y<E.length;y++)d.indexOf(E[y])<0&&Object.prototype.propertyIsEnumerable.call(c,E[y])&&(p[E[y]]=c[E[y]]);return p},a=function(c,d,p,E){var y=arguments.length,g=y<3?d:E===null?E=Object.getOwnPropertyDescriptor(d,p):E,A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(c,d,p,E);else for(var F=c.length-1;F>=0;F--)(A=c[F])&&(g=(y<3?A(g):y>3?A(d,p,g):A(d,p))||g);return y>3&&g&&Object.defineProperty(d,p,g),g},f=function(c,d){return function(p,E){d(p,E,c)}},m=function(c,d){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,d)},v=function(c,d,p,E){function y(g){return g instanceof p?g:new p(function(A){A(g)})}return new(p||(p=Promise))(function(g,A){function F(q){try{P(E.next(q))}catch(te){A(te)}}function W(q){try{P(E.throw(q))}catch(te){A(te)}}function P(q){q.done?g(q.value):y(q.value).then(F,W)}P((E=E.apply(c,d||[])).next())})},w=function(c,d){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,y,g,A;return A={next:F(0),throw:F(1),return:F(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function F(P){return function(q){return W([P,q])}}function W(P){if(E)throw new TypeError("Generator is already executing.");for(;p;)try{if(E=1,y&&(g=P[0]&2?y.return:P[0]?y.throw||((g=y.return)&&g.call(y),0):y.next)&&!(g=g.call(y,P[1])).done)return g;switch(y=0,g&&(P=[P[0]&2,g.value]),P[0]){case 0:case 1:g=P;break;case 4:return p.label++,{value:P[1],done:!1};case 5:p.label++,y=P[1],P=[0];continue;case 7:P=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(P[0]===6||P[0]===2)){p=0;continue}if(P[0]===3&&(!g||P[1]>g[0]&&P[1]<g[3])){p.label=P[1];break}if(P[0]===6&&p.label<g[1]){p.label=g[1],g=P;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(P);break}g[2]&&p.ops.pop(),p.trys.pop();continue}P=d.call(c,p)}catch(q){P=[6,q],y=0}finally{E=g=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},u=function(c,d,p,E){E===void 0&&(E=p),c[E]=d[p]},x=function(c,d){for(var p in c)p!=="default"&&!d.hasOwnProperty(p)&&(d[p]=c[p])},R=function(c){var d=typeof Symbol=="function"&&Symbol.iterator,p=d&&c[d],E=0;if(p)return p.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&E>=c.length&&(c=void 0),{value:c&&c[E++],done:!c}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},j=function(c,d){var p=typeof Symbol=="function"&&c[Symbol.iterator];if(!p)return c;var E=p.call(c),y,g=[],A;try{for(;(d===void 0||d-- >0)&&!(y=E.next()).done;)g.push(y.value)}catch(F){A={error:F}}finally{try{y&&!y.done&&(p=E.return)&&p.call(E)}finally{if(A)throw A.error}}return g},z=function(){for(var c=[],d=0;d<arguments.length;d++)c=c.concat(j(arguments[d]));return c},$=function(){for(var c=0,d=0,p=arguments.length;d<p;d++)c+=arguments[d].length;for(var E=Array(c),y=0,d=0;d<p;d++)for(var g=arguments[d],A=0,F=g.length;A<F;A++,y++)E[y]=g[A];return E},V=function(c){return this instanceof V?(this.v=c,this):new V(c)},Z=function(c,d,p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=p.apply(c,d||[]),y,g=[];return y={},A("next"),A("throw"),A("return"),y[Symbol.asyncIterator]=function(){return this},y;function A(re){E[re]&&(y[re]=function(ie){return new Promise(function(ge,le){g.push([re,ie,ge,le])>1||F(re,ie)})})}function F(re,ie){try{W(E[re](ie))}catch(ge){te(g[0][3],ge)}}function W(re){re.value instanceof V?Promise.resolve(re.value.v).then(P,q):te(g[0][2],re)}function P(re){F("next",re)}function q(re){F("throw",re)}function te(re,ie){re(ie),g.shift(),g.length&&F(g[0][0],g[0][1])}},ee=function(c){var d,p;return d={},E("next"),E("throw",function(y){throw y}),E("return"),d[Symbol.iterator]=function(){return this},d;function E(y,g){d[y]=c[y]?function(A){return(p=!p)?{value:V(c[y](A)),done:y==="return"}:g?g(A):A}:g}},ue=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=c[Symbol.asyncIterator],p;return d?d.call(c):(c=typeof R=="function"?R(c):c[Symbol.iterator](),p={},E("next"),E("throw"),E("return"),p[Symbol.asyncIterator]=function(){return this},p);function E(g){p[g]=c[g]&&function(A){return new Promise(function(F,W){A=c[g](A),y(F,W,A.done,A.value)})}}function y(g,A,F,W){Promise.resolve(W).then(function(P){g({value:P,done:F})},A)}},M=function(c,d){return Object.defineProperty?Object.defineProperty(c,"raw",{value:d}):c.raw=d,c},B=function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var p in c)Object.hasOwnProperty.call(c,p)&&(d[p]=c[p]);return d.default=c,d},N=function(c){return c&&c.__esModule?c:{default:c}},U=function(c,d){if(!d.has(c))throw new TypeError("attempted to get private field on non-instance");return d.get(c)},O=function(c,d,p){if(!d.has(c))throw new TypeError("attempted to set private field on non-instance");return d.set(c,p),p},_("__extends",t),_("__assign",r),_("__rest",s),_("__decorate",a),_("__param",f),_("__metadata",m),_("__awaiter",v),_("__generator",w),_("__exportStar",x),_("__createBinding",u),_("__values",R),_("__read",j),_("__spread",z),_("__spreadArrays",$),_("__await",V),_("__asyncGenerator",Z),_("__asyncDelegator",ee),_("__asyncValues",ue),_("__makeTemplateObject",M),_("__importStar",B),_("__importDefault",N),_("__classPrivateFieldGet",U),_("__classPrivateFieldSet",O)})})(Es);var ss={},be={},Ss={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var t,r,s,a,f,m,v,w,x,R,j,z,$,V,Z,ee,ue,M,B,N,U,O,u;(function(_){var Q=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:{};_(c(Q,c(n.exports)));function c(d,p){return d!==Q&&(typeof Object.create=="function"?Object.defineProperty(d,"__esModule",{value:!0}):d.__esModule=!0),function(E,y){return d[E]=p?p(E,y):y}}})(function(_){var Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var p in d)d.hasOwnProperty(p)&&(c[p]=d[p])};t=function(c,d){Q(c,d);function p(){this.constructor=c}c.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)},r=Object.assign||function(c){for(var d,p=1,E=arguments.length;p<E;p++){d=arguments[p];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(c[y]=d[y])}return c},s=function(c,d){var p={};for(var E in c)Object.prototype.hasOwnProperty.call(c,E)&&d.indexOf(E)<0&&(p[E]=c[E]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,E=Object.getOwnPropertySymbols(c);y<E.length;y++)d.indexOf(E[y])<0&&Object.prototype.propertyIsEnumerable.call(c,E[y])&&(p[E[y]]=c[E[y]]);return p},a=function(c,d,p,E){var y=arguments.length,g=y<3?d:E===null?E=Object.getOwnPropertyDescriptor(d,p):E,A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(c,d,p,E);else for(var F=c.length-1;F>=0;F--)(A=c[F])&&(g=(y<3?A(g):y>3?A(d,p,g):A(d,p))||g);return y>3&&g&&Object.defineProperty(d,p,g),g},f=function(c,d){return function(p,E){d(p,E,c)}},m=function(c,d){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,d)},v=function(c,d,p,E){function y(g){return g instanceof p?g:new p(function(A){A(g)})}return new(p||(p=Promise))(function(g,A){function F(q){try{P(E.next(q))}catch(te){A(te)}}function W(q){try{P(E.throw(q))}catch(te){A(te)}}function P(q){q.done?g(q.value):y(q.value).then(F,W)}P((E=E.apply(c,d||[])).next())})},w=function(c,d){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,y,g,A;return A={next:F(0),throw:F(1),return:F(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function F(P){return function(q){return W([P,q])}}function W(P){if(E)throw new TypeError("Generator is already executing.");for(;p;)try{if(E=1,y&&(g=P[0]&2?y.return:P[0]?y.throw||((g=y.return)&&g.call(y),0):y.next)&&!(g=g.call(y,P[1])).done)return g;switch(y=0,g&&(P=[P[0]&2,g.value]),P[0]){case 0:case 1:g=P;break;case 4:return p.label++,{value:P[1],done:!1};case 5:p.label++,y=P[1],P=[0];continue;case 7:P=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(P[0]===6||P[0]===2)){p=0;continue}if(P[0]===3&&(!g||P[1]>g[0]&&P[1]<g[3])){p.label=P[1];break}if(P[0]===6&&p.label<g[1]){p.label=g[1],g=P;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(P);break}g[2]&&p.ops.pop(),p.trys.pop();continue}P=d.call(c,p)}catch(q){P=[6,q],y=0}finally{E=g=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},u=function(c,d,p,E){E===void 0&&(E=p),c[E]=d[p]},x=function(c,d){for(var p in c)p!=="default"&&!d.hasOwnProperty(p)&&(d[p]=c[p])},R=function(c){var d=typeof Symbol=="function"&&Symbol.iterator,p=d&&c[d],E=0;if(p)return p.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&E>=c.length&&(c=void 0),{value:c&&c[E++],done:!c}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},j=function(c,d){var p=typeof Symbol=="function"&&c[Symbol.iterator];if(!p)return c;var E=p.call(c),y,g=[],A;try{for(;(d===void 0||d-- >0)&&!(y=E.next()).done;)g.push(y.value)}catch(F){A={error:F}}finally{try{y&&!y.done&&(p=E.return)&&p.call(E)}finally{if(A)throw A.error}}return g},z=function(){for(var c=[],d=0;d<arguments.length;d++)c=c.concat(j(arguments[d]));return c},$=function(){for(var c=0,d=0,p=arguments.length;d<p;d++)c+=arguments[d].length;for(var E=Array(c),y=0,d=0;d<p;d++)for(var g=arguments[d],A=0,F=g.length;A<F;A++,y++)E[y]=g[A];return E},V=function(c){return this instanceof V?(this.v=c,this):new V(c)},Z=function(c,d,p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=p.apply(c,d||[]),y,g=[];return y={},A("next"),A("throw"),A("return"),y[Symbol.asyncIterator]=function(){return this},y;function A(re){E[re]&&(y[re]=function(ie){return new Promise(function(ge,le){g.push([re,ie,ge,le])>1||F(re,ie)})})}function F(re,ie){try{W(E[re](ie))}catch(ge){te(g[0][3],ge)}}function W(re){re.value instanceof V?Promise.resolve(re.value.v).then(P,q):te(g[0][2],re)}function P(re){F("next",re)}function q(re){F("throw",re)}function te(re,ie){re(ie),g.shift(),g.length&&F(g[0][0],g[0][1])}},ee=function(c){var d,p;return d={},E("next"),E("throw",function(y){throw y}),E("return"),d[Symbol.iterator]=function(){return this},d;function E(y,g){d[y]=c[y]?function(A){return(p=!p)?{value:V(c[y](A)),done:y==="return"}:g?g(A):A}:g}},ue=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=c[Symbol.asyncIterator],p;return d?d.call(c):(c=typeof R=="function"?R(c):c[Symbol.iterator](),p={},E("next"),E("throw"),E("return"),p[Symbol.asyncIterator]=function(){return this},p);function E(g){p[g]=c[g]&&function(A){return new Promise(function(F,W){A=c[g](A),y(F,W,A.done,A.value)})}}function y(g,A,F,W){Promise.resolve(W).then(function(P){g({value:P,done:F})},A)}},M=function(c,d){return Object.defineProperty?Object.defineProperty(c,"raw",{value:d}):c.raw=d,c},B=function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var p in c)Object.hasOwnProperty.call(c,p)&&(d[p]=c[p]);return d.default=c,d},N=function(c){return c&&c.__esModule?c:{default:c}},U=function(c,d){if(!d.has(c))throw new TypeError("attempted to get private field on non-instance");return d.get(c)},O=function(c,d,p){if(!d.has(c))throw new TypeError("attempted to set private field on non-instance");return d.set(c,p),p},_("__extends",t),_("__assign",r),_("__rest",s),_("__decorate",a),_("__param",f),_("__metadata",m),_("__awaiter",v),_("__generator",w),_("__exportStar",x),_("__createBinding",u),_("__values",R),_("__read",j),_("__spread",z),_("__spreadArrays",$),_("__await",V),_("__asyncGenerator",Z),_("__asyncDelegator",ee),_("__asyncValues",ue),_("__makeTemplateObject",M),_("__importStar",B),_("__importDefault",N),_("__classPrivateFieldGet",U),_("__classPrivateFieldSet",O)})})(Ss);var Ac={},os={},Vl;function xb(){if(Vl)return os;Vl=1,Object.defineProperty(os,"__esModule",{value:!0}),os.delay=void 0;function n(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return os.delay=n,os}var Wi={},Rc={},Yi={},kl;function Tb(){return kl||(kl=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.ONE_THOUSAND=Yi.ONE_HUNDRED=void 0,Yi.ONE_HUNDRED=100,Yi.ONE_THOUSAND=1e3),Yi}var Cc={},Gl;function Ab(){return Gl||(Gl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(Cc)),Cc}var Wl;function Ed(){return Wl||(Wl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Ss.exports;t.__exportStar(Tb(),n),t.__exportStar(Ab(),n)}(Rc)),Rc}var Yl;function Rb(){if(Yl)return Wi;Yl=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.fromMiliseconds=Wi.toMiliseconds=void 0;const n=Ed();function t(s){return s*n.ONE_THOUSAND}Wi.toMiliseconds=t;function r(s){return Math.floor(s/n.ONE_THOUSAND)}return Wi.fromMiliseconds=r,Wi}var Jl;function Cb(){return Jl||(Jl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Ss.exports;t.__exportStar(xb(),n),t.__exportStar(Rb(),n)}(Ac)),Ac}var On={},Ql;function Nb(){if(Ql)return On;Ql=1,Object.defineProperty(On,"__esModule",{value:!0}),On.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const s=this.get(r);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const a=Date.now()-s.started;this.timestamps.set(r,{started:s.started,elapsed:a})}get(r){const s=this.timestamps.get(r);if(typeof s>"u")throw new Error(`No timestamp found for label: ${r}`);return s}elapsed(r){const s=this.get(r);return s.elapsed||Date.now()-s.started}}return On.Watch=n,On.default=n,On}var Nc={},as={},Xl;function Ub(){if(Xl)return as;Xl=1,Object.defineProperty(as,"__esModule",{value:!0}),as.IWatch=void 0;class n{}return as.IWatch=n,as}var Zl;function Lb(){return Zl||(Zl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Ss.exports.__exportStar(Ub(),n)}(Nc)),Nc}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Ss.exports;t.__exportStar(Cb(),n),t.__exportStar(Nb(),n),t.__exportStar(Lb(),n),t.__exportStar(Ed(),n)})(be);var Uc={},cs={};class Zi{}const Fb=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Zi},Symbol.toStringTag,{value:"Module"})),jb=pb(Fb);var ef;function Db(){if(ef)return cs;ef=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.IHeartBeat=void 0;const n=jb;class t extends n.IEvents{constructor(s){super()}}return cs.IHeartBeat=t,cs}var tf;function Sd(){return tf||(tf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Es.exports.__exportStar(Db(),n)}(Uc)),Uc}var Lc={},Ji={},rf;function $b(){if(rf)return Ji;rf=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.HEARTBEAT_EVENTS=Ji.HEARTBEAT_INTERVAL=void 0;const n=be;return Ji.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,Ji.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Ji}var nf;function Id(){return nf||(nf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Es.exports.__exportStar($b(),n)}(Lc)),Lc}var sf;function Mb(){if(sf)return ss;sf=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.HeartBeat=void 0;const n=Es.exports,t=cr.exports,r=be,s=Sd(),a=Id();class f extends s.IHeartBeat{constructor(v){super(v),this.events=new t.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=(v==null?void 0:v.interval)||a.HEARTBEAT_INTERVAL}static init(v){return n.__awaiter(this,void 0,void 0,function*(){const w=new f(v);return yield w.init(),w})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(v,w){this.events.on(v,w)}once(v,w){this.events.once(v,w)}off(v,w){this.events.off(v,w)}removeListener(v,w){this.events.removeListener(v,w)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}return ss.HeartBeat=f,ss}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Es.exports;t.__exportStar(Mb(),n),t.__exportStar(Sd(),n),t.__exportStar(Id(),n)})(Nn);var Ze={},Od={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var t,r,s,a,f,m,v,w,x,R,j,z,$,V,Z,ee,ue,M,B,N,U,O,u;(function(_){var Q=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:{};_(c(Q,c(n.exports)));function c(d,p){return d!==Q&&(typeof Object.create=="function"?Object.defineProperty(d,"__esModule",{value:!0}):d.__esModule=!0),function(E,y){return d[E]=p?p(E,y):y}}})(function(_){var Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var p in d)d.hasOwnProperty(p)&&(c[p]=d[p])};t=function(c,d){Q(c,d);function p(){this.constructor=c}c.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)},r=Object.assign||function(c){for(var d,p=1,E=arguments.length;p<E;p++){d=arguments[p];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(c[y]=d[y])}return c},s=function(c,d){var p={};for(var E in c)Object.prototype.hasOwnProperty.call(c,E)&&d.indexOf(E)<0&&(p[E]=c[E]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,E=Object.getOwnPropertySymbols(c);y<E.length;y++)d.indexOf(E[y])<0&&Object.prototype.propertyIsEnumerable.call(c,E[y])&&(p[E[y]]=c[E[y]]);return p},a=function(c,d,p,E){var y=arguments.length,g=y<3?d:E===null?E=Object.getOwnPropertyDescriptor(d,p):E,A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(c,d,p,E);else for(var F=c.length-1;F>=0;F--)(A=c[F])&&(g=(y<3?A(g):y>3?A(d,p,g):A(d,p))||g);return y>3&&g&&Object.defineProperty(d,p,g),g},f=function(c,d){return function(p,E){d(p,E,c)}},m=function(c,d){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,d)},v=function(c,d,p,E){function y(g){return g instanceof p?g:new p(function(A){A(g)})}return new(p||(p=Promise))(function(g,A){function F(q){try{P(E.next(q))}catch(te){A(te)}}function W(q){try{P(E.throw(q))}catch(te){A(te)}}function P(q){q.done?g(q.value):y(q.value).then(F,W)}P((E=E.apply(c,d||[])).next())})},w=function(c,d){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,y,g,A;return A={next:F(0),throw:F(1),return:F(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function F(P){return function(q){return W([P,q])}}function W(P){if(E)throw new TypeError("Generator is already executing.");for(;p;)try{if(E=1,y&&(g=P[0]&2?y.return:P[0]?y.throw||((g=y.return)&&g.call(y),0):y.next)&&!(g=g.call(y,P[1])).done)return g;switch(y=0,g&&(P=[P[0]&2,g.value]),P[0]){case 0:case 1:g=P;break;case 4:return p.label++,{value:P[1],done:!1};case 5:p.label++,y=P[1],P=[0];continue;case 7:P=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(P[0]===6||P[0]===2)){p=0;continue}if(P[0]===3&&(!g||P[1]>g[0]&&P[1]<g[3])){p.label=P[1];break}if(P[0]===6&&p.label<g[1]){p.label=g[1],g=P;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(P);break}g[2]&&p.ops.pop(),p.trys.pop();continue}P=d.call(c,p)}catch(q){P=[6,q],y=0}finally{E=g=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},u=function(c,d,p,E){E===void 0&&(E=p),c[E]=d[p]},x=function(c,d){for(var p in c)p!=="default"&&!d.hasOwnProperty(p)&&(d[p]=c[p])},R=function(c){var d=typeof Symbol=="function"&&Symbol.iterator,p=d&&c[d],E=0;if(p)return p.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&E>=c.length&&(c=void 0),{value:c&&c[E++],done:!c}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},j=function(c,d){var p=typeof Symbol=="function"&&c[Symbol.iterator];if(!p)return c;var E=p.call(c),y,g=[],A;try{for(;(d===void 0||d-- >0)&&!(y=E.next()).done;)g.push(y.value)}catch(F){A={error:F}}finally{try{y&&!y.done&&(p=E.return)&&p.call(E)}finally{if(A)throw A.error}}return g},z=function(){for(var c=[],d=0;d<arguments.length;d++)c=c.concat(j(arguments[d]));return c},$=function(){for(var c=0,d=0,p=arguments.length;d<p;d++)c+=arguments[d].length;for(var E=Array(c),y=0,d=0;d<p;d++)for(var g=arguments[d],A=0,F=g.length;A<F;A++,y++)E[y]=g[A];return E},V=function(c){return this instanceof V?(this.v=c,this):new V(c)},Z=function(c,d,p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=p.apply(c,d||[]),y,g=[];return y={},A("next"),A("throw"),A("return"),y[Symbol.asyncIterator]=function(){return this},y;function A(re){E[re]&&(y[re]=function(ie){return new Promise(function(ge,le){g.push([re,ie,ge,le])>1||F(re,ie)})})}function F(re,ie){try{W(E[re](ie))}catch(ge){te(g[0][3],ge)}}function W(re){re.value instanceof V?Promise.resolve(re.value.v).then(P,q):te(g[0][2],re)}function P(re){F("next",re)}function q(re){F("throw",re)}function te(re,ie){re(ie),g.shift(),g.length&&F(g[0][0],g[0][1])}},ee=function(c){var d,p;return d={},E("next"),E("throw",function(y){throw y}),E("return"),d[Symbol.iterator]=function(){return this},d;function E(y,g){d[y]=c[y]?function(A){return(p=!p)?{value:V(c[y](A)),done:y==="return"}:g?g(A):A}:g}},ue=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=c[Symbol.asyncIterator],p;return d?d.call(c):(c=typeof R=="function"?R(c):c[Symbol.iterator](),p={},E("next"),E("throw"),E("return"),p[Symbol.asyncIterator]=function(){return this},p);function E(g){p[g]=c[g]&&function(A){return new Promise(function(F,W){A=c[g](A),y(F,W,A.done,A.value)})}}function y(g,A,F,W){Promise.resolve(W).then(function(P){g({value:P,done:F})},A)}},M=function(c,d){return Object.defineProperty?Object.defineProperty(c,"raw",{value:d}):c.raw=d,c},B=function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var p in c)Object.hasOwnProperty.call(c,p)&&(d[p]=c[p]);return d.default=c,d},N=function(c){return c&&c.__esModule?c:{default:c}},U=function(c,d){if(!d.has(c))throw new TypeError("attempted to get private field on non-instance");return d.get(c)},O=function(c,d,p){if(!d.has(c))throw new TypeError("attempted to set private field on non-instance");return d.set(c,p),p},_("__extends",t),_("__assign",r),_("__rest",s),_("__decorate",a),_("__param",f),_("__metadata",m),_("__awaiter",v),_("__generator",w),_("__exportStar",x),_("__createBinding",u),_("__values",R),_("__read",j),_("__spread",z),_("__spreadArrays",$),_("__await",V),_("__asyncGenerator",Z),_("__asyncDelegator",ee),_("__asyncValues",ue),_("__makeTemplateObject",M),_("__importStar",B),_("__importDefault",N),_("__classPrivateFieldGet",U),_("__classPrivateFieldSet",O)})})(Od);var Fc,of;function qb(){if(of)return Fc;of=1;function n(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Fc=t;function t(r,s,a){var f=a&&a.stringify||n,m=1;if(typeof r=="object"&&r!==null){var v=s.length+m;if(v===1)return r;var w=new Array(v);w[0]=f(r);for(var x=1;x<v;x++)w[x]=f(s[x]);return w.join(" ")}if(typeof r!="string")return r;var R=s.length;if(R===0)return r;for(var j="",z=1-m,$=-1,V=r&&r.length||0,Z=0;Z<V;){if(r.charCodeAt(Z)===37&&Z+1<V){switch($=$>-1?$:0,r.charCodeAt(Z+1)){case 100:case 102:if(z>=R||s[z]==null)break;$<Z&&(j+=r.slice($,Z)),j+=Number(s[z]),$=Z+2,Z++;break;case 105:if(z>=R||s[z]==null)break;$<Z&&(j+=r.slice($,Z)),j+=Math.floor(Number(s[z])),$=Z+2,Z++;break;case 79:case 111:case 106:if(z>=R||s[z]===void 0)break;$<Z&&(j+=r.slice($,Z));var ee=typeof s[z];if(ee==="string"){j+="'"+s[z]+"'",$=Z+2,Z++;break}if(ee==="function"){j+=s[z].name||"<anonymous>",$=Z+2,Z++;break}j+=f(s[z]),$=Z+2,Z++;break;case 115:if(z>=R)break;$<Z&&(j+=r.slice($,Z)),j+=String(s[z]),$=Z+2,Z++;break;case 37:$<Z&&(j+=r.slice($,Z)),j+="%",$=Z+2,Z++,z--;break}++z}++Z}return $===-1?r:($<V&&(j+=r.slice($)),j)}return Fc}var jc,af;function Hb(){if(af)return jc;af=1;const n=qb();jc=a;const t=U().console||{},r={mapHttpRequest:V,mapHttpResponse:V,wrapRequestSerializer:Z,wrapResponseSerializer:Z,wrapErrorSerializer:Z,req:V,res:V,err:z};function s(O,u){return Array.isArray(O)?O.filter(function(Q){return Q!=="!stdSerializers.err"}):O===!0?Object.keys(u):!1}function a(O){O=O||{},O.browser=O.browser||{};const u=O.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const _=O.browser.write||t;O.browser.write&&(O.browser.asObject=!0);const Q=O.serializers||{},c=s(O.browser.serialize,Q);let d=O.browser.serialize;Array.isArray(O.browser.serialize)&&O.browser.serialize.indexOf("!stdSerializers.err")>-1&&(d=!1);const p=["error","fatal","warn","info","debug","trace"];typeof _=="function"&&(_.error=_.fatal=_.warn=_.info=_.debug=_.trace=_),O.enabled===!1&&(O.level="silent");const E=O.level||"info",y=Object.create(_);y.log||(y.log=ee),Object.defineProperty(y,"levelVal",{get:A}),Object.defineProperty(y,"level",{get:F,set:W});const g={transmit:u,serialize:c,asObject:O.browser.asObject,levels:p,timestamp:$(O)};y.levels=a.levels,y.level=E,y.setMaxListeners=y.getMaxListeners=y.emit=y.addListener=y.on=y.prependListener=y.once=y.prependOnceListener=y.removeListener=y.removeAllListeners=y.listeners=y.listenerCount=y.eventNames=y.write=y.flush=ee,y.serializers=Q,y._serialize=c,y._stdErrSerialize=d,y.child=P,u&&(y._logEvent=j());function A(){return this.level==="silent"?1/0:this.levels.values[this.level]}function F(){return this._level}function W(q){if(q!=="silent"&&!this.levels.values[q])throw Error("unknown level "+q);this._level=q,f(g,y,"error","log"),f(g,y,"fatal","error"),f(g,y,"warn","error"),f(g,y,"info","log"),f(g,y,"debug","log"),f(g,y,"trace","log")}function P(q,te){if(!q)throw new Error("missing bindings for child Pino");te=te||{},c&&q.serializers&&(te.serializers=q.serializers);const re=te.serializers;if(c&&re){var ie=Object.assign({},Q,re),ge=O.browser.serialize===!0?Object.keys(ie):c;delete q.serializers,w([q],ge,ie,this._stdErrSerialize)}function le(me){this._childLevel=(me._childLevel|0)+1,this.error=x(me,q,"error"),this.fatal=x(me,q,"fatal"),this.warn=x(me,q,"warn"),this.info=x(me,q,"info"),this.debug=x(me,q,"debug"),this.trace=x(me,q,"trace"),ie&&(this.serializers=ie,this._serialize=ge),u&&(this._logEvent=j([].concat(me._logEvent.bindings,q)))}return le.prototype=this,new le(this)}return y}a.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},a.stdSerializers=r,a.stdTimeFunctions=Object.assign({},{nullTime:ue,epochTime:M,unixTime:B,isoTime:N});function f(O,u,_,Q){const c=Object.getPrototypeOf(u);u[_]=u.levelVal>u.levels.values[_]?ee:c[_]?c[_]:t[_]||t[Q]||ee,m(O,u,_)}function m(O,u,_){!O.transmit&&u[_]===ee||(u[_]=function(Q){return function(){const d=O.timestamp(),p=new Array(arguments.length),E=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var y=0;y<p.length;y++)p[y]=arguments[y];if(O.serialize&&!O.asObject&&w(p,this._serialize,this.serializers,this._stdErrSerialize),O.asObject?Q.call(E,v(this,_,p,d)):Q.apply(E,p),O.transmit){const g=O.transmit.level||u.level,A=a.levels.values[g],F=a.levels.values[_];if(F<A)return;R(this,{ts:d,methodLevel:_,methodValue:F,transmitLevel:g,transmitValue:a.levels.values[O.transmit.level||u.level],send:O.transmit.send,val:u.levelVal},p)}}}(u[_]))}function v(O,u,_,Q){O._serialize&&w(_,O._serialize,O.serializers,O._stdErrSerialize);const c=_.slice();let d=c[0];const p={};Q&&(p.time=Q),p.level=a.levels.values[u];let E=(O._childLevel|0)+1;if(E<1&&(E=1),d!==null&&typeof d=="object"){for(;E--&&typeof c[0]=="object";)Object.assign(p,c.shift());d=c.length?n(c.shift(),c):void 0}else typeof d=="string"&&(d=n(c.shift(),c));return d!==void 0&&(p.msg=d),p}function w(O,u,_,Q){for(const c in O)if(Q&&O[c]instanceof Error)O[c]=a.stdSerializers.err(O[c]);else if(typeof O[c]=="object"&&!Array.isArray(O[c]))for(const d in O[c])u&&u.indexOf(d)>-1&&d in _&&(O[c][d]=_[d](O[c][d]))}function x(O,u,_){return function(){const Q=new Array(1+arguments.length);Q[0]=u;for(var c=1;c<Q.length;c++)Q[c]=arguments[c-1];return O[_].apply(this,Q)}}function R(O,u,_){const Q=u.send,c=u.ts,d=u.methodLevel,p=u.methodValue,E=u.val,y=O._logEvent.bindings;w(_,O._serialize||Object.keys(O.serializers),O.serializers,O._stdErrSerialize===void 0?!0:O._stdErrSerialize),O._logEvent.ts=c,O._logEvent.messages=_.filter(function(g){return y.indexOf(g)===-1}),O._logEvent.level.label=d,O._logEvent.level.value=p,Q(d,O._logEvent,E),O._logEvent=j(y)}function j(O){return{ts:0,messages:[],bindings:O||[],level:{label:"",value:0}}}function z(O){const u={type:O.constructor.name,msg:O.message,stack:O.stack};for(const _ in O)u[_]===void 0&&(u[_]=O[_]);return u}function $(O){return typeof O.timestamp=="function"?O.timestamp:O.timestamp===!1?ue:M}function V(){return{}}function Z(O){return O}function ee(){}function ue(){return!1}function M(){return Date.now()}function B(){return Math.round(Date.now()/1e3)}function N(){return new Date(Date.now()).toISOString()}function U(){function O(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return O(self)||O(window)||O(this)||{}}}return jc}var Qi={},cf;function Pd(){return cf||(cf=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.PINO_CUSTOM_CONTEXT_KEY=Qi.PINO_LOGGER_DEFAULTS=void 0,Qi.PINO_LOGGER_DEFAULTS={level:"info"},Qi.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Qi}var sr={},uf;function zb(){if(uf)return sr;uf=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.generateChildLogger=sr.formatChildLoggerContext=sr.getLoggerContext=sr.setBrowserLoggerContext=sr.getBrowserLoggerContext=sr.getDefaultLoggerOptions=void 0;const n=Pd();function t(v){return Object.assign(Object.assign({},v),{level:(v==null?void 0:v.level)||n.PINO_LOGGER_DEFAULTS.level})}sr.getDefaultLoggerOptions=t;function r(v,w=n.PINO_CUSTOM_CONTEXT_KEY){return v[w]||""}sr.getBrowserLoggerContext=r;function s(v,w,x=n.PINO_CUSTOM_CONTEXT_KEY){return v[x]=w,v}sr.setBrowserLoggerContext=s;function a(v,w=n.PINO_CUSTOM_CONTEXT_KEY){let x="";return typeof v.bindings>"u"?x=r(v,w):x=v.bindings().context||"",x}sr.getLoggerContext=a;function f(v,w,x=n.PINO_CUSTOM_CONTEXT_KEY){const R=a(v,x);return R.trim()?`${R}/${w}`:w}sr.formatChildLoggerContext=f;function m(v,w,x=n.PINO_CUSTOM_CONTEXT_KEY){const R=f(v,w,x),j=v.child({context:R});return s(j,R,x)}return sr.generateChildLogger=m,sr}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const t=Od.exports,r=t.__importDefault(Hb());Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return r.default}}),t.__exportStar(Pd(),n),t.__exportStar(zb(),n)})(Ze);class Bb extends Zi{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class Kb extends Zi{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}}class Vb{constructor(t,r){this.logger=t,this.core=r}}class kb extends Zi{constructor(t,r){super(),this.relayer=t,this.logger=r}}class Gb extends Zi{constructor(t){super()}}class Wb{constructor(t,r,s,a){this.core=t,this.logger=r,this.name=s}}class Yb extends Zi{constructor(t,r){super(),this.relayer=t,this.logger=r}}class Jb extends Zi{constructor(t,r){super(),this.core=t,this.logger=r}}class Qb{constructor(t,r){this.projectId=t,this.logger=r}}class Xb{constructor(t){this.opts=t,this.protocol="wc",this.version=2}}class Zb{constructor(t){this.client=t}}const em=n=>JSON.stringify(n,(t,r)=>typeof r=="bigint"?r.toString()+"n":r),tm=n=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=n.replace(t,'$1"$2n"$3');return JSON.parse(r,(s,a)=>typeof a=="string"&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)};function pu(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return tm(n)}catch{return n}}function vs(n){return typeof n=="string"?n:em(n)||""}var gu={},Un={},Wo={},Yo={};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.BrowserRandomSource=void 0;const hf=65536;class rm{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let s=0;s<r.length;s+=hf)this._crypto.getRandomValues(r.subarray(s,s+Math.min(r.length-s,hf)));return r}}Yo.BrowserRandomSource=rm;function im(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Jo={},Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});function nm(n){for(var t=0;t<n.length;t++)n[t]=0;return n}Ir.wipe=nm;Object.defineProperty(Jo,"__esModule",{value:!0});Jo.NodeRandomSource=void 0;const sm=Ir;class om{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof im<"u"){const t=gb;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(t);for(let a=0;a<s.length;a++)s[a]=r[a];return(0,sm.wipe)(r),s}}Jo.NodeRandomSource=om;Object.defineProperty(Wo,"__esModule",{value:!0});Wo.SystemRandomSource=void 0;const am=Yo,cm=Jo;class um{constructor(){if(this.isAvailable=!1,this.name="",this._source=new am.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new cm.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}Wo.SystemRandomSource=um;var je={},xd={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function t(v,w){var x=v>>>16&65535,R=v&65535,j=w>>>16&65535,z=w&65535;return R*z+(x*z+R*j<<16>>>0)|0}n.mul=Math.imul||t;function r(v,w){return v+w|0}n.add=r;function s(v,w){return v-w|0}n.sub=s;function a(v,w){return v<<w|v>>>32-w}n.rotl=a;function f(v,w){return v<<32-w|v>>>w}n.rotr=f;function m(v){return typeof v=="number"&&isFinite(v)&&Math.floor(v)===v}n.isInteger=Number.isInteger||m,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(v){return n.isInteger(v)&&v>=-n.MAX_SAFE_INTEGER&&v<=n.MAX_SAFE_INTEGER}})(xd);Object.defineProperty(je,"__esModule",{value:!0});var Td=xd;function hm(n,t){return t===void 0&&(t=0),(n[t+0]<<8|n[t+1])<<16>>16}je.readInt16BE=hm;function lm(n,t){return t===void 0&&(t=0),(n[t+0]<<8|n[t+1])>>>0}je.readUint16BE=lm;function fm(n,t){return t===void 0&&(t=0),(n[t+1]<<8|n[t])<<16>>16}je.readInt16LE=fm;function dm(n,t){return t===void 0&&(t=0),(n[t+1]<<8|n[t])>>>0}je.readUint16LE=dm;function Ad(n,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=n>>>8,t[r+1]=n>>>0,t}je.writeUint16BE=Ad;je.writeInt16BE=Ad;function Rd(n,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=n>>>0,t[r+1]=n>>>8,t}je.writeUint16LE=Rd;je.writeInt16LE=Rd;function Qc(n,t){return t===void 0&&(t=0),n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]}je.readInt32BE=Qc;function Xc(n,t){return t===void 0&&(t=0),(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3])>>>0}je.readUint32BE=Xc;function Zc(n,t){return t===void 0&&(t=0),n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t]}je.readInt32LE=Zc;function eu(n,t){return t===void 0&&(t=0),(n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t])>>>0}je.readUint32LE=eu;function Ho(n,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=n>>>24,t[r+1]=n>>>16,t[r+2]=n>>>8,t[r+3]=n>>>0,t}je.writeUint32BE=Ho;je.writeInt32BE=Ho;function zo(n,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=n>>>0,t[r+1]=n>>>8,t[r+2]=n>>>16,t[r+3]=n>>>24,t}je.writeUint32LE=zo;je.writeInt32LE=zo;function pm(n,t){t===void 0&&(t=0);var r=Qc(n,t),s=Qc(n,t+4);return r*4294967296+s-(s>>31)*4294967296}je.readInt64BE=pm;function gm(n,t){t===void 0&&(t=0);var r=Xc(n,t),s=Xc(n,t+4);return r*4294967296+s}je.readUint64BE=gm;function ym(n,t){t===void 0&&(t=0);var r=Zc(n,t),s=Zc(n,t+4);return s*4294967296+r-(r>>31)*4294967296}je.readInt64LE=ym;function _m(n,t){t===void 0&&(t=0);var r=eu(n,t),s=eu(n,t+4);return s*4294967296+r}je.readUint64LE=_m;function Cd(n,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ho(n/4294967296>>>0,t,r),Ho(n>>>0,t,r+4),t}je.writeUint64BE=Cd;je.writeInt64BE=Cd;function Nd(n,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),zo(n>>>0,t,r),zo(n/4294967296>>>0,t,r+4),t}je.writeUint64LE=Nd;je.writeInt64LE=Nd;function vm(n,t,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,a=1,f=n/8+r-1;f>=r;f--)s+=t[f]*a,a*=256;return s}je.readUintBE=vm;function bm(n,t,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,a=1,f=r;f<r+n/8;f++)s+=t[f]*a,a*=256;return s}je.readUintLE=bm;function mm(n,t,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Td.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var a=1,f=n/8+s-1;f>=s;f--)r[f]=t/a&255,a*=256;return r}je.writeUintBE=mm;function wm(n,t,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Td.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var a=1,f=s;f<s+n/8;f++)r[f]=t/a&255,a*=256;return r}je.writeUintLE=wm;function Em(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(t)}je.readFloat32BE=Em;function Sm(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(t,!0)}je.readFloat32LE=Sm;function Im(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(t)}je.readFloat64BE=Im;function Om(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(t,!0)}je.readFloat64LE=Om;function Pm(n,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,n),t}je.writeFloat32BE=Pm;function xm(n,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,n,!0),t}je.writeFloat32LE=xm;function Tm(n,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,n),t}je.writeFloat64BE=Tm;function Am(n,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,n,!0),t}je.writeFloat64LE=Am;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const t=Wo,r=je,s=Ir;n.defaultRandomSource=new t.SystemRandomSource;function a(x,R=n.defaultRandomSource){return R.randomBytes(x)}n.randomBytes=a;function f(x=n.defaultRandomSource){const R=a(4,x),j=(0,r.readUint32LE)(R);return(0,s.wipe)(R),j}n.randomUint32=f;const m="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function v(x,R=m,j=n.defaultRandomSource){if(R.length<2)throw new Error("randomString charset is too short");if(R.length>256)throw new Error("randomString charset is too long");let z="";const $=R.length,V=256-256%$;for(;x>0;){const Z=a(Math.ceil(x*256/V),j);for(let ee=0;ee<Z.length&&x>0;ee++){const ue=Z[ee];ue<V&&(z+=R.charAt(ue%$),x--)}(0,s.wipe)(Z)}return z}n.randomString=v;function w(x,R=m,j=n.defaultRandomSource){const z=Math.ceil(x/(Math.log(R.length)/Math.LN2));return v(z,R,j)}n.randomStringForEntropy=w})(Un);var Ud={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=je,r=Ir;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var s=function(){function v(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return v.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},v.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},v.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},v.prototype.update=function(w,x){if(x===void 0&&(x=w.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var R=0;if(this._bytesHashed+=x,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&x>0;)this._buffer[this._bufferLength++]=w[R++],x--;this._bufferLength===this.blockSize&&(f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(x>=this.blockSize&&(R=f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,w,R,x),x%=this.blockSize);x>0;)this._buffer[this._bufferLength++]=w[R++],x--;return this},v.prototype.finish=function(w){if(!this._finished){var x=this._bytesHashed,R=this._bufferLength,j=x/536870912|0,z=x<<3,$=x%128<112?128:256;this._buffer[R]=128;for(var V=R+1;V<$-8;V++)this._buffer[V]=0;t.writeUint32BE(j,this._buffer,$-8),t.writeUint32BE(z,this._buffer,$-4),f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,$),this._finished=!0}for(var V=0;V<this.digestLength/8;V++)t.writeUint32BE(this._stateHi[V],w,V*8),t.writeUint32BE(this._stateLo[V],w,V*8+4);return this},v.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},v.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},v.prototype.restoreState=function(w){return this._stateHi.set(w.stateHi),this._stateLo.set(w.stateLo),this._bufferLength=w.bufferLength,w.buffer&&this._buffer.set(w.buffer),this._bytesHashed=w.bytesHashed,this._finished=!1,this},v.prototype.cleanSavedState=function(w){r.wipe(w.stateHi),r.wipe(w.stateLo),w.buffer&&r.wipe(w.buffer),w.bufferLength=0,w.bytesHashed=0},v}();n.SHA512=s;var a=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function f(v,w,x,R,j,z,$){for(var V=x[0],Z=x[1],ee=x[2],ue=x[3],M=x[4],B=x[5],N=x[6],U=x[7],O=R[0],u=R[1],_=R[2],Q=R[3],c=R[4],d=R[5],p=R[6],E=R[7],y,g,A,F,W,P,q,te;$>=128;){for(var re=0;re<16;re++){var ie=8*re+z;v[re]=t.readUint32BE(j,ie),w[re]=t.readUint32BE(j,ie+4)}for(var re=0;re<80;re++){var ge=V,le=Z,me=ee,J=ue,Y=M,H=B,l=N,L=U,he=O,pe=u,Oe=_,ze=Q,Ve=c,De=d,pt=p,gt=E;if(y=U,g=E,W=g&65535,P=g>>>16,q=y&65535,te=y>>>16,y=(M>>>14|c<<32-14)^(M>>>18|c<<32-18)^(c>>>41-32|M<<32-(41-32)),g=(c>>>14|M<<32-14)^(c>>>18|M<<32-18)^(M>>>41-32|c<<32-(41-32)),W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,y=M&B^~M&N,g=c&d^~c&p,W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,y=a[re*2],g=a[re*2+1],W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,y=v[re%16],g=w[re%16],W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,P+=W>>>16,q+=P>>>16,te+=q>>>16,A=q&65535|te<<16,F=W&65535|P<<16,y=A,g=F,W=g&65535,P=g>>>16,q=y&65535,te=y>>>16,y=(V>>>28|O<<32-28)^(O>>>34-32|V<<32-(34-32))^(O>>>39-32|V<<32-(39-32)),g=(O>>>28|V<<32-28)^(V>>>34-32|O<<32-(34-32))^(V>>>39-32|O<<32-(39-32)),W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,y=V&Z^V&ee^Z&ee,g=O&u^O&_^u&_,W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,P+=W>>>16,q+=P>>>16,te+=q>>>16,L=q&65535|te<<16,gt=W&65535|P<<16,y=J,g=ze,W=g&65535,P=g>>>16,q=y&65535,te=y>>>16,y=A,g=F,W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,P+=W>>>16,q+=P>>>16,te+=q>>>16,J=q&65535|te<<16,ze=W&65535|P<<16,Z=ge,ee=le,ue=me,M=J,B=Y,N=H,U=l,V=L,u=he,_=pe,Q=Oe,c=ze,d=Ve,p=De,E=pt,O=gt,re%16===15)for(var ie=0;ie<16;ie++)y=v[ie],g=w[ie],W=g&65535,P=g>>>16,q=y&65535,te=y>>>16,y=v[(ie+9)%16],g=w[(ie+9)%16],W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,A=v[(ie+1)%16],F=w[(ie+1)%16],y=(A>>>1|F<<32-1)^(A>>>8|F<<32-8)^A>>>7,g=(F>>>1|A<<32-1)^(F>>>8|A<<32-8)^(F>>>7|A<<32-7),W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,A=v[(ie+14)%16],F=w[(ie+14)%16],y=(A>>>19|F<<32-19)^(F>>>61-32|A<<32-(61-32))^A>>>6,g=(F>>>19|A<<32-19)^(A>>>61-32|F<<32-(61-32))^(F>>>6|A<<32-6),W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,P+=W>>>16,q+=P>>>16,te+=q>>>16,v[ie]=q&65535|te<<16,w[ie]=W&65535|P<<16}y=V,g=O,W=g&65535,P=g>>>16,q=y&65535,te=y>>>16,y=x[0],g=R[0],W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,P+=W>>>16,q+=P>>>16,te+=q>>>16,x[0]=V=q&65535|te<<16,R[0]=O=W&65535|P<<16,y=Z,g=u,W=g&65535,P=g>>>16,q=y&65535,te=y>>>16,y=x[1],g=R[1],W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,P+=W>>>16,q+=P>>>16,te+=q>>>16,x[1]=Z=q&65535|te<<16,R[1]=u=W&65535|P<<16,y=ee,g=_,W=g&65535,P=g>>>16,q=y&65535,te=y>>>16,y=x[2],g=R[2],W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,P+=W>>>16,q+=P>>>16,te+=q>>>16,x[2]=ee=q&65535|te<<16,R[2]=_=W&65535|P<<16,y=ue,g=Q,W=g&65535,P=g>>>16,q=y&65535,te=y>>>16,y=x[3],g=R[3],W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,P+=W>>>16,q+=P>>>16,te+=q>>>16,x[3]=ue=q&65535|te<<16,R[3]=Q=W&65535|P<<16,y=M,g=c,W=g&65535,P=g>>>16,q=y&65535,te=y>>>16,y=x[4],g=R[4],W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,P+=W>>>16,q+=P>>>16,te+=q>>>16,x[4]=M=q&65535|te<<16,R[4]=c=W&65535|P<<16,y=B,g=d,W=g&65535,P=g>>>16,q=y&65535,te=y>>>16,y=x[5],g=R[5],W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,P+=W>>>16,q+=P>>>16,te+=q>>>16,x[5]=B=q&65535|te<<16,R[5]=d=W&65535|P<<16,y=N,g=p,W=g&65535,P=g>>>16,q=y&65535,te=y>>>16,y=x[6],g=R[6],W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,P+=W>>>16,q+=P>>>16,te+=q>>>16,x[6]=N=q&65535|te<<16,R[6]=p=W&65535|P<<16,y=U,g=E,W=g&65535,P=g>>>16,q=y&65535,te=y>>>16,y=x[7],g=R[7],W+=g&65535,P+=g>>>16,q+=y&65535,te+=y>>>16,P+=W>>>16,q+=P>>>16,te+=q>>>16,x[7]=U=q&65535|te<<16,R[7]=E=W&65535|P<<16,z+=128,$-=128}return z}function m(v){var w=new s;w.update(v);var x=w.digest();return w.clean(),x}n.hash=m})(Ud);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const t=Un,r=Ud,s=Ir;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function a(J){const Y=new Float64Array(16);if(J)for(let H=0;H<J.length;H++)Y[H]=J[H];return Y}const f=new Uint8Array(32);f[0]=9;const m=a(),v=a([1]),w=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),x=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),R=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),j=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),z=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function $(J,Y){for(let H=0;H<16;H++)J[H]=Y[H]|0}function V(J){let Y=1;for(let H=0;H<16;H++){let l=J[H]+Y+65535;Y=Math.floor(l/65536),J[H]=l-Y*65536}J[0]+=Y-1+37*(Y-1)}function Z(J,Y,H){const l=~(H-1);for(let L=0;L<16;L++){const he=l&(J[L]^Y[L]);J[L]^=he,Y[L]^=he}}function ee(J,Y){const H=a(),l=a();for(let L=0;L<16;L++)l[L]=Y[L];V(l),V(l),V(l);for(let L=0;L<2;L++){H[0]=l[0]-65517;for(let pe=1;pe<15;pe++)H[pe]=l[pe]-65535-(H[pe-1]>>16&1),H[pe-1]&=65535;H[15]=l[15]-32767-(H[14]>>16&1);const he=H[15]>>16&1;H[14]&=65535,Z(l,H,1-he)}for(let L=0;L<16;L++)J[2*L]=l[L]&255,J[2*L+1]=l[L]>>8}function ue(J,Y){let H=0;for(let l=0;l<32;l++)H|=J[l]^Y[l];return(1&H-1>>>8)-1}function M(J,Y){const H=new Uint8Array(32),l=new Uint8Array(32);return ee(H,J),ee(l,Y),ue(H,l)}function B(J){const Y=new Uint8Array(32);return ee(Y,J),Y[0]&1}function N(J,Y){for(let H=0;H<16;H++)J[H]=Y[2*H]+(Y[2*H+1]<<8);J[15]&=32767}function U(J,Y,H){for(let l=0;l<16;l++)J[l]=Y[l]+H[l]}function O(J,Y,H){for(let l=0;l<16;l++)J[l]=Y[l]-H[l]}function u(J,Y,H){let l,L,he=0,pe=0,Oe=0,ze=0,Ve=0,De=0,pt=0,gt=0,Me=0,Pe=0,Ue=0,Le=0,qe=0,Te=0,Fe=0,Ie=0,Ae=0,Be=0,xe=0,ke=0,We=0,et=0,tt=0,Je=0,Zt=0,ur=0,Vr=0,er=0,ti=0,vi=0,Li=0,wt=H[0],yt=H[1],Et=H[2],St=H[3],bt=H[4],_t=H[5],Lt=H[6],Ft=H[7],It=H[8],jt=H[9],Ot=H[10],Tt=H[11],Pt=H[12],ht=H[13],Dt=H[14],$t=H[15];l=Y[0],he+=l*wt,pe+=l*yt,Oe+=l*Et,ze+=l*St,Ve+=l*bt,De+=l*_t,pt+=l*Lt,gt+=l*Ft,Me+=l*It,Pe+=l*jt,Ue+=l*Ot,Le+=l*Tt,qe+=l*Pt,Te+=l*ht,Fe+=l*Dt,Ie+=l*$t,l=Y[1],pe+=l*wt,Oe+=l*yt,ze+=l*Et,Ve+=l*St,De+=l*bt,pt+=l*_t,gt+=l*Lt,Me+=l*Ft,Pe+=l*It,Ue+=l*jt,Le+=l*Ot,qe+=l*Tt,Te+=l*Pt,Fe+=l*ht,Ie+=l*Dt,Ae+=l*$t,l=Y[2],Oe+=l*wt,ze+=l*yt,Ve+=l*Et,De+=l*St,pt+=l*bt,gt+=l*_t,Me+=l*Lt,Pe+=l*Ft,Ue+=l*It,Le+=l*jt,qe+=l*Ot,Te+=l*Tt,Fe+=l*Pt,Ie+=l*ht,Ae+=l*Dt,Be+=l*$t,l=Y[3],ze+=l*wt,Ve+=l*yt,De+=l*Et,pt+=l*St,gt+=l*bt,Me+=l*_t,Pe+=l*Lt,Ue+=l*Ft,Le+=l*It,qe+=l*jt,Te+=l*Ot,Fe+=l*Tt,Ie+=l*Pt,Ae+=l*ht,Be+=l*Dt,xe+=l*$t,l=Y[4],Ve+=l*wt,De+=l*yt,pt+=l*Et,gt+=l*St,Me+=l*bt,Pe+=l*_t,Ue+=l*Lt,Le+=l*Ft,qe+=l*It,Te+=l*jt,Fe+=l*Ot,Ie+=l*Tt,Ae+=l*Pt,Be+=l*ht,xe+=l*Dt,ke+=l*$t,l=Y[5],De+=l*wt,pt+=l*yt,gt+=l*Et,Me+=l*St,Pe+=l*bt,Ue+=l*_t,Le+=l*Lt,qe+=l*Ft,Te+=l*It,Fe+=l*jt,Ie+=l*Ot,Ae+=l*Tt,Be+=l*Pt,xe+=l*ht,ke+=l*Dt,We+=l*$t,l=Y[6],pt+=l*wt,gt+=l*yt,Me+=l*Et,Pe+=l*St,Ue+=l*bt,Le+=l*_t,qe+=l*Lt,Te+=l*Ft,Fe+=l*It,Ie+=l*jt,Ae+=l*Ot,Be+=l*Tt,xe+=l*Pt,ke+=l*ht,We+=l*Dt,et+=l*$t,l=Y[7],gt+=l*wt,Me+=l*yt,Pe+=l*Et,Ue+=l*St,Le+=l*bt,qe+=l*_t,Te+=l*Lt,Fe+=l*Ft,Ie+=l*It,Ae+=l*jt,Be+=l*Ot,xe+=l*Tt,ke+=l*Pt,We+=l*ht,et+=l*Dt,tt+=l*$t,l=Y[8],Me+=l*wt,Pe+=l*yt,Ue+=l*Et,Le+=l*St,qe+=l*bt,Te+=l*_t,Fe+=l*Lt,Ie+=l*Ft,Ae+=l*It,Be+=l*jt,xe+=l*Ot,ke+=l*Tt,We+=l*Pt,et+=l*ht,tt+=l*Dt,Je+=l*$t,l=Y[9],Pe+=l*wt,Ue+=l*yt,Le+=l*Et,qe+=l*St,Te+=l*bt,Fe+=l*_t,Ie+=l*Lt,Ae+=l*Ft,Be+=l*It,xe+=l*jt,ke+=l*Ot,We+=l*Tt,et+=l*Pt,tt+=l*ht,Je+=l*Dt,Zt+=l*$t,l=Y[10],Ue+=l*wt,Le+=l*yt,qe+=l*Et,Te+=l*St,Fe+=l*bt,Ie+=l*_t,Ae+=l*Lt,Be+=l*Ft,xe+=l*It,ke+=l*jt,We+=l*Ot,et+=l*Tt,tt+=l*Pt,Je+=l*ht,Zt+=l*Dt,ur+=l*$t,l=Y[11],Le+=l*wt,qe+=l*yt,Te+=l*Et,Fe+=l*St,Ie+=l*bt,Ae+=l*_t,Be+=l*Lt,xe+=l*Ft,ke+=l*It,We+=l*jt,et+=l*Ot,tt+=l*Tt,Je+=l*Pt,Zt+=l*ht,ur+=l*Dt,Vr+=l*$t,l=Y[12],qe+=l*wt,Te+=l*yt,Fe+=l*Et,Ie+=l*St,Ae+=l*bt,Be+=l*_t,xe+=l*Lt,ke+=l*Ft,We+=l*It,et+=l*jt,tt+=l*Ot,Je+=l*Tt,Zt+=l*Pt,ur+=l*ht,Vr+=l*Dt,er+=l*$t,l=Y[13],Te+=l*wt,Fe+=l*yt,Ie+=l*Et,Ae+=l*St,Be+=l*bt,xe+=l*_t,ke+=l*Lt,We+=l*Ft,et+=l*It,tt+=l*jt,Je+=l*Ot,Zt+=l*Tt,ur+=l*Pt,Vr+=l*ht,er+=l*Dt,ti+=l*$t,l=Y[14],Fe+=l*wt,Ie+=l*yt,Ae+=l*Et,Be+=l*St,xe+=l*bt,ke+=l*_t,We+=l*Lt,et+=l*Ft,tt+=l*It,Je+=l*jt,Zt+=l*Ot,ur+=l*Tt,Vr+=l*Pt,er+=l*ht,ti+=l*Dt,vi+=l*$t,l=Y[15],Ie+=l*wt,Ae+=l*yt,Be+=l*Et,xe+=l*St,ke+=l*bt,We+=l*_t,et+=l*Lt,tt+=l*Ft,Je+=l*It,Zt+=l*jt,ur+=l*Ot,Vr+=l*Tt,er+=l*Pt,ti+=l*ht,vi+=l*Dt,Li+=l*$t,he+=38*Ae,pe+=38*Be,Oe+=38*xe,ze+=38*ke,Ve+=38*We,De+=38*et,pt+=38*tt,gt+=38*Je,Me+=38*Zt,Pe+=38*ur,Ue+=38*Vr,Le+=38*er,qe+=38*ti,Te+=38*vi,Fe+=38*Li,L=1,l=he+L+65535,L=Math.floor(l/65536),he=l-L*65536,l=pe+L+65535,L=Math.floor(l/65536),pe=l-L*65536,l=Oe+L+65535,L=Math.floor(l/65536),Oe=l-L*65536,l=ze+L+65535,L=Math.floor(l/65536),ze=l-L*65536,l=Ve+L+65535,L=Math.floor(l/65536),Ve=l-L*65536,l=De+L+65535,L=Math.floor(l/65536),De=l-L*65536,l=pt+L+65535,L=Math.floor(l/65536),pt=l-L*65536,l=gt+L+65535,L=Math.floor(l/65536),gt=l-L*65536,l=Me+L+65535,L=Math.floor(l/65536),Me=l-L*65536,l=Pe+L+65535,L=Math.floor(l/65536),Pe=l-L*65536,l=Ue+L+65535,L=Math.floor(l/65536),Ue=l-L*65536,l=Le+L+65535,L=Math.floor(l/65536),Le=l-L*65536,l=qe+L+65535,L=Math.floor(l/65536),qe=l-L*65536,l=Te+L+65535,L=Math.floor(l/65536),Te=l-L*65536,l=Fe+L+65535,L=Math.floor(l/65536),Fe=l-L*65536,l=Ie+L+65535,L=Math.floor(l/65536),Ie=l-L*65536,he+=L-1+37*(L-1),L=1,l=he+L+65535,L=Math.floor(l/65536),he=l-L*65536,l=pe+L+65535,L=Math.floor(l/65536),pe=l-L*65536,l=Oe+L+65535,L=Math.floor(l/65536),Oe=l-L*65536,l=ze+L+65535,L=Math.floor(l/65536),ze=l-L*65536,l=Ve+L+65535,L=Math.floor(l/65536),Ve=l-L*65536,l=De+L+65535,L=Math.floor(l/65536),De=l-L*65536,l=pt+L+65535,L=Math.floor(l/65536),pt=l-L*65536,l=gt+L+65535,L=Math.floor(l/65536),gt=l-L*65536,l=Me+L+65535,L=Math.floor(l/65536),Me=l-L*65536,l=Pe+L+65535,L=Math.floor(l/65536),Pe=l-L*65536,l=Ue+L+65535,L=Math.floor(l/65536),Ue=l-L*65536,l=Le+L+65535,L=Math.floor(l/65536),Le=l-L*65536,l=qe+L+65535,L=Math.floor(l/65536),qe=l-L*65536,l=Te+L+65535,L=Math.floor(l/65536),Te=l-L*65536,l=Fe+L+65535,L=Math.floor(l/65536),Fe=l-L*65536,l=Ie+L+65535,L=Math.floor(l/65536),Ie=l-L*65536,he+=L-1+37*(L-1),J[0]=he,J[1]=pe,J[2]=Oe,J[3]=ze,J[4]=Ve,J[5]=De,J[6]=pt,J[7]=gt,J[8]=Me,J[9]=Pe,J[10]=Ue,J[11]=Le,J[12]=qe,J[13]=Te,J[14]=Fe,J[15]=Ie}function _(J,Y){u(J,Y,Y)}function Q(J,Y){const H=a();let l;for(l=0;l<16;l++)H[l]=Y[l];for(l=253;l>=0;l--)_(H,H),l!==2&&l!==4&&u(H,H,Y);for(l=0;l<16;l++)J[l]=H[l]}function c(J,Y){const H=a();let l;for(l=0;l<16;l++)H[l]=Y[l];for(l=250;l>=0;l--)_(H,H),l!==1&&u(H,H,Y);for(l=0;l<16;l++)J[l]=H[l]}function d(J,Y){const H=a(),l=a(),L=a(),he=a(),pe=a(),Oe=a(),ze=a(),Ve=a(),De=a();O(H,J[1],J[0]),O(De,Y[1],Y[0]),u(H,H,De),U(l,J[0],J[1]),U(De,Y[0],Y[1]),u(l,l,De),u(L,J[3],Y[3]),u(L,L,x),u(he,J[2],Y[2]),U(he,he,he),O(pe,l,H),O(Oe,he,L),U(ze,he,L),U(Ve,l,H),u(J[0],pe,Oe),u(J[1],Ve,ze),u(J[2],ze,Oe),u(J[3],pe,Ve)}function p(J,Y,H){for(let l=0;l<4;l++)Z(J[l],Y[l],H)}function E(J,Y){const H=a(),l=a(),L=a();Q(L,Y[2]),u(H,Y[0],L),u(l,Y[1],L),ee(J,l),J[31]^=B(H)<<7}function y(J,Y,H){$(J[0],m),$(J[1],v),$(J[2],v),$(J[3],m);for(let l=255;l>=0;--l){const L=H[l/8|0]>>(l&7)&1;p(J,Y,L),d(Y,J),d(J,J),p(J,Y,L)}}function g(J,Y){const H=[a(),a(),a(),a()];$(H[0],R),$(H[1],j),$(H[2],v),u(H[3],R,j),y(J,H,Y)}function A(J){if(J.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const Y=(0,r.hash)(J);Y[0]&=248,Y[31]&=127,Y[31]|=64;const H=new Uint8Array(32),l=[a(),a(),a(),a()];g(l,Y),E(H,l);const L=new Uint8Array(64);return L.set(J),L.set(H,32),{publicKey:H,secretKey:L}}n.generateKeyPairFromSeed=A;function F(J){const Y=(0,t.randomBytes)(32,J),H=A(Y);return(0,s.wipe)(Y),H}n.generateKeyPair=F;function W(J){if(J.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(J.subarray(32))}n.extractPublicKeyFromSecretKey=W;const P=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function q(J,Y){let H,l,L,he;for(l=63;l>=32;--l){for(H=0,L=l-32,he=l-12;L<he;++L)Y[L]+=H-16*Y[l]*P[L-(l-32)],H=Math.floor((Y[L]+128)/256),Y[L]-=H*256;Y[L]+=H,Y[l]=0}for(H=0,L=0;L<32;L++)Y[L]+=H-(Y[31]>>4)*P[L],H=Y[L]>>8,Y[L]&=255;for(L=0;L<32;L++)Y[L]-=H*P[L];for(l=0;l<32;l++)Y[l+1]+=Y[l]>>8,J[l]=Y[l]&255}function te(J){const Y=new Float64Array(64);for(let H=0;H<64;H++)Y[H]=J[H];for(let H=0;H<64;H++)J[H]=0;q(J,Y)}function re(J,Y){const H=new Float64Array(64),l=[a(),a(),a(),a()],L=(0,r.hash)(J.subarray(0,32));L[0]&=248,L[31]&=127,L[31]|=64;const he=new Uint8Array(64);he.set(L.subarray(32),32);const pe=new r.SHA512;pe.update(he.subarray(32)),pe.update(Y);const Oe=pe.digest();pe.clean(),te(Oe),g(l,Oe),E(he,l),pe.reset(),pe.update(he.subarray(0,32)),pe.update(J.subarray(32)),pe.update(Y);const ze=pe.digest();te(ze);for(let Ve=0;Ve<32;Ve++)H[Ve]=Oe[Ve];for(let Ve=0;Ve<32;Ve++)for(let De=0;De<32;De++)H[Ve+De]+=ze[Ve]*L[De];return q(he.subarray(32),H),he}n.sign=re;function ie(J,Y){const H=a(),l=a(),L=a(),he=a(),pe=a(),Oe=a(),ze=a();return $(J[2],v),N(J[1],Y),_(L,J[1]),u(he,L,w),O(L,L,J[2]),U(he,J[2],he),_(pe,he),_(Oe,pe),u(ze,Oe,pe),u(H,ze,L),u(H,H,he),c(H,H),u(H,H,L),u(H,H,he),u(H,H,he),u(J[0],H,he),_(l,J[0]),u(l,l,he),M(l,L)&&u(J[0],J[0],z),_(l,J[0]),u(l,l,he),M(l,L)?-1:(B(J[0])===Y[31]>>7&&O(J[0],m,J[0]),u(J[3],J[0],J[1]),0)}function ge(J,Y,H){const l=new Uint8Array(32),L=[a(),a(),a(),a()],he=[a(),a(),a(),a()];if(H.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(ie(he,J))return!1;const pe=new r.SHA512;pe.update(H.subarray(0,32)),pe.update(J),pe.update(Y);const Oe=pe.digest();return te(Oe),y(L,he,Oe),g(he,H.subarray(32)),d(L,he),E(l,L),!ue(H,l)}n.verify=ge;function le(J){let Y=[a(),a(),a(),a()];if(ie(Y,J))throw new Error("Ed25519: invalid public key");let H=a(),l=a(),L=Y[1];U(H,v,L),O(l,v,L),Q(l,l),u(H,H,l);let he=new Uint8Array(32);return ee(he,H),he}n.convertPublicKeyToX25519=le;function me(J){const Y=(0,r.hash)(J.subarray(0,32));Y[0]&=248,Y[31]&=127,Y[31]|=64;const H=new Uint8Array(Y.subarray(0,32));return(0,s.wipe)(Y),H}n.convertSecretKeyToX25519=me})(gu);const Rm="EdDSA",Cm="JWT",Ld=".",Fd="base64url",Nm="utf8",Um="utf8",Lm=":",Fm="did",jm="key",lf="base58btc",Dm="z",$m="K36",Mm=32;function yu(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function jd(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?yu(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function qm(n,t){t||(t=n.reduce((a,f)=>a+f.length,0));const r=jd(t);let s=0;for(const a of n)r.set(a,s),s+=a.length;return yu(r)}function Dd(n,t,r,s){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:s}}}const ff=Dd("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Dc=Dd("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);const t=jd(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),$d={utf8:ff,"utf-8":ff,hex:Cn.base16,latin1:Dc,ascii:Dc,binary:Dc,...Cn};function _u(n,t="utf8"){const r=$d[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}function vu(n,t="utf8"){const r=$d[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?yu(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}function Bo(n){return _u(vu(vs(n),Nm),Fd)}function Md(n){const t=vu($m,lf),r=Dm+_u(qm([t,n]),lf);return[Fm,jm,r].join(Lm)}function Hm(n){return _u(n,Fd)}function zm(n){return vu([Bo(n.header),Bo(n.payload)].join(Ld),Um)}function Bm(n){return[Bo(n.header),Bo(n.payload),Hm(n.signature)].join(Ld)}function df(n=Un.randomBytes(Mm)){return gu.generateKeyPairFromSeed(n)}async function Km(n,t,r,s,a=be.fromMiliseconds(Date.now())){const f={alg:Rm,typ:Cm},m=Md(s.publicKey),v=a+r,w={iss:m,sub:n,aud:t,iat:a,exp:v},x=zm({header:f,payload:w}),R=gu.sign(s.secretKey,x);return Bm({header:f,payload:w,signature:R})}var bu={},Qo={};Object.defineProperty(Qo,"__esModule",{value:!0});var Qt=je,tu=Ir,Vm=20;function km(n,t,r){for(var s=1634760805,a=857760878,f=2036477234,m=1797285236,v=r[3]<<24|r[2]<<16|r[1]<<8|r[0],w=r[7]<<24|r[6]<<16|r[5]<<8|r[4],x=r[11]<<24|r[10]<<16|r[9]<<8|r[8],R=r[15]<<24|r[14]<<16|r[13]<<8|r[12],j=r[19]<<24|r[18]<<16|r[17]<<8|r[16],z=r[23]<<24|r[22]<<16|r[21]<<8|r[20],$=r[27]<<24|r[26]<<16|r[25]<<8|r[24],V=r[31]<<24|r[30]<<16|r[29]<<8|r[28],Z=t[3]<<24|t[2]<<16|t[1]<<8|t[0],ee=t[7]<<24|t[6]<<16|t[5]<<8|t[4],ue=t[11]<<24|t[10]<<16|t[9]<<8|t[8],M=t[15]<<24|t[14]<<16|t[13]<<8|t[12],B=s,N=a,U=f,O=m,u=v,_=w,Q=x,c=R,d=j,p=z,E=$,y=V,g=Z,A=ee,F=ue,W=M,P=0;P<Vm;P+=2)B=B+u|0,g^=B,g=g>>>32-16|g<<16,d=d+g|0,u^=d,u=u>>>32-12|u<<12,N=N+_|0,A^=N,A=A>>>32-16|A<<16,p=p+A|0,_^=p,_=_>>>32-12|_<<12,U=U+Q|0,F^=U,F=F>>>32-16|F<<16,E=E+F|0,Q^=E,Q=Q>>>32-12|Q<<12,O=O+c|0,W^=O,W=W>>>32-16|W<<16,y=y+W|0,c^=y,c=c>>>32-12|c<<12,U=U+Q|0,F^=U,F=F>>>32-8|F<<8,E=E+F|0,Q^=E,Q=Q>>>32-7|Q<<7,O=O+c|0,W^=O,W=W>>>32-8|W<<8,y=y+W|0,c^=y,c=c>>>32-7|c<<7,N=N+_|0,A^=N,A=A>>>32-8|A<<8,p=p+A|0,_^=p,_=_>>>32-7|_<<7,B=B+u|0,g^=B,g=g>>>32-8|g<<8,d=d+g|0,u^=d,u=u>>>32-7|u<<7,B=B+_|0,W^=B,W=W>>>32-16|W<<16,E=E+W|0,_^=E,_=_>>>32-12|_<<12,N=N+Q|0,g^=N,g=g>>>32-16|g<<16,y=y+g|0,Q^=y,Q=Q>>>32-12|Q<<12,U=U+c|0,A^=U,A=A>>>32-16|A<<16,d=d+A|0,c^=d,c=c>>>32-12|c<<12,O=O+u|0,F^=O,F=F>>>32-16|F<<16,p=p+F|0,u^=p,u=u>>>32-12|u<<12,U=U+c|0,A^=U,A=A>>>32-8|A<<8,d=d+A|0,c^=d,c=c>>>32-7|c<<7,O=O+u|0,F^=O,F=F>>>32-8|F<<8,p=p+F|0,u^=p,u=u>>>32-7|u<<7,N=N+Q|0,g^=N,g=g>>>32-8|g<<8,y=y+g|0,Q^=y,Q=Q>>>32-7|Q<<7,B=B+_|0,W^=B,W=W>>>32-8|W<<8,E=E+W|0,_^=E,_=_>>>32-7|_<<7;Qt.writeUint32LE(B+s|0,n,0),Qt.writeUint32LE(N+a|0,n,4),Qt.writeUint32LE(U+f|0,n,8),Qt.writeUint32LE(O+m|0,n,12),Qt.writeUint32LE(u+v|0,n,16),Qt.writeUint32LE(_+w|0,n,20),Qt.writeUint32LE(Q+x|0,n,24),Qt.writeUint32LE(c+R|0,n,28),Qt.writeUint32LE(d+j|0,n,32),Qt.writeUint32LE(p+z|0,n,36),Qt.writeUint32LE(E+$|0,n,40),Qt.writeUint32LE(y+V|0,n,44),Qt.writeUint32LE(g+Z|0,n,48),Qt.writeUint32LE(A+ee|0,n,52),Qt.writeUint32LE(F+ue|0,n,56),Qt.writeUint32LE(W+M|0,n,60)}function qd(n,t,r,s,a){if(a===void 0&&(a=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw new Error("ChaCha: destination is shorter than source");var f,m;if(a===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");f=new Uint8Array(16),m=f.length-t.length,f.set(t,m)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");f=t,m=a}for(var v=new Uint8Array(64),w=0;w<r.length;w+=64){km(v,f,n);for(var x=w;x<w+64&&x<r.length;x++)s[x]=r[x]^v[x-w];Wm(f,0,m)}return tu.wipe(v),a===0&&tu.wipe(f),s}Qo.streamXOR=qd;function Gm(n,t,r,s){return s===void 0&&(s=0),tu.wipe(r),qd(n,t,r,r,s)}Qo.stream=Gm;function Wm(n,t,r){for(var s=1;r--;)s=s+(n[t]&255)|0,n[t]=s&255,s>>>=8,t++;if(s>0)throw new Error("ChaCha: counter overflow")}var Hd={},Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});function Ym(n,t,r){return~(n-1)&t|n-1&r}Ci.select=Ym;function Jm(n,t){return(n|0)-(t|0)-1>>>31&1}Ci.lessOrEqual=Jm;function zd(n,t){if(n.length!==t.length)return 0;for(var r=0,s=0;s<n.length;s++)r|=n[s]^t[s];return 1&r-1>>>8}Ci.compare=zd;function Qm(n,t){return n.length===0||t.length===0?!1:zd(n,t)!==0}Ci.equal=Qm;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=Ci,r=Ir;n.DIGEST_LENGTH=16;var s=function(){function m(v){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var w=v[0]|v[1]<<8;this._r[0]=w&8191;var x=v[2]|v[3]<<8;this._r[1]=(w>>>13|x<<3)&8191;var R=v[4]|v[5]<<8;this._r[2]=(x>>>10|R<<6)&7939;var j=v[6]|v[7]<<8;this._r[3]=(R>>>7|j<<9)&8191;var z=v[8]|v[9]<<8;this._r[4]=(j>>>4|z<<12)&255,this._r[5]=z>>>1&8190;var $=v[10]|v[11]<<8;this._r[6]=(z>>>14|$<<2)&8191;var V=v[12]|v[13]<<8;this._r[7]=($>>>11|V<<5)&8065;var Z=v[14]|v[15]<<8;this._r[8]=(V>>>8|Z<<8)&8191,this._r[9]=Z>>>5&127,this._pad[0]=v[16]|v[17]<<8,this._pad[1]=v[18]|v[19]<<8,this._pad[2]=v[20]|v[21]<<8,this._pad[3]=v[22]|v[23]<<8,this._pad[4]=v[24]|v[25]<<8,this._pad[5]=v[26]|v[27]<<8,this._pad[6]=v[28]|v[29]<<8,this._pad[7]=v[30]|v[31]<<8}return m.prototype._blocks=function(v,w,x){for(var R=this._fin?0:2048,j=this._h[0],z=this._h[1],$=this._h[2],V=this._h[3],Z=this._h[4],ee=this._h[5],ue=this._h[6],M=this._h[7],B=this._h[8],N=this._h[9],U=this._r[0],O=this._r[1],u=this._r[2],_=this._r[3],Q=this._r[4],c=this._r[5],d=this._r[6],p=this._r[7],E=this._r[8],y=this._r[9];x>=16;){var g=v[w+0]|v[w+1]<<8;j+=g&8191;var A=v[w+2]|v[w+3]<<8;z+=(g>>>13|A<<3)&8191;var F=v[w+4]|v[w+5]<<8;$+=(A>>>10|F<<6)&8191;var W=v[w+6]|v[w+7]<<8;V+=(F>>>7|W<<9)&8191;var P=v[w+8]|v[w+9]<<8;Z+=(W>>>4|P<<12)&8191,ee+=P>>>1&8191;var q=v[w+10]|v[w+11]<<8;ue+=(P>>>14|q<<2)&8191;var te=v[w+12]|v[w+13]<<8;M+=(q>>>11|te<<5)&8191;var re=v[w+14]|v[w+15]<<8;B+=(te>>>8|re<<8)&8191,N+=re>>>5|R;var ie=0,ge=ie;ge+=j*U,ge+=z*(5*y),ge+=$*(5*E),ge+=V*(5*p),ge+=Z*(5*d),ie=ge>>>13,ge&=8191,ge+=ee*(5*c),ge+=ue*(5*Q),ge+=M*(5*_),ge+=B*(5*u),ge+=N*(5*O),ie+=ge>>>13,ge&=8191;var le=ie;le+=j*O,le+=z*U,le+=$*(5*y),le+=V*(5*E),le+=Z*(5*p),ie=le>>>13,le&=8191,le+=ee*(5*d),le+=ue*(5*c),le+=M*(5*Q),le+=B*(5*_),le+=N*(5*u),ie+=le>>>13,le&=8191;var me=ie;me+=j*u,me+=z*O,me+=$*U,me+=V*(5*y),me+=Z*(5*E),ie=me>>>13,me&=8191,me+=ee*(5*p),me+=ue*(5*d),me+=M*(5*c),me+=B*(5*Q),me+=N*(5*_),ie+=me>>>13,me&=8191;var J=ie;J+=j*_,J+=z*u,J+=$*O,J+=V*U,J+=Z*(5*y),ie=J>>>13,J&=8191,J+=ee*(5*E),J+=ue*(5*p),J+=M*(5*d),J+=B*(5*c),J+=N*(5*Q),ie+=J>>>13,J&=8191;var Y=ie;Y+=j*Q,Y+=z*_,Y+=$*u,Y+=V*O,Y+=Z*U,ie=Y>>>13,Y&=8191,Y+=ee*(5*y),Y+=ue*(5*E),Y+=M*(5*p),Y+=B*(5*d),Y+=N*(5*c),ie+=Y>>>13,Y&=8191;var H=ie;H+=j*c,H+=z*Q,H+=$*_,H+=V*u,H+=Z*O,ie=H>>>13,H&=8191,H+=ee*U,H+=ue*(5*y),H+=M*(5*E),H+=B*(5*p),H+=N*(5*d),ie+=H>>>13,H&=8191;var l=ie;l+=j*d,l+=z*c,l+=$*Q,l+=V*_,l+=Z*u,ie=l>>>13,l&=8191,l+=ee*O,l+=ue*U,l+=M*(5*y),l+=B*(5*E),l+=N*(5*p),ie+=l>>>13,l&=8191;var L=ie;L+=j*p,L+=z*d,L+=$*c,L+=V*Q,L+=Z*_,ie=L>>>13,L&=8191,L+=ee*u,L+=ue*O,L+=M*U,L+=B*(5*y),L+=N*(5*E),ie+=L>>>13,L&=8191;var he=ie;he+=j*E,he+=z*p,he+=$*d,he+=V*c,he+=Z*Q,ie=he>>>13,he&=8191,he+=ee*_,he+=ue*u,he+=M*O,he+=B*U,he+=N*(5*y),ie+=he>>>13,he&=8191;var pe=ie;pe+=j*y,pe+=z*E,pe+=$*p,pe+=V*d,pe+=Z*c,ie=pe>>>13,pe&=8191,pe+=ee*Q,pe+=ue*_,pe+=M*u,pe+=B*O,pe+=N*U,ie+=pe>>>13,pe&=8191,ie=(ie<<2)+ie|0,ie=ie+ge|0,ge=ie&8191,ie=ie>>>13,le+=ie,j=ge,z=le,$=me,V=J,Z=Y,ee=H,ue=l,M=L,B=he,N=pe,w+=16,x-=16}this._h[0]=j,this._h[1]=z,this._h[2]=$,this._h[3]=V,this._h[4]=Z,this._h[5]=ee,this._h[6]=ue,this._h[7]=M,this._h[8]=B,this._h[9]=N},m.prototype.finish=function(v,w){w===void 0&&(w=0);var x=new Uint16Array(10),R,j,z,$;if(this._leftover){for($=this._leftover,this._buffer[$++]=1;$<16;$++)this._buffer[$]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(R=this._h[1]>>>13,this._h[1]&=8191,$=2;$<10;$++)this._h[$]+=R,R=this._h[$]>>>13,this._h[$]&=8191;for(this._h[0]+=R*5,R=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=R,R=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=R,x[0]=this._h[0]+5,R=x[0]>>>13,x[0]&=8191,$=1;$<10;$++)x[$]=this._h[$]+R,R=x[$]>>>13,x[$]&=8191;for(x[9]-=1<<13,j=(R^1)-1,$=0;$<10;$++)x[$]&=j;for(j=~j,$=0;$<10;$++)this._h[$]=this._h[$]&j|x[$];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,z=this._h[0]+this._pad[0],this._h[0]=z&65535,$=1;$<8;$++)z=(this._h[$]+this._pad[$]|0)+(z>>>16)|0,this._h[$]=z&65535;return v[w+0]=this._h[0]>>>0,v[w+1]=this._h[0]>>>8,v[w+2]=this._h[1]>>>0,v[w+3]=this._h[1]>>>8,v[w+4]=this._h[2]>>>0,v[w+5]=this._h[2]>>>8,v[w+6]=this._h[3]>>>0,v[w+7]=this._h[3]>>>8,v[w+8]=this._h[4]>>>0,v[w+9]=this._h[4]>>>8,v[w+10]=this._h[5]>>>0,v[w+11]=this._h[5]>>>8,v[w+12]=this._h[6]>>>0,v[w+13]=this._h[6]>>>8,v[w+14]=this._h[7]>>>0,v[w+15]=this._h[7]>>>8,this._finished=!0,this},m.prototype.update=function(v){var w=0,x=v.length,R;if(this._leftover){R=16-this._leftover,R>x&&(R=x);for(var j=0;j<R;j++)this._buffer[this._leftover+j]=v[w+j];if(x-=R,w+=R,this._leftover+=R,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(x>=16&&(R=x-x%16,this._blocks(v,w,R),w+=R,x-=R),x){for(var j=0;j<x;j++)this._buffer[this._leftover+j]=v[w+j];this._leftover+=x}return this},m.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var v=new Uint8Array(16);return this.finish(v),v},m.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},m}();n.Poly1305=s;function a(m,v){var w=new s(m);w.update(v);var x=w.digest();return w.clean(),x}n.oneTimeAuth=a;function f(m,v){return m.length!==n.DIGEST_LENGTH||v.length!==n.DIGEST_LENGTH?!1:t.equal(m,v)}n.equal=f})(Hd);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=Qo,r=Hd,s=Ir,a=je,f=Ci;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var m=new Uint8Array(16),v=function(){function w(x){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,x.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(x)}return w.prototype.seal=function(x,R,j,z){if(x.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var $=new Uint8Array(16);$.set(x,$.length-x.length);var V=new Uint8Array(32);t.stream(this._key,$,V,4);var Z=R.length+this.tagLength,ee;if(z){if(z.length!==Z)throw new Error("ChaCha20Poly1305: incorrect destination length");ee=z}else ee=new Uint8Array(Z);return t.streamXOR(this._key,$,R,ee,4),this._authenticate(ee.subarray(ee.length-this.tagLength,ee.length),V,ee.subarray(0,ee.length-this.tagLength),j),s.wipe($),ee},w.prototype.open=function(x,R,j,z){if(x.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(R.length<this.tagLength)return null;var $=new Uint8Array(16);$.set(x,$.length-x.length);var V=new Uint8Array(32);t.stream(this._key,$,V,4);var Z=new Uint8Array(this.tagLength);if(this._authenticate(Z,V,R.subarray(0,R.length-this.tagLength),j),!f.equal(Z,R.subarray(R.length-this.tagLength,R.length)))return null;var ee=R.length-this.tagLength,ue;if(z){if(z.length!==ee)throw new Error("ChaCha20Poly1305: incorrect destination length");ue=z}else ue=new Uint8Array(ee);return t.streamXOR(this._key,$,R.subarray(0,R.length-this.tagLength),ue,4),s.wipe($),ue},w.prototype.clean=function(){return s.wipe(this._key),this},w.prototype._authenticate=function(x,R,j,z){var $=new r.Poly1305(R);z&&($.update(z),z.length%16>0&&$.update(m.subarray(z.length%16))),$.update(j),j.length%16>0&&$.update(m.subarray(j.length%16));var V=new Uint8Array(8);z&&a.writeUint64LE(z.length,V),$.update(V),a.writeUint64LE(j.length,V),$.update(V);for(var Z=$.digest(),ee=0;ee<Z.length;ee++)x[ee]=Z[ee];$.clean(),s.wipe(Z),s.wipe(V)},w}();n.ChaCha20Poly1305=v})(bu);var Bd={},Is={},mu={};Object.defineProperty(mu,"__esModule",{value:!0});function Xm(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}mu.isSerializableHash=Xm;Object.defineProperty(Is,"__esModule",{value:!0});var Qr=mu,Zm=Ci,ew=Ir,Kd=function(){function n(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(s).clean():s.set(r);for(var a=0;a<s.length;a++)s[a]^=54;this._inner.update(s);for(var a=0;a<s.length;a++)s[a]^=106;this._outer.update(s),Qr.isSerializableHash(this._inner)&&Qr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),ew.wipe(s)}return n.prototype.reset=function(){if(!Qr.isSerializableHash(this._inner)||!Qr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){Qr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Qr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(t){return this._inner.update(t),this},n.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},n.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},n.prototype.saveState=function(){if(!Qr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(t){if(!Qr.isSerializableHash(this._inner)||!Qr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(t){if(!Qr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},n}();Is.HMAC=Kd;function tw(n,t,r){var s=new Kd(n,t);s.update(r);var a=s.digest();return s.clean(),a}Is.hmac=tw;Is.equal=Zm.equal;Object.defineProperty(Bd,"__esModule",{value:!0});var pf=Is,gf=Ir,rw=function(){function n(t,r,s,a){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=a;var f=pf.hmac(this._hash,s,r);this._hmac=new pf.HMAC(t,f),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(t){for(var r=new Uint8Array(t),s=0;s<r.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[s]=this._buffer[this._bufpos++];return r},n.prototype.clean=function(){this._hmac.clean(),gf.wipe(this._buffer),gf.wipe(this._counter),this._bufpos=0},n}(),iw=Bd.HKDF=rw,Xo={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=je,r=Ir;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var s=function(){function v(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return v.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},v.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},v.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},v.prototype.update=function(w,x){if(x===void 0&&(x=w.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var R=0;if(this._bytesHashed+=x,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&x>0;)this._buffer[this._bufferLength++]=w[R++],x--;this._bufferLength===this.blockSize&&(f(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(x>=this.blockSize&&(R=f(this._temp,this._state,w,R,x),x%=this.blockSize);x>0;)this._buffer[this._bufferLength++]=w[R++],x--;return this},v.prototype.finish=function(w){if(!this._finished){var x=this._bytesHashed,R=this._bufferLength,j=x/536870912|0,z=x<<3,$=x%64<56?64:128;this._buffer[R]=128;for(var V=R+1;V<$-8;V++)this._buffer[V]=0;t.writeUint32BE(j,this._buffer,$-8),t.writeUint32BE(z,this._buffer,$-4),f(this._temp,this._state,this._buffer,0,$),this._finished=!0}for(var V=0;V<this.digestLength/4;V++)t.writeUint32BE(this._state[V],w,V*4);return this},v.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},v.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},v.prototype.restoreState=function(w){return this._state.set(w.state),this._bufferLength=w.bufferLength,w.buffer&&this._buffer.set(w.buffer),this._bytesHashed=w.bytesHashed,this._finished=!1,this},v.prototype.cleanSavedState=function(w){r.wipe(w.state),w.buffer&&r.wipe(w.buffer),w.bufferLength=0,w.bytesHashed=0},v}();n.SHA256=s;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function f(v,w,x,R,j){for(;j>=64;){for(var z=w[0],$=w[1],V=w[2],Z=w[3],ee=w[4],ue=w[5],M=w[6],B=w[7],N=0;N<16;N++){var U=R+N*4;v[N]=t.readUint32BE(x,U)}for(var N=16;N<64;N++){var O=v[N-2],u=(O>>>17|O<<32-17)^(O>>>19|O<<32-19)^O>>>10;O=v[N-15];var _=(O>>>7|O<<32-7)^(O>>>18|O<<32-18)^O>>>3;v[N]=(u+v[N-7]|0)+(_+v[N-16]|0)}for(var N=0;N<64;N++){var u=(((ee>>>6|ee<<26)^(ee>>>11|ee<<21)^(ee>>>25|ee<<7))+(ee&ue^~ee&M)|0)+(B+(a[N]+v[N]|0)|0)|0,_=((z>>>2|z<<32-2)^(z>>>13|z<<32-13)^(z>>>22|z<<32-22))+(z&$^z&V^$&V)|0;B=M,M=ue,ue=ee,ee=Z+u|0,Z=V,V=$,$=z,z=u+_|0}w[0]+=z,w[1]+=$,w[2]+=V,w[3]+=Z,w[4]+=ee,w[5]+=ue,w[6]+=M,w[7]+=B,R+=64,j-=64}return R}function m(v){var w=new s;w.update(v);var x=w.digest();return w.clean(),x}n.hash=m})(Xo);var wu={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const t=Un,r=Ir;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function s(N){const U=new Float64Array(16);if(N)for(let O=0;O<N.length;O++)U[O]=N[O];return U}const a=new Uint8Array(32);a[0]=9;const f=s([56129,1]);function m(N){let U=1;for(let O=0;O<16;O++){let u=N[O]+U+65535;U=Math.floor(u/65536),N[O]=u-U*65536}N[0]+=U-1+37*(U-1)}function v(N,U,O){const u=~(O-1);for(let _=0;_<16;_++){const Q=u&(N[_]^U[_]);N[_]^=Q,U[_]^=Q}}function w(N,U){const O=s(),u=s();for(let _=0;_<16;_++)u[_]=U[_];m(u),m(u),m(u);for(let _=0;_<2;_++){O[0]=u[0]-65517;for(let c=1;c<15;c++)O[c]=u[c]-65535-(O[c-1]>>16&1),O[c-1]&=65535;O[15]=u[15]-32767-(O[14]>>16&1);const Q=O[15]>>16&1;O[14]&=65535,v(u,O,1-Q)}for(let _=0;_<16;_++)N[2*_]=u[_]&255,N[2*_+1]=u[_]>>8}function x(N,U){for(let O=0;O<16;O++)N[O]=U[2*O]+(U[2*O+1]<<8);N[15]&=32767}function R(N,U,O){for(let u=0;u<16;u++)N[u]=U[u]+O[u]}function j(N,U,O){for(let u=0;u<16;u++)N[u]=U[u]-O[u]}function z(N,U,O){let u,_,Q=0,c=0,d=0,p=0,E=0,y=0,g=0,A=0,F=0,W=0,P=0,q=0,te=0,re=0,ie=0,ge=0,le=0,me=0,J=0,Y=0,H=0,l=0,L=0,he=0,pe=0,Oe=0,ze=0,Ve=0,De=0,pt=0,gt=0,Me=O[0],Pe=O[1],Ue=O[2],Le=O[3],qe=O[4],Te=O[5],Fe=O[6],Ie=O[7],Ae=O[8],Be=O[9],xe=O[10],ke=O[11],We=O[12],et=O[13],tt=O[14],Je=O[15];u=U[0],Q+=u*Me,c+=u*Pe,d+=u*Ue,p+=u*Le,E+=u*qe,y+=u*Te,g+=u*Fe,A+=u*Ie,F+=u*Ae,W+=u*Be,P+=u*xe,q+=u*ke,te+=u*We,re+=u*et,ie+=u*tt,ge+=u*Je,u=U[1],c+=u*Me,d+=u*Pe,p+=u*Ue,E+=u*Le,y+=u*qe,g+=u*Te,A+=u*Fe,F+=u*Ie,W+=u*Ae,P+=u*Be,q+=u*xe,te+=u*ke,re+=u*We,ie+=u*et,ge+=u*tt,le+=u*Je,u=U[2],d+=u*Me,p+=u*Pe,E+=u*Ue,y+=u*Le,g+=u*qe,A+=u*Te,F+=u*Fe,W+=u*Ie,P+=u*Ae,q+=u*Be,te+=u*xe,re+=u*ke,ie+=u*We,ge+=u*et,le+=u*tt,me+=u*Je,u=U[3],p+=u*Me,E+=u*Pe,y+=u*Ue,g+=u*Le,A+=u*qe,F+=u*Te,W+=u*Fe,P+=u*Ie,q+=u*Ae,te+=u*Be,re+=u*xe,ie+=u*ke,ge+=u*We,le+=u*et,me+=u*tt,J+=u*Je,u=U[4],E+=u*Me,y+=u*Pe,g+=u*Ue,A+=u*Le,F+=u*qe,W+=u*Te,P+=u*Fe,q+=u*Ie,te+=u*Ae,re+=u*Be,ie+=u*xe,ge+=u*ke,le+=u*We,me+=u*et,J+=u*tt,Y+=u*Je,u=U[5],y+=u*Me,g+=u*Pe,A+=u*Ue,F+=u*Le,W+=u*qe,P+=u*Te,q+=u*Fe,te+=u*Ie,re+=u*Ae,ie+=u*Be,ge+=u*xe,le+=u*ke,me+=u*We,J+=u*et,Y+=u*tt,H+=u*Je,u=U[6],g+=u*Me,A+=u*Pe,F+=u*Ue,W+=u*Le,P+=u*qe,q+=u*Te,te+=u*Fe,re+=u*Ie,ie+=u*Ae,ge+=u*Be,le+=u*xe,me+=u*ke,J+=u*We,Y+=u*et,H+=u*tt,l+=u*Je,u=U[7],A+=u*Me,F+=u*Pe,W+=u*Ue,P+=u*Le,q+=u*qe,te+=u*Te,re+=u*Fe,ie+=u*Ie,ge+=u*Ae,le+=u*Be,me+=u*xe,J+=u*ke,Y+=u*We,H+=u*et,l+=u*tt,L+=u*Je,u=U[8],F+=u*Me,W+=u*Pe,P+=u*Ue,q+=u*Le,te+=u*qe,re+=u*Te,ie+=u*Fe,ge+=u*Ie,le+=u*Ae,me+=u*Be,J+=u*xe,Y+=u*ke,H+=u*We,l+=u*et,L+=u*tt,he+=u*Je,u=U[9],W+=u*Me,P+=u*Pe,q+=u*Ue,te+=u*Le,re+=u*qe,ie+=u*Te,ge+=u*Fe,le+=u*Ie,me+=u*Ae,J+=u*Be,Y+=u*xe,H+=u*ke,l+=u*We,L+=u*et,he+=u*tt,pe+=u*Je,u=U[10],P+=u*Me,q+=u*Pe,te+=u*Ue,re+=u*Le,ie+=u*qe,ge+=u*Te,le+=u*Fe,me+=u*Ie,J+=u*Ae,Y+=u*Be,H+=u*xe,l+=u*ke,L+=u*We,he+=u*et,pe+=u*tt,Oe+=u*Je,u=U[11],q+=u*Me,te+=u*Pe,re+=u*Ue,ie+=u*Le,ge+=u*qe,le+=u*Te,me+=u*Fe,J+=u*Ie,Y+=u*Ae,H+=u*Be,l+=u*xe,L+=u*ke,he+=u*We,pe+=u*et,Oe+=u*tt,ze+=u*Je,u=U[12],te+=u*Me,re+=u*Pe,ie+=u*Ue,ge+=u*Le,le+=u*qe,me+=u*Te,J+=u*Fe,Y+=u*Ie,H+=u*Ae,l+=u*Be,L+=u*xe,he+=u*ke,pe+=u*We,Oe+=u*et,ze+=u*tt,Ve+=u*Je,u=U[13],re+=u*Me,ie+=u*Pe,ge+=u*Ue,le+=u*Le,me+=u*qe,J+=u*Te,Y+=u*Fe,H+=u*Ie,l+=u*Ae,L+=u*Be,he+=u*xe,pe+=u*ke,Oe+=u*We,ze+=u*et,Ve+=u*tt,De+=u*Je,u=U[14],ie+=u*Me,ge+=u*Pe,le+=u*Ue,me+=u*Le,J+=u*qe,Y+=u*Te,H+=u*Fe,l+=u*Ie,L+=u*Ae,he+=u*Be,pe+=u*xe,Oe+=u*ke,ze+=u*We,Ve+=u*et,De+=u*tt,pt+=u*Je,u=U[15],ge+=u*Me,le+=u*Pe,me+=u*Ue,J+=u*Le,Y+=u*qe,H+=u*Te,l+=u*Fe,L+=u*Ie,he+=u*Ae,pe+=u*Be,Oe+=u*xe,ze+=u*ke,Ve+=u*We,De+=u*et,pt+=u*tt,gt+=u*Je,Q+=38*le,c+=38*me,d+=38*J,p+=38*Y,E+=38*H,y+=38*l,g+=38*L,A+=38*he,F+=38*pe,W+=38*Oe,P+=38*ze,q+=38*Ve,te+=38*De,re+=38*pt,ie+=38*gt,_=1,u=Q+_+65535,_=Math.floor(u/65536),Q=u-_*65536,u=c+_+65535,_=Math.floor(u/65536),c=u-_*65536,u=d+_+65535,_=Math.floor(u/65536),d=u-_*65536,u=p+_+65535,_=Math.floor(u/65536),p=u-_*65536,u=E+_+65535,_=Math.floor(u/65536),E=u-_*65536,u=y+_+65535,_=Math.floor(u/65536),y=u-_*65536,u=g+_+65535,_=Math.floor(u/65536),g=u-_*65536,u=A+_+65535,_=Math.floor(u/65536),A=u-_*65536,u=F+_+65535,_=Math.floor(u/65536),F=u-_*65536,u=W+_+65535,_=Math.floor(u/65536),W=u-_*65536,u=P+_+65535,_=Math.floor(u/65536),P=u-_*65536,u=q+_+65535,_=Math.floor(u/65536),q=u-_*65536,u=te+_+65535,_=Math.floor(u/65536),te=u-_*65536,u=re+_+65535,_=Math.floor(u/65536),re=u-_*65536,u=ie+_+65535,_=Math.floor(u/65536),ie=u-_*65536,u=ge+_+65535,_=Math.floor(u/65536),ge=u-_*65536,Q+=_-1+37*(_-1),_=1,u=Q+_+65535,_=Math.floor(u/65536),Q=u-_*65536,u=c+_+65535,_=Math.floor(u/65536),c=u-_*65536,u=d+_+65535,_=Math.floor(u/65536),d=u-_*65536,u=p+_+65535,_=Math.floor(u/65536),p=u-_*65536,u=E+_+65535,_=Math.floor(u/65536),E=u-_*65536,u=y+_+65535,_=Math.floor(u/65536),y=u-_*65536,u=g+_+65535,_=Math.floor(u/65536),g=u-_*65536,u=A+_+65535,_=Math.floor(u/65536),A=u-_*65536,u=F+_+65535,_=Math.floor(u/65536),F=u-_*65536,u=W+_+65535,_=Math.floor(u/65536),W=u-_*65536,u=P+_+65535,_=Math.floor(u/65536),P=u-_*65536,u=q+_+65535,_=Math.floor(u/65536),q=u-_*65536,u=te+_+65535,_=Math.floor(u/65536),te=u-_*65536,u=re+_+65535,_=Math.floor(u/65536),re=u-_*65536,u=ie+_+65535,_=Math.floor(u/65536),ie=u-_*65536,u=ge+_+65535,_=Math.floor(u/65536),ge=u-_*65536,Q+=_-1+37*(_-1),N[0]=Q,N[1]=c,N[2]=d,N[3]=p,N[4]=E,N[5]=y,N[6]=g,N[7]=A,N[8]=F,N[9]=W,N[10]=P,N[11]=q,N[12]=te,N[13]=re,N[14]=ie,N[15]=ge}function $(N,U){z(N,U,U)}function V(N,U){const O=s();for(let u=0;u<16;u++)O[u]=U[u];for(let u=253;u>=0;u--)$(O,O),u!==2&&u!==4&&z(O,O,U);for(let u=0;u<16;u++)N[u]=O[u]}function Z(N,U){const O=new Uint8Array(32),u=new Float64Array(80),_=s(),Q=s(),c=s(),d=s(),p=s(),E=s();for(let F=0;F<31;F++)O[F]=N[F];O[31]=N[31]&127|64,O[0]&=248,x(u,U);for(let F=0;F<16;F++)Q[F]=u[F];_[0]=d[0]=1;for(let F=254;F>=0;--F){const W=O[F>>>3]>>>(F&7)&1;v(_,Q,W),v(c,d,W),R(p,_,c),j(_,_,c),R(c,Q,d),j(Q,Q,d),$(d,p),$(E,_),z(_,c,_),z(c,Q,p),R(p,_,c),j(_,_,c),$(Q,_),j(c,d,E),z(_,c,f),R(_,_,d),z(c,c,_),z(_,d,E),z(d,Q,u),$(Q,p),v(_,Q,W),v(c,d,W)}for(let F=0;F<16;F++)u[F+16]=_[F],u[F+32]=c[F],u[F+48]=Q[F],u[F+64]=d[F];const y=u.subarray(32),g=u.subarray(16);V(y,y),z(g,g,y);const A=new Uint8Array(32);return w(A,g),A}n.scalarMult=Z;function ee(N){return Z(N,a)}n.scalarMultBase=ee;function ue(N){if(N.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const U=new Uint8Array(N);return{publicKey:ee(U),secretKey:U}}n.generateKeyPairFromSeed=ue;function M(N){const U=(0,t.randomBytes)(32,N),O=ue(U);return(0,r.wipe)(U),O}n.generateKeyPair=M;function B(N,U,O=!1){if(N.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(U.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=Z(N,U);if(O){let _=0;for(let Q=0;Q<u.length;Q++)_|=u[Q];if(_===0)throw new Error("X25519: invalid shared key")}return u}n.sharedKey=B})(wu);function Eu(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function Vd(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Eu(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function yf(n,t){t||(t=n.reduce((a,f)=>a+f.length,0));const r=Vd(t);let s=0;for(const a of n)r.set(a,s),s+=a.length;return Eu(r)}function kd(n,t,r,s){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:s}}}const _f=kd("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),$c=kd("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);const t=Vd(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),Gd={utf8:_f,"utf-8":_f,hex:Cn.base16,latin1:$c,ascii:$c,binary:$c,...Cn};function Br(n,t="utf8"){const r=Gd[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Eu(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}function Kr(n,t="utf8"){const r=Gd[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=Yd=lt.getLocation=lt.getLocationOrThrow=Su=lt.getNavigator=lt.getNavigatorOrThrow=Wd=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function en(n){let t;return typeof window<"u"&&typeof window[n]<"u"&&(t=window[n]),t}lt.getFromWindow=en;function Ln(n){const t=en(n);if(!t)throw new Error(`${n} is not defined in Window`);return t}lt.getFromWindowOrThrow=Ln;function nw(){return Ln("document")}lt.getDocumentOrThrow=nw;function sw(){return en("document")}var Wd=lt.getDocument=sw;function ow(){return Ln("navigator")}lt.getNavigatorOrThrow=ow;function aw(){return en("navigator")}var Su=lt.getNavigator=aw;function cw(){return Ln("location")}lt.getLocationOrThrow=cw;function uw(){return en("location")}var Yd=lt.getLocation=uw;function hw(){return Ln("crypto")}lt.getCryptoOrThrow=hw;function lw(){return en("crypto")}lt.getCrypto=lw;function fw(){return Ln("localStorage")}lt.getLocalStorageOrThrow=fw;function dw(){return en("localStorage")}lt.getLocalStorage=dw;var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});var Jd=Iu.getWindowMetadata=void 0;const vf=lt;function pw(){let n,t;try{n=vf.getDocumentOrThrow(),t=vf.getLocationOrThrow()}catch{return null}function r(){const j=n.getElementsByTagName("link"),z=[];for(let $=0;$<j.length;$++){const V=j[$],Z=V.getAttribute("rel");if(Z&&Z.toLowerCase().indexOf("icon")>-1){const ee=V.getAttribute("href");if(ee)if(ee.toLowerCase().indexOf("https:")===-1&&ee.toLowerCase().indexOf("http:")===-1&&ee.indexOf("//")!==0){let ue=t.protocol+"//"+t.host;if(ee.indexOf("/")===0)ue+=ee;else{const M=t.pathname.split("/");M.pop();const B=M.join("/");ue+=B+"/"+ee}z.push(ue)}else if(ee.indexOf("//")===0){const ue=t.protocol+ee;z.push(ue)}else z.push(ee)}}return z}function s(...j){const z=n.getElementsByTagName("meta");for(let $=0;$<z.length;$++){const V=z[$],Z=["itemprop","property","name"].map(ee=>V.getAttribute(ee)).filter(ee=>ee?j.includes(ee):!1);if(Z.length&&Z){const ee=V.getAttribute("content");if(ee)return ee}}return""}function a(){let j=s("name","og:site_name","og:title","twitter:title");return j||(j=n.title),j}function f(){return s("description","og:description","twitter:description","keywords")}const m=a(),v=f(),w=t.origin,x=r();return{description:v,url:w,icons:x,name:m}}Jd=Iu.getWindowMetadata=pw;var bs={},gw=n=>encodeURIComponent(n).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Qd="%[a-f0-9]{2}",bf=new RegExp("("+Qd+")|([^%]+?)","gi"),mf=new RegExp("("+Qd+")+","gi");function ru(n,t){try{return[decodeURIComponent(n.join(""))]}catch{}if(n.length===1)return n;t=t||1;var r=n.slice(0,t),s=n.slice(t);return Array.prototype.concat.call([],ru(r),ru(s))}function yw(n){try{return decodeURIComponent(n)}catch{for(var t=n.match(bf)||[],r=1;r<t.length;r++)n=ru(t,r).join(""),t=n.match(bf)||[];return n}}function _w(n){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=mf.exec(n);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var s=yw(r[0]);s!==r[0]&&(t[r[0]]=s)}r=mf.exec(n)}t["%C2"]="\uFFFD";for(var a=Object.keys(t),f=0;f<a.length;f++){var m=a[f];n=n.replace(new RegExp(m,"g"),t[m])}return n}var vw=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return _w(n)}},bw=(n,t)=>{if(!(typeof n=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[n];const r=n.indexOf(t);return r===-1?[n]:[n.slice(0,r),n.slice(r+t.length)]},mw=function(n,t){for(var r={},s=Object.keys(n),a=Array.isArray(t),f=0;f<s.length;f++){var m=s[f],v=n[m];(a?t.indexOf(m)!==-1:t(m,v,n))&&(r[m]=v)}return r};(function(n){const t=gw,r=vw,s=bw,a=mw,f=M=>M==null,m=Symbol("encodeFragmentIdentifier");function v(M){switch(M.arrayFormat){case"index":return B=>(N,U)=>{const O=N.length;return U===void 0||M.skipNull&&U===null||M.skipEmptyString&&U===""?N:U===null?[...N,[R(B,M),"[",O,"]"].join("")]:[...N,[R(B,M),"[",R(O,M),"]=",R(U,M)].join("")]};case"bracket":return B=>(N,U)=>U===void 0||M.skipNull&&U===null||M.skipEmptyString&&U===""?N:U===null?[...N,[R(B,M),"[]"].join("")]:[...N,[R(B,M),"[]=",R(U,M)].join("")];case"colon-list-separator":return B=>(N,U)=>U===void 0||M.skipNull&&U===null||M.skipEmptyString&&U===""?N:U===null?[...N,[R(B,M),":list="].join("")]:[...N,[R(B,M),":list=",R(U,M)].join("")];case"comma":case"separator":case"bracket-separator":{const B=M.arrayFormat==="bracket-separator"?"[]=":"=";return N=>(U,O)=>O===void 0||M.skipNull&&O===null||M.skipEmptyString&&O===""?U:(O=O===null?"":O,U.length===0?[[R(N,M),B,R(O,M)].join("")]:[[U,R(O,M)].join(M.arrayFormatSeparator)])}default:return B=>(N,U)=>U===void 0||M.skipNull&&U===null||M.skipEmptyString&&U===""?N:U===null?[...N,R(B,M)]:[...N,[R(B,M),"=",R(U,M)].join("")]}}function w(M){let B;switch(M.arrayFormat){case"index":return(N,U,O)=>{if(B=/\[(\d*)\]$/.exec(N),N=N.replace(/\[\d*\]$/,""),!B){O[N]=U;return}O[N]===void 0&&(O[N]={}),O[N][B[1]]=U};case"bracket":return(N,U,O)=>{if(B=/(\[\])$/.exec(N),N=N.replace(/\[\]$/,""),!B){O[N]=U;return}if(O[N]===void 0){O[N]=[U];return}O[N]=[].concat(O[N],U)};case"colon-list-separator":return(N,U,O)=>{if(B=/(:list)$/.exec(N),N=N.replace(/:list$/,""),!B){O[N]=U;return}if(O[N]===void 0){O[N]=[U];return}O[N]=[].concat(O[N],U)};case"comma":case"separator":return(N,U,O)=>{const u=typeof U=="string"&&U.includes(M.arrayFormatSeparator),_=typeof U=="string"&&!u&&j(U,M).includes(M.arrayFormatSeparator);U=_?j(U,M):U;const Q=u||_?U.split(M.arrayFormatSeparator).map(c=>j(c,M)):U===null?U:j(U,M);O[N]=Q};case"bracket-separator":return(N,U,O)=>{const u=/(\[\])$/.test(N);if(N=N.replace(/\[\]$/,""),!u){O[N]=U&&j(U,M);return}const _=U===null?[]:U.split(M.arrayFormatSeparator).map(Q=>j(Q,M));if(O[N]===void 0){O[N]=_;return}O[N]=[].concat(O[N],_)};default:return(N,U,O)=>{if(O[N]===void 0){O[N]=U;return}O[N]=[].concat(O[N],U)}}}function x(M){if(typeof M!="string"||M.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function R(M,B){return B.encode?B.strict?t(M):encodeURIComponent(M):M}function j(M,B){return B.decode?r(M):M}function z(M){return Array.isArray(M)?M.sort():typeof M=="object"?z(Object.keys(M)).sort((B,N)=>Number(B)-Number(N)).map(B=>M[B]):M}function $(M){const B=M.indexOf("#");return B!==-1&&(M=M.slice(0,B)),M}function V(M){let B="";const N=M.indexOf("#");return N!==-1&&(B=M.slice(N)),B}function Z(M){M=$(M);const B=M.indexOf("?");return B===-1?"":M.slice(B+1)}function ee(M,B){return B.parseNumbers&&!Number.isNaN(Number(M))&&typeof M=="string"&&M.trim()!==""?M=Number(M):B.parseBooleans&&M!==null&&(M.toLowerCase()==="true"||M.toLowerCase()==="false")&&(M=M.toLowerCase()==="true"),M}function ue(M,B){B=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},B),x(B.arrayFormatSeparator);const N=w(B),U=Object.create(null);if(typeof M!="string"||(M=M.trim().replace(/^[?#&]/,""),!M))return U;for(const O of M.split("&")){if(O==="")continue;let[u,_]=s(B.decode?O.replace(/\+/g," "):O,"=");_=_===void 0?null:["comma","separator","bracket-separator"].includes(B.arrayFormat)?_:j(_,B),N(j(u,B),_,U)}for(const O of Object.keys(U)){const u=U[O];if(typeof u=="object"&&u!==null)for(const _ of Object.keys(u))u[_]=ee(u[_],B);else U[O]=ee(u,B)}return B.sort===!1?U:(B.sort===!0?Object.keys(U).sort():Object.keys(U).sort(B.sort)).reduce((O,u)=>{const _=U[u];return Boolean(_)&&typeof _=="object"&&!Array.isArray(_)?O[u]=z(_):O[u]=_,O},Object.create(null))}n.extract=Z,n.parse=ue,n.stringify=(M,B)=>{if(!M)return"";B=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},B),x(B.arrayFormatSeparator);const N=_=>B.skipNull&&f(M[_])||B.skipEmptyString&&M[_]==="",U=v(B),O={};for(const _ of Object.keys(M))N(_)||(O[_]=M[_]);const u=Object.keys(O);return B.sort!==!1&&u.sort(B.sort),u.map(_=>{const Q=M[_];return Q===void 0?"":Q===null?R(_,B):Array.isArray(Q)?Q.length===0&&B.arrayFormat==="bracket-separator"?R(_,B)+"[]":Q.reduce(U(_),[]).join("&"):R(_,B)+"="+R(Q,B)}).filter(_=>_.length>0).join("&")},n.parseUrl=(M,B)=>{B=Object.assign({decode:!0},B);const[N,U]=s(M,"#");return Object.assign({url:N.split("?")[0]||"",query:ue(Z(M),B)},B&&B.parseFragmentIdentifier&&U?{fragmentIdentifier:j(U,B)}:{})},n.stringifyUrl=(M,B)=>{B=Object.assign({encode:!0,strict:!0,[m]:!0},B);const N=$(M.url).split("?")[0]||"",U=n.extract(M.url),O=n.parse(U,{sort:!1}),u=Object.assign(O,M.query);let _=n.stringify(u,B);_&&(_=`?${_}`);let Q=V(M.url);return M.fragmentIdentifier&&(Q=`#${B[m]?R(M.fragmentIdentifier,B):M.fragmentIdentifier}`),`${N}${_}${Q}`},n.pick=(M,B,N)=>{N=Object.assign({parseFragmentIdentifier:!0,[m]:!1},N);const{url:U,query:O,fragmentIdentifier:u}=n.parseUrl(M,N);return n.stringifyUrl({url:U,query:a(O,B),fragmentIdentifier:u},N)},n.exclude=(M,B,N)=>{const U=Array.isArray(B)?O=>!B.includes(O):(O,u)=>!B(O,u);return n.pick(M,U,N)}})(bs);const ww={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},Ew=":";function Sw(n){const[t,r]=n.split(Ew);return{namespace:t,reference:r}}function Iw(n,t=[]){const r=[];return Object.keys(n).forEach(s=>{if(t.length&&!t.includes(s))return;const a=n[s];r.push(...a.accounts)}),r}function Xd(n,t){return n.includes(":")?[n]:t.chains||[]}const Zd="base10",ar="base16",iu="base64pad",Ou="utf8",ep=0,tn=1,Ow=0,wf=1,nu=12,Pu=32;function Pw(){const n=wu.generateKeyPair();return{privateKey:Kr(n.secretKey,ar),publicKey:Kr(n.publicKey,ar)}}function su(){const n=Un.randomBytes(Pu);return Kr(n,ar)}function xw(n,t){const r=wu.sharedKey(Br(n,ar),Br(t,ar),!0),s=new iw(Xo.SHA256,r).expand(Pu);return Kr(s,ar)}function Tw(n){const t=Xo.hash(Br(n,ar));return Kr(t,ar)}function Tn(n){const t=Xo.hash(Br(n,Ou));return Kr(t,ar)}function Aw(n){return Br(`${n}`,Zd)}function Os(n){return Number(Kr(n,Zd))}function Rw(n){const t=Aw(typeof n.type<"u"?n.type:ep);if(Os(t)===tn&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof n.senderPublicKey<"u"?Br(n.senderPublicKey,ar):void 0,s=typeof n.iv<"u"?Br(n.iv,ar):Un.randomBytes(nu),a=new bu.ChaCha20Poly1305(Br(n.symKey,ar)).seal(s,Br(n.message,Ou));return Nw({type:t,sealed:a,iv:s,senderPublicKey:r})}function Cw(n){const t=new bu.ChaCha20Poly1305(Br(n.symKey,ar)),{sealed:r,iv:s}=Ko(n.encoded),a=t.open(s,r);if(a===null)throw new Error("Failed to decrypt");return Kr(a,Ou)}function Nw(n){if(Os(n.type)===tn){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Kr(yf([n.type,n.senderPublicKey,n.iv,n.sealed]),iu)}return Kr(yf([n.type,n.iv,n.sealed]),iu)}function Ko(n){const t=Br(n,iu),r=t.slice(Ow,wf),s=wf;if(Os(r)===tn){const v=s+Pu,w=v+nu,x=t.slice(s,v),R=t.slice(v,w),j=t.slice(w);return{type:r,sealed:j,iv:R,senderPublicKey:x}}const a=s+nu,f=t.slice(s,a),m=t.slice(a);return{type:r,sealed:m,iv:f}}function Uw(n,t){const r=Ko(n);return tp({type:Os(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Kr(r.senderPublicKey,ar):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function tp(n){const t=(n==null?void 0:n.type)||ep;if(t===tn){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function Ef(n){return n.type===tn&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var Lw=Object.defineProperty,Sf=Object.getOwnPropertySymbols,Fw=Object.prototype.hasOwnProperty,jw=Object.prototype.propertyIsEnumerable,If=(n,t,r)=>t in n?Lw(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Of=(n,t)=>{for(var r in t||(t={}))Fw.call(t,r)&&If(n,r,t[r]);if(Sf)for(var r of Sf(t))jw.call(t,r)&&If(n,r,t[r]);return n};const Dw="ReactNative",Sr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},$w="js";function xu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Zo(){return!Wd()&&!!Su()&&navigator.product===Dw}function Ps(){return!xu()&&!!Su()}function xs(){return Zo()?Sr.reactNative:xu()?Sr.node:Ps()?Sr.browser:Sr.unknown}function Mw(n,t){let r=bs.parse(n);return r=Of(Of({},r),t),n=bs.stringify(r),n}function qw(){return Jd()||{name:"",description:"",url:"",icons:[""]}}function Hw(){if(xs()===Sr.reactNative&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Platform)<"u"){const{OS:r,Version:s}=globalThis.Platform;return[r,s].join("-")}const n=yb();if(n===null)return"unknown";const t=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[t,n.name,n.version].join("-"):[t,n.version].join("-")}function zw(){var n;const t=xs();return t===Sr.browser?[t,((n=Yd())==null?void 0:n.host)||"unknown"].join(":"):t}function Bw(n,t,r){const s=Hw(),a=zw();return[[n,t].join("-"),[$w,r].join("-"),s,a].join("/")}function Kw({protocol:n,version:t,relayUrl:r,sdkVersion:s,auth:a,projectId:f,useOnCloseEvent:m}){const v=r.split("?"),w=Bw(n,t,s),x={auth:a,ua:w,projectId:f,useOnCloseEvent:m||void 0},R=Mw(v[1]||"",x);return v[0]+"?"+R}function Xi(n,t){return n.filter(r=>t.includes(r)).length===n.length}function rp(n){return Object.fromEntries(n.entries())}function ip(n){return new Map(Object.entries(n))}function xn(n=be.FIVE_MINUTES,t){const r=be.toMiliseconds(n||be.FIVE_MINUTES);let s,a,f;return{resolve:m=>{f&&s&&(clearTimeout(f),s(m))},reject:m=>{f&&a&&(clearTimeout(f),a(m))},done:()=>new Promise((m,v)=>{f=setTimeout(()=>{v(new Error(t))},r),s=m,a=v})}}function ms(n,t,r){return new Promise(async(s,a)=>{const f=setTimeout(()=>a(new Error(r)),t);try{const m=await n;s(m)}catch(m){a(m)}clearTimeout(f)})}function np(n,t){if(typeof t=="string"&&t.startsWith(`${n}:`))return t;if(n.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(n.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${n}`)}function Vw(n){return np("topic",n)}function kw(n){return np("id",n)}function sp(n){const[t,r]=n.split(":"),s={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")s.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return s}function Hr(n,t){return be.fromMiliseconds((t||Date.now())+be.toMiliseconds(n))}function Ai(n){return Date.now()>=be.toMiliseconds(n)}function Ht(n,t){return`${n}${t?`:${t}`:""}`}function Mc(n=[],t=[]){return[...new Set([...n,...t])]}async function Gw({id:n,topic:t,wcDeepLink:r}){try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r;let a=s==null?void 0:s.href;if(typeof a!="string")return;a.endsWith("/")&&(a=a.slice(0,-1));const f=`${a}/wc?requestId=${n}&sessionTopic=${t}`,m=xs();m===Sr.browser?f.startsWith("https://")?window.open(f,"_blank","noreferrer noopener"):window.open(f,"_self","noreferrer noopener"):m===Sr.reactNative&&typeof(globalThis==null?void 0:globalThis.Linking)<"u"&&await globalThis.Linking.openURL(f)}catch(s){console.error(s)}}const Ww="irn";function ou(n){return(n==null?void 0:n.relay)||{protocol:Ww}}function $o(n){const t=ww[n];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${n}`);return t}var Yw=Object.defineProperty,Pf=Object.getOwnPropertySymbols,Jw=Object.prototype.hasOwnProperty,Qw=Object.prototype.propertyIsEnumerable,xf=(n,t,r)=>t in n?Yw(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Xw=(n,t)=>{for(var r in t||(t={}))Jw.call(t,r)&&xf(n,r,t[r]);if(Pf)for(var r of Pf(t))Qw.call(t,r)&&xf(n,r,t[r]);return n};function Zw(n,t="-"){const r={},s="relay"+t;return Object.keys(n).forEach(a=>{if(a.startsWith(s)){const f=a.replace(s,""),m=n[a];r[f]=m}}),r}function eE(n){const t=n.indexOf(":"),r=n.indexOf("?")!==-1?n.indexOf("?"):void 0,s=n.substring(0,t),a=n.substring(t+1,r).split("@"),f=typeof r<"u"?n.substring(r):"",m=bs.parse(f);return{protocol:s,topic:tE(a[0]),version:parseInt(a[1],10),symKey:m.symKey,relay:Zw(m)}}function tE(n){return n.startsWith("//")?n.substring(2):n}function rE(n,t="-"){const r="relay",s={};return Object.keys(n).forEach(a=>{const f=r+t+a;n[a]&&(s[f]=n[a])}),s}function iE(n){return`${n.protocol}:${n.topic}@${n.version}?`+bs.stringify(Xw({symKey:n.symKey},rE(n.relay)))}function Fn(n){const t=[];return n.forEach(r=>{const[s,a]=r.split(":");t.push(`${s}:${a}`)}),t}function nE(n){const t=[];return Object.values(n).forEach(r=>{t.push(...Fn(r.accounts))}),t}function sE(n,t){const r=[];return Object.values(n).forEach(s=>{Fn(s.accounts).includes(t)&&r.push(...s.methods)}),r}function oE(n,t){const r=[];return Object.values(n).forEach(s=>{Fn(s.accounts).includes(t)&&r.push(...s.events)}),r}function aE(n,t){const r=Mo(n,t);if(r)throw new Error(r.message);const s={};for(const[a,f]of Object.entries(n))s[a]={methods:f.methods,events:f.events,chains:f.accounts.map(m=>`${m.split(":")[0]}:${m.split(":")[1]}`)};return s}function Tu(n){return n.includes(":")}function ps(n){return Tu(n)?n.split(":")[0]:n}const cE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},uE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function de(n,t){const{message:r,code:s}=uE[n];return{message:t?`${r} ${t}`:r,code:s}}function Nt(n,t){const{message:r,code:s}=cE[n];return{message:t?`${r} ${t}`:r,code:s}}function ei(n,t){return Array.isArray(n)?typeof t<"u"&&n.length?n.every(t):!0:!1}function An(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function or(n){return typeof n>"u"}function kt(n,t){return t&&or(n)?!0:typeof n=="string"&&!!n.trim().length}function Au(n,t){return t&&or(n)?!0:typeof n=="number"&&!isNaN(n)}function hE(n,t){const{requiredNamespaces:r}=t,s=Object.keys(n.namespaces),a=Object.keys(r);let f=!0;return Xi(a,s)?(s.forEach(m=>{const{accounts:v,methods:w,events:x}=n.namespaces[m],R=Fn(v),j=r[m];(!Xi(Xd(m,j),R)||!Xi(j.methods,w)||!Xi(j.events,x))&&(f=!1)}),f):!1}function Vo(n){return kt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function lE(n){if(kt(n,!1)&&n.includes(":")){const t=n.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&Vo(r)}}return!1}function fE(n){if(kt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function dE(n){var t;return(t=n==null?void 0:n.proposer)==null?void 0:t.publicKey}function pE(n){return n==null?void 0:n.topic}function gE(n,t){let r=null;return kt(n==null?void 0:n.publicKey,!1)||(r=de("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function Tf(n){let t=!0;return ei(n)?n.length&&(t=n.every(r=>kt(r,!1))):t=!1,t}function yE(n,t,r){let s=null;return ei(t)&&t.length?t.forEach(a=>{s||Vo(a)||(s=Nt("UNSUPPORTED_CHAINS",`${r}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):Vo(n)||(s=Nt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function _E(n,t,r){let s=null;return Object.entries(n).forEach(([a,f])=>{if(s)return;const m=yE(a,Xd(a,f),`${t} ${r}`);m&&(s=m)}),s}function vE(n,t){let r=null;return ei(n)?n.forEach(s=>{r||lE(s)||(r=Nt("UNSUPPORTED_ACCOUNTS",`${t}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=Nt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function bE(n,t){let r=null;return Object.values(n).forEach(s=>{if(r)return;const a=vE(s==null?void 0:s.accounts,`${t} namespace`);a&&(r=a)}),r}function mE(n,t){let r=null;return Tf(n==null?void 0:n.methods)?Tf(n==null?void 0:n.events)||(r=Nt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Nt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function op(n,t){let r=null;return Object.values(n).forEach(s=>{if(r)return;const a=mE(s,`${t}, namespace`);a&&(r=a)}),r}function wE(n,t,r){let s=null;if(n&&An(n)){const a=op(n,t);a&&(s=a);const f=_E(n,t,r);f&&(s=f)}else s=de("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return s}function Mo(n,t){let r=null;if(n&&An(n)){const s=op(n,t);s&&(r=s);const a=bE(n,t);a&&(r=a)}else r=de("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function ap(n){return kt(n.protocol,!0)}function EE(n,t){let r=!1;return t&&!n?r=!0:n&&ei(n)&&n.length&&n.forEach(s=>{r=ap(s)}),r}function SE(n){return typeof n=="number"}function yr(n){return typeof n<"u"&&typeof n!==null}function IE(n){return!(!n||typeof n!="object"||!n.code||!Au(n.code,!1)||!n.message||!kt(n.message,!1))}function OE(n){return!(or(n)||!kt(n.method,!1))}function PE(n){return!(or(n)||or(n.result)&&or(n.error)||!Au(n.id,!1)||!kt(n.jsonrpc,!1))}function xE(n){return!(or(n)||!kt(n.name,!1))}function Af(n,t){return!(!Vo(t)||!nE(n).includes(t))}function TE(n,t,r){return kt(r,!1)?sE(n,t).includes(r):!1}function AE(n,t,r){return kt(r,!1)?oE(n,t).includes(r):!1}function Rf(n,t,r){let s=null;const a=RE(n),f=CE(t),m=Object.keys(a),v=Object.keys(f),w=Cf(Object.keys(n)),x=Cf(Object.keys(t)),R=w.filter(j=>!x.includes(j));return R.length&&(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${R.toString()}
      Received: ${Object.keys(t).toString()}`)),Xi(m,v)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${m.toString()}
      Approved: ${v.toString()}`)),Object.keys(t).forEach(j=>{if(!j.includes(":")||s)return;const z=Fn(t[j].accounts);z.includes(j)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${j}
        Required: ${j}
        Approved: ${z.toString()}`))}),m.forEach(j=>{s||(Xi(a[j].methods,f[j].methods)?Xi(a[j].events,f[j].events)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${j}`)):s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${j}`))}),s}function RE(n){const t={};return Object.keys(n).forEach(r=>{var s;r.includes(":")?t[r]=n[r]:(s=n[r].chains)==null||s.forEach(a=>{t[a]={methods:n[r].methods,events:n[r].events}})}),t}function Cf(n){return[...new Set(n.map(t=>t.includes(":")?t.split(":")[0]:t))]}function CE(n){const t={};return Object.keys(n).forEach(r=>{if(r.includes(":"))t[r]=n[r];else{const s=Fn(n[r].accounts);s==null||s.forEach(a=>{t[a]={accounts:n[r].accounts.filter(f=>f.includes(`${a}:`)),methods:n[r].methods,events:n[r].events}})}}),t}function NE(n,t){return Au(n,!1)&&n<=t.max&&n>=t.min}function Nf(){const n=xs();return new Promise(t=>{switch(n){case Sr.browser:t(UE());break;case Sr.reactNative:t(LE());break;case Sr.node:t(FE());break;default:t(!0)}})}function UE(){return Ps()&&(navigator==null?void 0:navigator.onLine)}async function LE(){if(Zo()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo){const n=await(globalThis==null?void 0:globalThis.NetInfo.fetch());return n==null?void 0:n.isConnected}return!0}function FE(){return!0}function jE(n){switch(xs()){case Sr.browser:DE(n);break;case Sr.reactNative:$E(n);break}}function DE(n){Ps()&&(window.addEventListener("online",()=>n(!0)),window.addEventListener("offline",()=>n(!1)))}function $E(n){Zo()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo&&(globalThis==null||globalThis.NetInfo.addEventListener(t=>n(t==null?void 0:t.isConnected)))}const qc={};class Lo{static get(t){return qc[t]}static set(t,r){qc[t]=r}static delete(t){delete qc[t]}}function ME(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function qE(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ME(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function cp(n,t,r,s){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:s}}}const Uf=cp("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Hc=cp("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);const t=qE(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),HE={utf8:Uf,"utf-8":Uf,hex:Cn.base16,latin1:Hc,ascii:Hc,binary:Hc,...Cn};function zE(n,t="utf8"){const r=HE[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}const BE="PARSE_ERROR",KE="INVALID_REQUEST",VE="METHOD_NOT_FOUND",kE="INVALID_PARAMS",up="INTERNAL_ERROR",Ru="SERVER_ERROR",GE=[-32700,-32600,-32601,-32602,-32603],_s={[BE]:{code:-32700,message:"Parse error"},[KE]:{code:-32600,message:"Invalid Request"},[VE]:{code:-32601,message:"Method not found"},[kE]:{code:-32602,message:"Invalid params"},[up]:{code:-32603,message:"Internal error"},[Ru]:{code:-32e3,message:"Server error"}},hp=Ru;function WE(n){return GE.includes(n)}function Lf(n){return Object.keys(_s).includes(n)?_s[n]:_s[hp]}function YE(n){const t=Object.values(_s).find(r=>r.code===n);return t||_s[hp]}function lp(n,t,r){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):n}var fp={},dp={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var t,r,s,a,f,m,v,w,x,R,j,z,$,V,Z,ee,ue,M,B,N,U,O,u;(function(_){var Q=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:{};_(c(Q,c(n.exports)));function c(d,p){return d!==Q&&(typeof Object.create=="function"?Object.defineProperty(d,"__esModule",{value:!0}):d.__esModule=!0),function(E,y){return d[E]=p?p(E,y):y}}})(function(_){var Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var p in d)d.hasOwnProperty(p)&&(c[p]=d[p])};t=function(c,d){Q(c,d);function p(){this.constructor=c}c.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)},r=Object.assign||function(c){for(var d,p=1,E=arguments.length;p<E;p++){d=arguments[p];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(c[y]=d[y])}return c},s=function(c,d){var p={};for(var E in c)Object.prototype.hasOwnProperty.call(c,E)&&d.indexOf(E)<0&&(p[E]=c[E]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,E=Object.getOwnPropertySymbols(c);y<E.length;y++)d.indexOf(E[y])<0&&Object.prototype.propertyIsEnumerable.call(c,E[y])&&(p[E[y]]=c[E[y]]);return p},a=function(c,d,p,E){var y=arguments.length,g=y<3?d:E===null?E=Object.getOwnPropertyDescriptor(d,p):E,A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(c,d,p,E);else for(var F=c.length-1;F>=0;F--)(A=c[F])&&(g=(y<3?A(g):y>3?A(d,p,g):A(d,p))||g);return y>3&&g&&Object.defineProperty(d,p,g),g},f=function(c,d){return function(p,E){d(p,E,c)}},m=function(c,d){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,d)},v=function(c,d,p,E){function y(g){return g instanceof p?g:new p(function(A){A(g)})}return new(p||(p=Promise))(function(g,A){function F(q){try{P(E.next(q))}catch(te){A(te)}}function W(q){try{P(E.throw(q))}catch(te){A(te)}}function P(q){q.done?g(q.value):y(q.value).then(F,W)}P((E=E.apply(c,d||[])).next())})},w=function(c,d){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,y,g,A;return A={next:F(0),throw:F(1),return:F(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function F(P){return function(q){return W([P,q])}}function W(P){if(E)throw new TypeError("Generator is already executing.");for(;p;)try{if(E=1,y&&(g=P[0]&2?y.return:P[0]?y.throw||((g=y.return)&&g.call(y),0):y.next)&&!(g=g.call(y,P[1])).done)return g;switch(y=0,g&&(P=[P[0]&2,g.value]),P[0]){case 0:case 1:g=P;break;case 4:return p.label++,{value:P[1],done:!1};case 5:p.label++,y=P[1],P=[0];continue;case 7:P=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(P[0]===6||P[0]===2)){p=0;continue}if(P[0]===3&&(!g||P[1]>g[0]&&P[1]<g[3])){p.label=P[1];break}if(P[0]===6&&p.label<g[1]){p.label=g[1],g=P;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(P);break}g[2]&&p.ops.pop(),p.trys.pop();continue}P=d.call(c,p)}catch(q){P=[6,q],y=0}finally{E=g=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},u=function(c,d,p,E){E===void 0&&(E=p),c[E]=d[p]},x=function(c,d){for(var p in c)p!=="default"&&!d.hasOwnProperty(p)&&(d[p]=c[p])},R=function(c){var d=typeof Symbol=="function"&&Symbol.iterator,p=d&&c[d],E=0;if(p)return p.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&E>=c.length&&(c=void 0),{value:c&&c[E++],done:!c}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},j=function(c,d){var p=typeof Symbol=="function"&&c[Symbol.iterator];if(!p)return c;var E=p.call(c),y,g=[],A;try{for(;(d===void 0||d-- >0)&&!(y=E.next()).done;)g.push(y.value)}catch(F){A={error:F}}finally{try{y&&!y.done&&(p=E.return)&&p.call(E)}finally{if(A)throw A.error}}return g},z=function(){for(var c=[],d=0;d<arguments.length;d++)c=c.concat(j(arguments[d]));return c},$=function(){for(var c=0,d=0,p=arguments.length;d<p;d++)c+=arguments[d].length;for(var E=Array(c),y=0,d=0;d<p;d++)for(var g=arguments[d],A=0,F=g.length;A<F;A++,y++)E[y]=g[A];return E},V=function(c){return this instanceof V?(this.v=c,this):new V(c)},Z=function(c,d,p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=p.apply(c,d||[]),y,g=[];return y={},A("next"),A("throw"),A("return"),y[Symbol.asyncIterator]=function(){return this},y;function A(re){E[re]&&(y[re]=function(ie){return new Promise(function(ge,le){g.push([re,ie,ge,le])>1||F(re,ie)})})}function F(re,ie){try{W(E[re](ie))}catch(ge){te(g[0][3],ge)}}function W(re){re.value instanceof V?Promise.resolve(re.value.v).then(P,q):te(g[0][2],re)}function P(re){F("next",re)}function q(re){F("throw",re)}function te(re,ie){re(ie),g.shift(),g.length&&F(g[0][0],g[0][1])}},ee=function(c){var d,p;return d={},E("next"),E("throw",function(y){throw y}),E("return"),d[Symbol.iterator]=function(){return this},d;function E(y,g){d[y]=c[y]?function(A){return(p=!p)?{value:V(c[y](A)),done:y==="return"}:g?g(A):A}:g}},ue=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=c[Symbol.asyncIterator],p;return d?d.call(c):(c=typeof R=="function"?R(c):c[Symbol.iterator](),p={},E("next"),E("throw"),E("return"),p[Symbol.asyncIterator]=function(){return this},p);function E(g){p[g]=c[g]&&function(A){return new Promise(function(F,W){A=c[g](A),y(F,W,A.done,A.value)})}}function y(g,A,F,W){Promise.resolve(W).then(function(P){g({value:P,done:F})},A)}},M=function(c,d){return Object.defineProperty?Object.defineProperty(c,"raw",{value:d}):c.raw=d,c},B=function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var p in c)Object.hasOwnProperty.call(c,p)&&(d[p]=c[p]);return d.default=c,d},N=function(c){return c&&c.__esModule?c:{default:c}},U=function(c,d){if(!d.has(c))throw new TypeError("attempted to get private field on non-instance");return d.get(c)},O=function(c,d,p){if(!d.has(c))throw new TypeError("attempted to set private field on non-instance");return d.set(c,p),p},_("__extends",t),_("__assign",r),_("__rest",s),_("__decorate",a),_("__param",f),_("__metadata",m),_("__awaiter",v),_("__generator",w),_("__exportStar",x),_("__createBinding",u),_("__values",R),_("__read",j),_("__spread",z),_("__spreadArrays",$),_("__await",V),_("__asyncGenerator",Z),_("__asyncDelegator",ee),_("__asyncValues",ue),_("__makeTemplateObject",M),_("__importStar",B),_("__importDefault",N),_("__classPrivateFieldGet",U),_("__classPrivateFieldSet",O)})})(dp);var di={},Ff;function JE(){if(Ff)return di;Ff=1,Object.defineProperty(di,"__esModule",{value:!0}),di.isBrowserCryptoAvailable=di.getSubtleCrypto=di.getBrowerCrypto=void 0;function n(){return(globalThis==null?void 0:globalThis.crypto)||(globalThis==null?void 0:globalThis.msCrypto)||{}}di.getBrowerCrypto=n;function t(){const s=n();return s.subtle||s.webkitSubtle}di.getSubtleCrypto=t;function r(){return!!n()&&!!t()}return di.isBrowserCryptoAvailable=r,di}var pi={},jf;function QE(){if(jf)return pi;jf=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.isBrowser=pi.isNode=pi.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}pi.isReactNative=n;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}pi.isNode=t;function r(){return!n()&&!t()}return pi.isBrowser=r,pi}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=dp.exports;t.__exportStar(JE(),n),t.__exportStar(QE(),n)})(fp);function Cu(n=3){const t=Date.now()*Math.pow(10,n),r=Math.floor(Math.random()*Math.pow(10,n));return t+r}function pp(n=6){return BigInt(Cu(n))}function Rn(n,t,r){return{id:r||Cu(),jsonrpc:"2.0",method:n,params:t}}function Nu(n,t){return{id:n,jsonrpc:"2.0",result:t}}function ea(n,t,r){return{id:n,jsonrpc:"2.0",error:XE(t,r)}}function XE(n,t){return typeof n>"u"?Lf(up):(typeof n=="string"&&(n=Object.assign(Object.assign({},Lf(Ru)),{message:n})),typeof t<"u"&&(n.data=t),WE(n.code)&&(n=YE(n.code)),n)}class ZE{}class e6 extends ZE{constructor(){super()}}class t6 extends e6{constructor(t){super()}}const r6="^https?:",i6="^wss?:";function n6(n){const t=n.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function gp(n,t){const r=n6(n);return typeof r>"u"?!1:new RegExp(t).test(r)}function Df(n){return gp(n,r6)}function $f(n){return gp(n,i6)}function s6(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function yp(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function Uu(n){return yp(n)&&"method"in n}function ta(n){return yp(n)&&(_i(n)||zr(n))}function _i(n){return"result"in n}function zr(n){return"error"in n}class Ni extends t6{constructor(t){super(t),this.events=new cr.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async request(t,r){return this.requestStrict(Rn(t.method,t.params||[],t.id||pp().toString()),r)}async requestStrict(t,r){return new Promise(async(s,a)=>{if(!this.connection.connected)try{await this.open()}catch(f){a(f)}this.events.on(`${t.id}`,f=>{zr(f)?a(f.error):s(f.result)});try{await this.connection.send(t,r)}catch(f){a(f)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),ta(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const o6=()=>typeof WebSocket<"u"?WebSocket:typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"?globalThis.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),a6=()=>typeof WebSocket<"u"||typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Mf=n=>n.split("?")[0],qf=10,c6=o6();class u6{constructor(t){if(this.url=t,this.events=new cr.exports.EventEmitter,this.registering=!1,!$f(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),t()},this.socket.close()})}async send(t,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(vs(t))}catch(s){this.onError(t.id,s)}}register(t=this.url){if(!$f(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,a)=>{this.events.once("register_error",f=>{this.resetMaxListeners(),a(f)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,s)=>{const a=fp.isReactNative()?void 0:{rejectUnauthorized:!s6(t)},f=new c6(t,[],a);a6()?f.onerror=m=>{const v=m;s(this.emitError(v.error))}:f.on("error",m=>{s(this.emitError(m))}),f.onopen=()=>{this.onOpen(f),r(f)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?pu(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const s=this.parseError(r),a=s.message||s.toString(),f=ea(t,a);this.events.emit("payload",f)}parseError(t,r=this.url){return lp(t,Mf(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>qf&&this.events.setMaxListeners(qf)}emitError(t){const r=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for host: ${Mf(this.url)}`));return this.events.emit("register_error",r),r}}var au={exports:{}};(function(n,t){var r=200,s="__lodash_hash_undefined__",a=1,f=2,m=9007199254740991,v="[object Arguments]",w="[object Array]",x="[object AsyncFunction]",R="[object Boolean]",j="[object Date]",z="[object Error]",$="[object Function]",V="[object GeneratorFunction]",Z="[object Map]",ee="[object Number]",ue="[object Null]",M="[object Object]",B="[object Promise]",N="[object Proxy]",U="[object RegExp]",O="[object Set]",u="[object String]",_="[object Symbol]",Q="[object Undefined]",c="[object WeakMap]",d="[object ArrayBuffer]",p="[object DataView]",E="[object Float32Array]",y="[object Float64Array]",g="[object Int8Array]",A="[object Int16Array]",F="[object Int32Array]",W="[object Uint8Array]",P="[object Uint8ClampedArray]",q="[object Uint16Array]",te="[object Uint32Array]",re=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,ge=/^(?:0|[1-9]\d*)$/,le={};le[E]=le[y]=le[g]=le[A]=le[F]=le[W]=le[P]=le[q]=le[te]=!0,le[v]=le[w]=le[d]=le[R]=le[p]=le[j]=le[z]=le[$]=le[Z]=le[ee]=le[M]=le[U]=le[O]=le[u]=le[c]=!1;var me=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,J=typeof self=="object"&&self&&self.Object===Object&&self,Y=me||J||Function("return this")(),H=t&&!t.nodeType&&t,l=H&&!0&&n&&!n.nodeType&&n,L=l&&l.exports===H,he=L&&me.process,pe=function(){try{return he&&he.binding&&he.binding("util")}catch{}}(),Oe=pe&&pe.isTypedArray;function ze(T,K){for(var ae=-1,ye=T==null?0:T.length,at=0,Ce=[];++ae<ye;){var ft=T[ae];K(ft,ae,T)&&(Ce[at++]=ft)}return Ce}function Ve(T,K){for(var ae=-1,ye=K.length,at=T.length;++ae<ye;)T[at+ae]=K[ae];return T}function De(T,K){for(var ae=-1,ye=T==null?0:T.length;++ae<ye;)if(K(T[ae],ae,T))return!0;return!1}function pt(T,K){for(var ae=-1,ye=Array(T);++ae<T;)ye[ae]=K(ae);return ye}function gt(T){return function(K){return T(K)}}function Me(T,K){return T.has(K)}function Pe(T,K){return T==null?void 0:T[K]}function Ue(T){var K=-1,ae=Array(T.size);return T.forEach(function(ye,at){ae[++K]=[at,ye]}),ae}function Le(T,K){return function(ae){return T(K(ae))}}function qe(T){var K=-1,ae=Array(T.size);return T.forEach(function(ye){ae[++K]=ye}),ae}var Te=Array.prototype,Fe=Function.prototype,Ie=Object.prototype,Ae=Y["__core-js_shared__"],Be=Fe.toString,xe=Ie.hasOwnProperty,ke=function(){var T=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),We=Ie.toString,et=RegExp("^"+Be.call(xe).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=L?Y.Buffer:void 0,Je=Y.Symbol,Zt=Y.Uint8Array,ur=Ie.propertyIsEnumerable,Vr=Te.splice,er=Je?Je.toStringTag:void 0,ti=Object.getOwnPropertySymbols,vi=tt?tt.isBuffer:void 0,Li=Le(Object.keys,Object),wt=_r(Y,"DataView"),yt=_r(Y,"Map"),Et=_r(Y,"Promise"),St=_r(Y,"Set"),bt=_r(Y,"WeakMap"),_t=_r(Object,"create"),Lt=ii(wt),Ft=ii(yt),It=ii(Et),jt=ii(St),Ot=ii(bt),Tt=Je?Je.prototype:void 0,Pt=Tt?Tt.valueOf:void 0;function ht(T){var K=-1,ae=T==null?0:T.length;for(this.clear();++K<ae;){var ye=T[K];this.set(ye[0],ye[1])}}function Dt(){this.__data__=_t?_t(null):{},this.size=0}function $t(T){var K=this.has(T)&&delete this.__data__[T];return this.size-=K?1:0,K}function na(T){var K=this.__data__;if(_t){var ae=K[T];return ae===s?void 0:ae}return xe.call(K,T)?K[T]:void 0}function sa(T){var K=this.__data__;return _t?K[T]!==void 0:xe.call(K,T)}function oa(T,K){var ae=this.__data__;return this.size+=this.has(T)?0:1,ae[T]=_t&&K===void 0?s:K,this}ht.prototype.clear=Dt,ht.prototype.delete=$t,ht.prototype.get=na,ht.prototype.has=sa,ht.prototype.set=oa;function Or(T){var K=-1,ae=T==null?0:T.length;for(this.clear();++K<ae;){var ye=T[K];this.set(ye[0],ye[1])}}function aa(){this.__data__=[],this.size=0}function ca(T){var K=this.__data__,ae=Fi(K,T);if(ae<0)return!1;var ye=K.length-1;return ae==ye?K.pop():Vr.call(K,ae,1),--this.size,!0}function ua(T){var K=this.__data__,ae=Fi(K,T);return ae<0?void 0:K[ae][1]}function ha(T){return Fi(this.__data__,T)>-1}function la(T,K){var ae=this.__data__,ye=Fi(ae,T);return ye<0?(++this.size,ae.push([T,K])):ae[ye][1]=K,this}Or.prototype.clear=aa,Or.prototype.delete=ca,Or.prototype.get=ua,Or.prototype.has=ha,Or.prototype.set=la;function ri(T){var K=-1,ae=T==null?0:T.length;for(this.clear();++K<ae;){var ye=T[K];this.set(ye[0],ye[1])}}function sn(){this.size=0,this.__data__={hash:new ht,map:new(yt||Or),string:new ht}}function fa(T){var K=bi(this,T).delete(T);return this.size-=K?1:0,K}function on(T){return bi(this,T).get(T)}function da(T){return bi(this,T).has(T)}function pa(T,K){var ae=bi(this,T),ye=ae.size;return ae.set(T,K),this.size+=ae.size==ye?0:1,this}ri.prototype.clear=sn,ri.prototype.delete=fa,ri.prototype.get=on,ri.prototype.has=da,ri.prototype.set=pa;function an(T){var K=-1,ae=T==null?0:T.length;for(this.__data__=new ri;++K<ae;)this.add(T[K])}function As(T){return this.__data__.set(T,s),this}function Rs(T){return this.__data__.has(T)}an.prototype.add=an.prototype.push=As,an.prototype.has=Rs;function Fr(T){var K=this.__data__=new Or(T);this.size=K.size}function ga(){this.__data__=new Or,this.size=0}function ya(T){var K=this.__data__,ae=K.delete(T);return this.size=K.size,ae}function _a(T){return this.__data__.get(T)}function va(T){return this.__data__.has(T)}function Cs(T,K){var ae=this.__data__;if(ae instanceof Or){var ye=ae.__data__;if(!yt||ye.length<r-1)return ye.push([T,K]),this.size=++ae.size,this;ae=this.__data__=new ri(ye)}return ae.set(T,K),this.size=ae.size,this}Fr.prototype.clear=ga,Fr.prototype.delete=ya,Fr.prototype.get=_a,Fr.prototype.has=va,Fr.prototype.set=Cs;function Ns(T,K){var ae=hn(T),ye=!ae&&Ks(T),at=!ae&&!ye&&Mn(T),Ce=!ae&&!ye&&!at&&Gs(T),ft=ae||ye||at||Ce,Mt=ft?pt(T.length,String):[],Qe=Mt.length;for(var ct in T)(K||xe.call(T,ct))&&!(ft&&(ct=="length"||at&&(ct=="offset"||ct=="parent")||Ce&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Ms(ct,Qe)))&&Mt.push(ct);return Mt}function Fi(T,K){for(var ae=T.length;ae--;)if(Bs(T[ae][0],K))return ae;return-1}function Dn(T,K,ae){var ye=K(T);return hn(T)?ye:Ve(ye,ae(T))}function ji(T){return T==null?T===void 0?Q:ue:er&&er in Object(T)?Ds(T):wa(T)}function $n(T){return $i(T)&&ji(T)==v}function Di(T,K,ae,ye,at){return T===K?!0:T==null||K==null||!$i(T)&&!$i(K)?T!==T&&K!==K:Us(T,K,ae,ye,Di,at)}function Us(T,K,ae,ye,at,Ce){var ft=hn(T),Mt=hn(K),Qe=ft?w:kr(T),ct=Mt?w:kr(K);Qe=Qe==v?M:Qe,ct=ct==v?M:ct;var At=Qe==M,hr=ct==M,qt=Qe==ct;if(qt&&Mn(T)){if(!Mn(K))return!1;ft=!0,At=!1}if(qt&&!At)return Ce||(Ce=new Fr),ft||Gs(T)?cn(T,K,ae,ye,at,Ce):ma(T,K,Qe,ae,ye,at,Ce);if(!(ae&a)){var dt=At&&xe.call(T,"__wrapped__"),tr=hr&&xe.call(K,"__wrapped__");if(dt||tr){var jr=dt?T.value():T,Pr=tr?K.value():K;return Ce||(Ce=new Fr),at(jr,Pr,ae,ye,Ce)}}return qt?(Ce||(Ce=new Fr),js(T,K,ae,ye,at,Ce)):!1}function ba(T){if(!ks(T)||Hs(T))return!1;var K=ln(T)?et:ie;return K.test(ii(T))}function Ls(T){return $i(T)&&Vs(T.length)&&!!le[ji(T)]}function Fs(T){if(!zs(T))return Li(T);var K=[];for(var ae in Object(T))xe.call(T,ae)&&ae!="constructor"&&K.push(ae);return K}function cn(T,K,ae,ye,at,Ce){var ft=ae&a,Mt=T.length,Qe=K.length;if(Mt!=Qe&&!(ft&&Qe>Mt))return!1;var ct=Ce.get(T);if(ct&&Ce.get(K))return ct==K;var At=-1,hr=!0,qt=ae&f?new an:void 0;for(Ce.set(T,K),Ce.set(K,T);++At<Mt;){var dt=T[At],tr=K[At];if(ye)var jr=ft?ye(tr,dt,At,K,T,Ce):ye(dt,tr,At,T,K,Ce);if(jr!==void 0){if(jr)continue;hr=!1;break}if(qt){if(!De(K,function(Pr,Gr){if(!Me(qt,Gr)&&(dt===Pr||at(dt,Pr,ae,ye,Ce)))return qt.push(Gr)})){hr=!1;break}}else if(!(dt===tr||at(dt,tr,ae,ye,Ce))){hr=!1;break}}return Ce.delete(T),Ce.delete(K),hr}function ma(T,K,ae,ye,at,Ce,ft){switch(ae){case p:if(T.byteLength!=K.byteLength||T.byteOffset!=K.byteOffset)return!1;T=T.buffer,K=K.buffer;case d:return!(T.byteLength!=K.byteLength||!Ce(new Zt(T),new Zt(K)));case R:case j:case ee:return Bs(+T,+K);case z:return T.name==K.name&&T.message==K.message;case U:case u:return T==K+"";case Z:var Mt=Ue;case O:var Qe=ye&a;if(Mt||(Mt=qe),T.size!=K.size&&!Qe)return!1;var ct=ft.get(T);if(ct)return ct==K;ye|=f,ft.set(T,K);var At=cn(Mt(T),Mt(K),ye,at,Ce,ft);return ft.delete(T),At;case _:if(Pt)return Pt.call(T)==Pt.call(K)}return!1}function js(T,K,ae,ye,at,Ce){var ft=ae&a,Mt=un(T),Qe=Mt.length,ct=un(K),At=ct.length;if(Qe!=At&&!ft)return!1;for(var hr=Qe;hr--;){var qt=Mt[hr];if(!(ft?qt in K:xe.call(K,qt)))return!1}var dt=Ce.get(T);if(dt&&Ce.get(K))return dt==K;var tr=!0;Ce.set(T,K),Ce.set(K,T);for(var jr=ft;++hr<Qe;){qt=Mt[hr];var Pr=T[qt],Gr=K[qt];if(ye)var qn=ft?ye(Gr,Pr,qt,K,T,Ce):ye(Pr,Gr,qt,T,K,Ce);if(!(qn===void 0?Pr===Gr||at(Pr,Gr,ae,ye,Ce):qn)){tr=!1;break}jr||(jr=qt=="constructor")}if(tr&&!jr){var Mi=T.constructor,Kt=K.constructor;Mi!=Kt&&"constructor"in T&&"constructor"in K&&!(typeof Mi=="function"&&Mi instanceof Mi&&typeof Kt=="function"&&Kt instanceof Kt)&&(tr=!1)}return Ce.delete(T),Ce.delete(K),tr}function un(T){return Dn(T,Ia,$s)}function bi(T,K){var ae=T.__data__;return qs(K)?ae[typeof K=="string"?"string":"hash"]:ae.map}function _r(T,K){var ae=Pe(T,K);return ba(ae)?ae:void 0}function Ds(T){var K=xe.call(T,er),ae=T[er];try{T[er]=void 0;var ye=!0}catch{}var at=We.call(T);return ye&&(K?T[er]=ae:delete T[er]),at}var $s=ti?function(T){return T==null?[]:(T=Object(T),ze(ti(T),function(K){return ur.call(T,K)}))}:ot,kr=ji;(wt&&kr(new wt(new ArrayBuffer(1)))!=p||yt&&kr(new yt)!=Z||Et&&kr(Et.resolve())!=B||St&&kr(new St)!=O||bt&&kr(new bt)!=c)&&(kr=function(T){var K=ji(T),ae=K==M?T.constructor:void 0,ye=ae?ii(ae):"";if(ye)switch(ye){case Lt:return p;case Ft:return Z;case It:return B;case jt:return O;case Ot:return c}return K});function Ms(T,K){return K=K==null?m:K,!!K&&(typeof T=="number"||ge.test(T))&&T>-1&&T%1==0&&T<K}function qs(T){var K=typeof T;return K=="string"||K=="number"||K=="symbol"||K=="boolean"?T!=="__proto__":T===null}function Hs(T){return!!ke&&ke in T}function zs(T){var K=T&&T.constructor,ae=typeof K=="function"&&K.prototype||Ie;return T===ae}function wa(T){return We.call(T)}function ii(T){if(T!=null){try{return Be.call(T)}catch{}try{return T+""}catch{}}return""}function Bs(T,K){return T===K||T!==T&&K!==K}var Ks=$n(function(){return arguments}())?$n:function(T){return $i(T)&&xe.call(T,"callee")&&!ur.call(T,"callee")},hn=Array.isArray;function Ea(T){return T!=null&&Vs(T.length)&&!ln(T)}var Mn=vi||st;function Sa(T,K){return Di(T,K)}function ln(T){if(!ks(T))return!1;var K=ji(T);return K==$||K==V||K==x||K==N}function Vs(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=m}function ks(T){var K=typeof T;return T!=null&&(K=="object"||K=="function")}function $i(T){return T!=null&&typeof T=="object"}var Gs=Oe?gt(Oe):Ls;function Ia(T){return Ea(T)?Ns(T):Fs(T)}function ot(){return[]}function st(){return!1}n.exports=Sa})(au,au.exports);const h6=au.exports;function l6(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var a=0;a<n.length;a++){var f=n.charAt(a),m=f.charCodeAt(0);if(r[m]!==255)throw new TypeError(f+" is ambiguous");r[m]=a}var v=n.length,w=n.charAt(0),x=Math.log(v)/Math.log(256),R=Math.log(256)/Math.log(v);function j(V){if(V instanceof Uint8Array||(ArrayBuffer.isView(V)?V=new Uint8Array(V.buffer,V.byteOffset,V.byteLength):Array.isArray(V)&&(V=Uint8Array.from(V))),!(V instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(V.length===0)return"";for(var Z=0,ee=0,ue=0,M=V.length;ue!==M&&V[ue]===0;)ue++,Z++;for(var B=(M-ue)*R+1>>>0,N=new Uint8Array(B);ue!==M;){for(var U=V[ue],O=0,u=B-1;(U!==0||O<ee)&&u!==-1;u--,O++)U+=256*N[u]>>>0,N[u]=U%v>>>0,U=U/v>>>0;if(U!==0)throw new Error("Non-zero carry");ee=O,ue++}for(var _=B-ee;_!==B&&N[_]===0;)_++;for(var Q=w.repeat(Z);_<B;++_)Q+=n.charAt(N[_]);return Q}function z(V){if(typeof V!="string")throw new TypeError("Expected String");if(V.length===0)return new Uint8Array;var Z=0;if(V[Z]!==" "){for(var ee=0,ue=0;V[Z]===w;)ee++,Z++;for(var M=(V.length-Z)*x+1>>>0,B=new Uint8Array(M);V[Z];){var N=r[V.charCodeAt(Z)];if(N===255)return;for(var U=0,O=M-1;(N!==0||U<ue)&&O!==-1;O--,U++)N+=v*B[O]>>>0,B[O]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");ue=U,Z++}if(V[Z]!==" "){for(var u=M-ue;u!==M&&B[u]===0;)u++;for(var _=new Uint8Array(ee+(M-u)),Q=ee;u!==M;)_[Q++]=B[u++];return _}}}function $(V){var Z=z(V);if(Z)return Z;throw new Error(`Non-${t} character`)}return{encode:j,decodeUnsafe:z,decode:$}}var f6=l6,d6=f6;const _p=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},p6=n=>new TextEncoder().encode(n),g6=n=>new TextDecoder().decode(n);class y6{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class _6{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return vp(this,t)}}class v6{constructor(t){this.decoders=t}or(t){return vp(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const vp=(n,t)=>new v6({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}});class b6{constructor(t,r,s,a){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=a,this.encoder=new y6(t,r,s),this.decoder=new _6(t,r,a)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const ra=({name:n,prefix:t,encode:r,decode:s})=>new b6(n,t,r,s),Ts=({prefix:n,name:t,alphabet:r})=>{const{encode:s,decode:a}=d6(r,t);return ra({prefix:n,name:t,encode:s,decode:f=>_p(a(f))})},m6=(n,t,r,s)=>{const a={};for(let R=0;R<t.length;++R)a[t[R]]=R;let f=n.length;for(;n[f-1]==="=";)--f;const m=new Uint8Array(f*r/8|0);let v=0,w=0,x=0;for(let R=0;R<f;++R){const j=a[n[R]];if(j===void 0)throw new SyntaxError(`Non-${s} character`);w=w<<r|j,v+=r,v>=8&&(v-=8,m[x++]=255&w>>v)}if(v>=r||255&w<<8-v)throw new SyntaxError("Unexpected end of data");return m},w6=(n,t,r)=>{const s=t[t.length-1]==="=",a=(1<<r)-1;let f="",m=0,v=0;for(let w=0;w<n.length;++w)for(v=v<<8|n[w],m+=8;m>r;)m-=r,f+=t[a&v>>m];if(m&&(f+=t[a&v<<r-m]),s)for(;f.length*r&7;)f+="=";return f},Wt=({name:n,prefix:t,bitsPerChar:r,alphabet:s})=>ra({prefix:t,name:n,encode(a){return w6(a,s,r)},decode(a){return m6(a,s,r,n)}}),E6=ra({prefix:"\0",name:"identity",encode:n=>g6(n),decode:n=>p6(n)});var S6=Object.freeze({__proto__:null,identity:E6});const I6=Wt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var O6=Object.freeze({__proto__:null,base2:I6});const P6=Wt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var x6=Object.freeze({__proto__:null,base8:P6});const T6=Ts({prefix:"9",name:"base10",alphabet:"0123456789"});var A6=Object.freeze({__proto__:null,base10:T6});const R6=Wt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),C6=Wt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var N6=Object.freeze({__proto__:null,base16:R6,base16upper:C6});const U6=Wt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),L6=Wt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),F6=Wt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),j6=Wt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),D6=Wt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$6=Wt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),M6=Wt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),q6=Wt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),H6=Wt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var z6=Object.freeze({__proto__:null,base32:U6,base32upper:L6,base32pad:F6,base32padupper:j6,base32hex:D6,base32hexupper:$6,base32hexpad:M6,base32hexpadupper:q6,base32z:H6});const B6=Ts({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),K6=Ts({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var V6=Object.freeze({__proto__:null,base36:B6,base36upper:K6});const k6=Ts({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),G6=Ts({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var W6=Object.freeze({__proto__:null,base58btc:k6,base58flickr:G6});const Y6=Wt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),J6=Wt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Q6=Wt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),X6=Wt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Z6=Object.freeze({__proto__:null,base64:Y6,base64pad:J6,base64url:Q6,base64urlpad:X6});const bp=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),eS=bp.reduce((n,t,r)=>(n[r]=t,n),[]),tS=bp.reduce((n,t,r)=>(n[t.codePointAt(0)]=r,n),[]);function rS(n){return n.reduce((t,r)=>(t+=eS[r],t),"")}function iS(n){const t=[];for(const r of n){const s=tS[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const nS=ra({prefix:"\u{1F680}",name:"base256emoji",encode:rS,decode:iS});var sS=Object.freeze({__proto__:null,base256emoji:nS}),oS=mp,Hf=128,aS=127,cS=~aS,uS=Math.pow(2,31);function mp(n,t,r){t=t||[],r=r||0;for(var s=r;n>=uS;)t[r++]=n&255|Hf,n/=128;for(;n&cS;)t[r++]=n&255|Hf,n>>>=7;return t[r]=n|0,mp.bytes=r-s+1,t}var hS=cu,lS=128,zf=127;function cu(n,s){var r=0,s=s||0,a=0,f=s,m,v=n.length;do{if(f>=v)throw cu.bytes=0,new RangeError("Could not decode varint");m=n[f++],r+=a<28?(m&zf)<<a:(m&zf)*Math.pow(2,a),a+=7}while(m>=lS);return cu.bytes=f-s,r}var fS=Math.pow(2,7),dS=Math.pow(2,14),pS=Math.pow(2,21),gS=Math.pow(2,28),yS=Math.pow(2,35),_S=Math.pow(2,42),vS=Math.pow(2,49),bS=Math.pow(2,56),mS=Math.pow(2,63),wS=function(n){return n<fS?1:n<dS?2:n<pS?3:n<gS?4:n<yS?5:n<_S?6:n<vS?7:n<bS?8:n<mS?9:10},ES={encode:oS,decode:hS,encodingLength:wS},wp=ES;const Bf=(n,t,r=0)=>(wp.encode(n,t,r),t),Kf=n=>wp.encodingLength(n),uu=(n,t)=>{const r=t.byteLength,s=Kf(n),a=s+Kf(r),f=new Uint8Array(a+r);return Bf(n,f,0),Bf(r,f,s),f.set(t,a),new SS(n,r,t,f)};class SS{constructor(t,r,s,a){this.code=t,this.size=r,this.digest=s,this.bytes=a}}const Ep=({name:n,code:t,encode:r})=>new IS(n,t,r);class IS{constructor(t,r,s){this.name=t,this.code=r,this.encode=s}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?uu(this.code,r):r.then(s=>uu(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Sp=n=>async t=>new Uint8Array(await crypto.subtle.digest(n,t)),OS=Ep({name:"sha2-256",code:18,encode:Sp("SHA-256")}),PS=Ep({name:"sha2-512",code:19,encode:Sp("SHA-512")});var xS=Object.freeze({__proto__:null,sha256:OS,sha512:PS});const Ip=0,TS="identity",Op=_p,AS=n=>uu(Ip,Op(n)),RS={code:Ip,name:TS,encode:Op,digest:AS};var CS=Object.freeze({__proto__:null,identity:RS});new TextEncoder,new TextDecoder;const Vf={...S6,...O6,...x6,...A6,...N6,...z6,...V6,...W6,...Z6,...sS};({...xS,...CS});function Pp(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function NS(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Pp(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function xp(n,t,r,s){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:s}}}const kf=xp("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),zc=xp("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);const t=NS(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),US={utf8:kf,"utf-8":kf,hex:Vf.base16,latin1:zc,ascii:zc,binary:zc,...Vf};function LS(n,t="utf8"){const r=US[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Pp(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}const Tp="wc",FS=2,Lu="core",Ri=`${Tp}@2:${Lu}:`,jS={name:Lu,logger:"error"},DS={database:":memory:"},$S="crypto",Gf="client_ed25519_seed",MS=be.ONE_DAY,qS="keychain",HS="0.3",zS="messages",BS="0.3",KS=be.SIX_HOURS,VS="publisher",Ap="irn",kS="error",Rp="wss://relay.walletconnect.com",Wf="wss://relay.walletconnect.org",GS="relayer",Xt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},WS="_subscription",gi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},YS=be.ONE_SECOND,JS="2.10.1",QS=1e4,XS="0.3",ZS="WALLETCONNECT_CLIENT_ID",Zr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},e2="subscription",t2="0.3",r2=be.FIVE_SECONDS*1e3,i2="pairing",n2="0.3",us={wc_pairingDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:be.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:be.ONE_DAY,prompt:!1,tag:0},res:{ttl:be.ONE_DAY,prompt:!1,tag:0}}},gs={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Xr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},s2="history",o2="0.3",a2="expirer",Lr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},c2="0.3",Bc="verify-api",qo="https://verify.walletconnect.com",Yf="https://verify.walletconnect.org";class u2{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=qS,this.version=HS,this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,a)=>{this.isInitialized(),this.keychain.set(s,a),await this.persist()},this.get=s=>{this.isInitialized();const a=this.keychain.get(s);if(typeof a>"u"){const{message:f}=de("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(f)}return a},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=t,this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,rp(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?ip(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class h2{constructor(t,r,s){this.core=t,this.logger=r,this.name=$S,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),f=df(a);return Md(f.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=Pw();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const f=await this.getClientSeed(),m=df(f),v=su();return await Km(v,a,MS,m)},this.generateSharedKey=(a,f,m)=>{this.isInitialized();const v=this.getPrivateKey(a),w=xw(v,f);return this.setSymKey(w,m)},this.setSymKey=async(a,f)=>{this.isInitialized();const m=f||Tw(a);return await this.keychain.set(m,a),m},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,f,m)=>{this.isInitialized();const v=tp(m),w=vs(f);if(Ef(v)){const z=v.senderPublicKey,$=v.receiverPublicKey;a=await this.generateSharedKey(z,$)}const x=this.getSymKey(a),{type:R,senderPublicKey:j}=v;return Rw({type:R,symKey:x,message:w,senderPublicKey:j})},this.decode=async(a,f,m)=>{this.isInitialized();const v=Uw(f,m);if(Ef(v)){const w=v.receiverPublicKey,x=v.senderPublicKey;a=await this.generateSharedKey(w,x)}try{const w=this.getSymKey(a),x=Cw({symKey:w,encoded:f});return pu(x)}catch(w){this.logger.error(`Failed to decode message from topic: '${a}', clientId: '${await this.getClientId()}'`),this.logger.error(w)}},this.getPayloadType=a=>{const f=Ko(a);return Os(f.type)},this.getPayloadSenderPublicKey=a=>{const f=Ko(a);return f.senderPublicKey?zE(f.senderPublicKey,ar):void 0},this.core=t,this.logger=Ze.generateChildLogger(r,this.name),this.keychain=s||new u2(this.core,this.logger)}get context(){return Ze.getLoggerContext(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(Gf)}catch{t=su(),await this.keychain.set(Gf,t)}return LS(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class l2 extends Vb{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=zS,this.version=BS,this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,a)=>{this.isInitialized();const f=Tn(a);let m=this.messages.get(s);return typeof m>"u"&&(m={}),typeof m[f]<"u"||(m[f]=a,this.messages.set(s,m),await this.persist()),f},this.get=s=>{this.isInitialized();let a=this.messages.get(s);return typeof a>"u"&&(a={}),a},this.has=(s,a)=>{this.isInitialized();const f=this.get(s),m=Tn(a);return typeof f[m]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ze.generateChildLogger(t,this.name),this.core=r}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,rp(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?ip(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class f2 extends kb{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new cr.exports.EventEmitter,this.name=VS,this.queue=new Map,this.publishTimeout=be.toMiliseconds(be.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,a,f)=>{var m;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:f}});try{const v=(f==null?void 0:f.ttl)||KS,w=ou(f),x=(f==null?void 0:f.prompt)||!1,R=(f==null?void 0:f.tag)||0,j=(f==null?void 0:f.id)||pp().toString(),z={topic:s,message:a,opts:{ttl:v,relay:w,prompt:x,tag:R,id:j}},$=setTimeout(()=>this.queue.set(j,z),this.publishTimeout);try{await await ms(this.rpcPublish(s,a,v,w,x,R,j),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(j),this.relayer.events.emit(Xt.publish,z)}catch(V){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(m=f==null?void 0:f.internal)!=null&&m.throwOnFailedPublish)throw this.removeRequestFromQueue(j),V;return}finally{clearTimeout($)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:f}})}catch(v){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(v),v}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.relayer=t,this.logger=Ze.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Ze.getLoggerContext(this.logger)}rpcPublish(t,r,s,a,f,m,v){var w,x,R,j;const z={method:$o(a.protocol).publish,params:{topic:t,message:r,ttl:s,prompt:f,tag:m},id:v};return or((w=z.params)==null?void 0:w.prompt)&&((x=z.params)==null||delete x.prompt),or((R=z.params)==null?void 0:R.tag)&&((j=z.params)==null||delete j.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:z}),this.relayer.request(z)}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:r,message:s,opts:a}=t;await this.publish(r,s,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(Nn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Xt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Xt.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}class d2{constructor(){this.map=new Map,this.set=(t,r)=>{const s=this.get(t);this.exists(t,r)||this.map.set(t,[...s,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const s=this.get(t);if(!this.exists(t,r))return;const a=s.filter(f=>f!==r);if(!a.length){this.map.delete(t);return}this.map.set(t,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var p2=Object.defineProperty,g2=Object.defineProperties,y2=Object.getOwnPropertyDescriptors,Jf=Object.getOwnPropertySymbols,_2=Object.prototype.hasOwnProperty,v2=Object.prototype.propertyIsEnumerable,Qf=(n,t,r)=>t in n?p2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,hs=(n,t)=>{for(var r in t||(t={}))_2.call(t,r)&&Qf(n,r,t[r]);if(Jf)for(var r of Jf(t))v2.call(t,r)&&Qf(n,r,t[r]);return n},Kc=(n,t)=>g2(n,y2(t));class b2 extends Yb{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new d2,this.events=new cr.exports.EventEmitter,this.name=e2,this.version=t2,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ri,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}});try{const f=ou(a),m={topic:s,relay:f};this.pending.set(s,m);const v=await this.rpcSubscribe(s,f);return this.onSubscribe(v,m),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}}),v}catch(f){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(f),f}},this.unsubscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),typeof(a==null?void 0:a.id)<"u"?await this.unsubscribeById(s,a.id,a):await this.unsubscribeByTopic(s,a)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((a,f)=>{const m=new be.Watch;m.start(this.pendingSubscriptionWatchLabel);const v=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(v),m.stop(this.pendingSubscriptionWatchLabel),a(!0)),m.elapsed(this.pendingSubscriptionWatchLabel)>=r2&&(clearInterval(v),m.stop(this.pendingSubscriptionWatchLabel),f(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=Ze.generateChildLogger(r,this.name),this.clientId=""}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let s=!1;try{s=this.getSubscription(t).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const s=this.topicMap.get(t);await Promise.all(s.map(async a=>await this.unsubscribeById(t,a,r)))}async unsubscribeById(t,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}});try{const a=ou(s);await this.rpcUnsubscribe(t,r,a);const f=Nt("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,f),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(t,r){const s={method:$o(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await ms(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Xt.connection_stalled)}return Tn(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,s={method:$o(r.protocol).batchSubscribe,params:{topics:t.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await ms(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Xt.connection_stalled)}}rpcUnsubscribe(t,r,s){const a={method:$o(s.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(t,r){this.setSubscription(t,Kc(hs({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,hs({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,s),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r))}addSubscription(t,r){this.subscriptions.set(t,hs({},r)),this.topicMap.set(r.topic,t),this.events.emit(Zr.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const s=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(s.topic,t),this.events.emit(Zr.deleted,Kc(hs({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Zr.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Zr.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);ei(r)&&this.onBatchSubscribe(r.map((s,a)=>Kc(hs({},t[a]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach(r=>{t.push(r)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(Nn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Xt.connect,async()=>{await this.onConnect()}),this.relayer.on(Xt.disconnect,()=>{this.onDisconnect()}),this.events.on(Zr.created,async t=>{const r=Zr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}),this.events.on(Zr.deleted,async t=>{const r=Zr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),t())},this.pollingInterval)})}}var m2=Object.defineProperty,Xf=Object.getOwnPropertySymbols,w2=Object.prototype.hasOwnProperty,E2=Object.prototype.propertyIsEnumerable,Zf=(n,t,r)=>t in n?m2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,S2=(n,t)=>{for(var r in t||(t={}))w2.call(t,r)&&Zf(n,r,t[r]);if(Xf)for(var r of Xf(t))E2.call(t,r)&&Zf(n,r,t[r]);return n};class I2 extends Gb{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new cr.exports.EventEmitter,this.name=GS,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Xt.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Xt.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(gi.payload,this.onPayloadHandler),this.provider.on(gi.connect,this.onConnectHandler),this.provider.on(gi.disconnect,this.onDisconnectHandler),this.provider.on(gi.error,this.onProviderErrorHandler)},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Ze.generateChildLogger(t.logger,this.name):Ze.pino(Ze.getDefaultLoggerOptions({level:t.logger||kS})),this.messages=new l2(this.logger,t.core),this.subscriber=new b2(this,this.logger),this.publisher=new f2(this,this.logger),this.relayUrl=(t==null?void 0:t.relayUrl)||Rp,this.projectId=t.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Wf}...`),await this.restartTransport(Wf)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},QS)}get context(){return Ze.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,r,s){this.isInitialized(),await this.publisher.publish(t,r,s),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){var s;this.isInitialized();let a=((s=this.subscriber.topicMap.get(t))==null?void 0:s[0])||"";return a||(await Promise.all([new Promise(f=>{this.subscriber.once(Zr.created,m=>{m.topic===t&&f()})}),new Promise(async f=>{a=await this.subscriber.subscribe(t,r),f()})]),a)}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await ms(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(t){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(Zr.resubscribed,()=>{r()})}),new Promise(async(r,s)=>{try{await ms(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(a){s(a);return}r()})])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.provider.events.emit(gi.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(t){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=t||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Nf())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ni(new u6(Kw({sdkVersion:JS,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:s}=t;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(t){const{topic:r,message:s}=t;if(!s||s.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const a=this.messages.has(r,s);return a&&this.logger.debug(`Ignoring duplicate message: ${s}`),a}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Uu(t)){if(!t.method.endsWith(WS))return;const r=t.params,{topic:s,message:a,publishedAt:f}=r.data,m={topic:s,message:a,publishedAt:f};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(S2({type:"event",event:r.id},m)),this.events.emit(r.id,m),await this.acknowledgePayload(t),await this.onMessageEvent(m)}else ta(t)&&this.events.emit(Xt.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(Xt.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=Nu(t.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(gi.payload,this.onPayloadHandler),this.provider.off(gi.connect,this.onConnectHandler),this.provider.off(gi.disconnect,this.onDisconnectHandler),this.provider.off(gi.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Xt.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let t=await Nf();jE(async r=>{this.initialized&&t!==r&&(t=r,r?await this.restartTransport().catch(s=>this.logger.error(s)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(s=>this.logger.error(s))))})}onProviderDisconnect(){this.events.emit(Xt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(t=>this.logger.error(t))},be.toMiliseconds(YS)))}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(t=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var O2=Object.defineProperty,ed=Object.getOwnPropertySymbols,P2=Object.prototype.hasOwnProperty,x2=Object.prototype.propertyIsEnumerable,td=(n,t,r)=>t in n?O2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,rd=(n,t)=>{for(var r in t||(t={}))P2.call(t,r)&&td(n,r,t[r]);if(ed)for(var r of ed(t))x2.call(t,r)&&td(n,r,t[r]);return n};class ia extends Wb{constructor(t,r,s,a=Ri,f=void 0){super(t,r,s,a),this.core=t,this.logger=r,this.name=s,this.map=new Map,this.version=XS,this.cached=[],this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(m=>{this.getKey&&m!==null&&!or(m)?this.map.set(this.getKey(m),m):dE(m)?this.map.set(m.id,m):pE(m)&&this.map.set(m.topic,m)}),this.cached=[],this.initialized=!0)},this.set=async(m,v)=>{this.isInitialized(),this.map.has(m)?await this.update(m,v):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:m,value:v}),this.map.set(m,v),await this.persist())},this.get=m=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:m}),this.getData(m)),this.getAll=m=>(this.isInitialized(),m?this.values.filter(v=>Object.keys(m).every(w=>h6(v[w],m[w]))):this.values),this.update=async(m,v)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:m,update:v});const w=rd(rd({},this.getData(m)),v);this.map.set(m,w),await this.persist()},this.delete=async(m,v)=>{this.isInitialized(),this.map.has(m)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:m,reason:v}),this.map.delete(m),await this.persist())},this.logger=Ze.generateChildLogger(r,this.name),this.storagePrefix=a,this.getKey=f}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class T2{constructor(t,r){this.core=t,this.logger=r,this.name=i2,this.version=n2,this.events=new cr.exports,this.initialized=!1,this.storagePrefix=Ri,this.ignoredPayloadTypes=[tn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=su(),a=await this.core.crypto.setSymKey(s),f=Hr(be.FIVE_MINUTES),m={protocol:Ap},v={topic:a,expiry:f,relay:m,active:!1},w=iE({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:m});return await this.pairings.set(a,v),await this.core.relayer.subscribe(a),this.core.expirer.set(a,f),{topic:a,uri:w}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:a,symKey:f,relay:m}=eE(s.uri);let v;if(this.pairings.keys.includes(a)&&(v=this.pairings.get(a),v.active))throw new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);this.core.crypto.keychain.has(a)||(await this.core.crypto.setSymKey(f,a),await this.core.relayer.subscribe(a,{relay:m}));const w=Hr(be.FIVE_MINUTES),x={topic:a,relay:m,expiry:w,active:!1};return await this.pairings.set(a,x),this.core.expirer.set(a,w),s.activatePairing&&await this.activate({topic:a}),this.events.emit(gs.create,x),x},this.activate=async({topic:s})=>{this.isInitialized();const a=Hr(be.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:a}),this.core.expirer.set(s,a)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:a}=s;if(this.pairings.keys.includes(a)){const f=await this.sendRequest(a,"wc_pairingPing",{}),{done:m,resolve:v,reject:w}=xn();this.events.once(Ht("pairing_ping",f),({error:x})=>{x?w(x):v()}),await m()}},this.updateExpiry=async({topic:s,expiry:a})=>{this.isInitialized(),await this.pairings.update(s,{expiry:a})},this.updateMetadata=async({topic:s,metadata:a})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:a}=s;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",Nt("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(s,a,f)=>{const m=Rn(a,f),v=await this.core.crypto.encode(s,m),w=us[a].req;return this.core.history.set(s,m),this.core.relayer.publish(s,v,w),m.id},this.sendResult=async(s,a,f)=>{const m=Nu(s,f),v=await this.core.crypto.encode(a,m),w=await this.core.history.get(a,s),x=us[w.request.method].res;await this.core.relayer.publish(a,v,x),await this.core.history.resolve(m)},this.sendError=async(s,a,f)=>{const m=ea(s,f),v=await this.core.crypto.encode(a,m),w=await this.core.history.get(a,s),x=us[w.request.method]?us[w.request.method].res:us.unregistered_method.res;await this.core.relayer.publish(a,v,x),await this.core.history.resolve(m)},this.deletePairing=async(s,a)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Nt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),a?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(a=>Ai(a.expiry));await Promise.all(s.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=s=>{const{topic:a,payload:f}=s;switch(f.method){case"wc_pairingPing":return this.onPairingPingRequest(a,f);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,f);default:return this.onUnknownRpcMethodRequest(a,f)}},this.onRelayEventResponse=async s=>{const{topic:a,payload:f}=s,m=(await this.core.history.get(a,f.id)).request.method;switch(m){case"wc_pairingPing":return this.onPairingPingResponse(a,f);default:return this.onUnknownRpcMethodResponse(m)}},this.onPairingPingRequest=async(s,a)=>{const{id:f}=a;try{this.isValidPing({topic:s}),await this.sendResult(f,s,!0),this.events.emit(gs.ping,{id:f,topic:s})}catch(m){await this.sendError(f,s,m),this.logger.error(m)}},this.onPairingPingResponse=(s,a)=>{const{id:f}=a;setTimeout(()=>{_i(a)?this.events.emit(Ht("pairing_ping",f),{}):zr(a)&&this.events.emit(Ht("pairing_ping",f),{error:a.error})},500)},this.onPairingDeleteRequest=async(s,a)=>{const{id:f}=a;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit(gs.delete,{id:f,topic:s})}catch(m){await this.sendError(f,s,m),this.logger.error(m)}},this.onUnknownRpcMethodRequest=async(s,a)=>{const{id:f,method:m}=a;try{if(this.registeredMethods.includes(m))return;const v=Nt("WC_METHOD_UNSUPPORTED",m);await this.sendError(f,s,v),this.logger.error(v)}catch(v){await this.sendError(f,s,v),this.logger.error(v)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Nt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!yr(s)){const{message:a}=de("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(a)}if(!fE(s.uri)){const{message:a}=de("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(a)}},this.isValidPing=async s=>{if(!yr(s)){const{message:f}=de("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(f)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidDisconnect=async s=>{if(!yr(s)){const{message:f}=de("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(f)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async s=>{if(!kt(s,!1)){const{message:a}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(a)}if(!this.pairings.keys.includes(s)){const{message:a}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(a)}if(Ai(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:a}=de("EXPIRED",`pairing topic: ${s}`);throw new Error(a)}},this.core=t,this.logger=Ze.generateChildLogger(r,this.name),this.pairings=new ia(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ze.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(Xt.message,async t=>{const{topic:r,message:s}=t;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const a=await this.core.crypto.decode(r,s);try{Uu(a)?(this.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):ta(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.core.history.delete(r,a.id))}catch(f){this.logger.error(f)}})}registerExpirerEvents(){this.core.expirer.on(Lr.expired,async t=>{const{topic:r}=sp(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(gs.expire,{topic:r}))})}}class A2 extends Kb{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new cr.exports.EventEmitter,this.name=s2,this.version=o2,this.cached=[],this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,a,f)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:a,chainId:f}),this.records.has(a.id))return;const m={id:a.id,topic:s,request:{method:a.method,params:a.params||null},chainId:f,expiry:Hr(be.THIRTY_DAYS)};this.records.set(m.id,m),this.events.emit(Xr.created,m)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const a=await this.getRecord(s.id);typeof a.response>"u"&&(a.response=zr(s)?{error:s.error}:{result:s.result},this.records.set(a.id,a),this.events.emit(Xr.updated,a))},this.get=async(s,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:a}),await this.getRecord(a)),this.delete=(s,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(f=>{if(f.topic===s){if(typeof a<"u"&&f.id!==a)return;this.records.delete(f.id),this.events.emit(Xr.deleted,f)}})},this.exists=async(s,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===s:!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:Rn(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(s)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Xr.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Xr.created,t=>{const r=Xr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Xr.updated,t=>{const r=Xr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Xr.deleted,t=>{const r=Xr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.core.heartbeat.on(Nn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(t=>{be.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.delete(t.topic,t.id))})}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class R2 extends Jb{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new cr.exports.EventEmitter,this.name=a2,this.version=c2,this.cached=[],this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const a=this.formatTarget(s);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(s,a)=>{this.isInitialized();const f=this.formatTarget(s),m={target:f,expiry:a};this.expirations.set(f,m),this.checkExpiry(f,m),this.events.emit(Lr.created,{target:f,expiration:m})},this.get=s=>{this.isInitialized();const a=this.formatTarget(s);return this.getExpiration(a)},this.del=s=>{if(this.isInitialized(),this.has(s)){const a=this.formatTarget(s),f=this.getExpiration(a);this.expirations.delete(a),this.events.emit(Lr.deleted,{target:a,expiration:f})}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return Vw(t);if(typeof t=="number")return kw(t);const{message:r}=de("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Lr.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(t,r){const{expiry:s}=r;be.toMiliseconds(s)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(Lr.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(Nn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Lr.created,t=>{const r=Lr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Lr.expired,t=>{const r=Lr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Lr.deleted,t=>{const r=Lr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class C2 extends Qb{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=Bc,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async s=>{if(this.verifyDisabled||Zo()||!Ps())return;const a=(s==null?void 0:s.verifyUrl)||qo;this.verifyUrl!==a&&this.removeIframe(),this.verifyUrl=a;try{await this.createIframe()}catch(f){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(f)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Yf;try{await this.createIframe()}catch(f){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(f),this.verifyDisabled=!0}}},this.register=async s=>{this.initialized?this.sendPost(s.attestationId):(this.addToQueue(s.attestationId),await this.init())},this.resolve=async s=>{if(this.isDevEnv)return"";const a=(s==null?void 0:s.verifyUrl)||qo;let f;try{f=await this.fetchAttestation(s.attestationId,a)}catch(m){this.logger.info(`failed to resolve attestation: ${s.attestationId} from url: ${a}`),this.logger.info(m),f=await this.fetchAttestation(s.attestationId,Yf)}return f},this.fetchAttestation=async(s,a)=>{this.logger.info(`resolving attestation: ${s} from url: ${a}`);const f=this.startAbortTimer(be.ONE_SECOND*2),m=await fetch(`${a}/attestation/${s}`,{signal:this.abortController.signal});return clearTimeout(f),m.status===200?await m.json():void 0},this.addToQueue=s=>{this.queue.push(s)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(s=>this.sendPost(s)),this.queue=[])},this.sendPost=s=>{var a;try{if(!this.iframe)return;(a=this.iframe.contentWindow)==null||a.postMessage(s,"*"),this.logger.info(`postMessage sent: ${s} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let s;const a=f=>{f.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",a),s())};await Promise.race([new Promise(f=>{if(document.getElementById(Bc))return f();window.addEventListener("message",a);const m=document.createElement("iframe");m.id=Bc,m.src=`${this.verifyUrl}/${this.projectId}`,m.style.display="none",document.body.append(m),this.iframe=m,s=f}),new Promise((f,m)=>setTimeout(()=>{window.removeEventListener("message",a),m("verify iframe load timeout")},be.toMiliseconds(be.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=Ze.generateChildLogger(r,this.name),this.verifyUrl=qo,this.abortController=new AbortController,this.isDevEnv=xu()&&{}.IS_VITEST}get context(){return Ze.getLoggerContext(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),be.toMiliseconds(t))}}var N2=Object.defineProperty,id=Object.getOwnPropertySymbols,U2=Object.prototype.hasOwnProperty,L2=Object.prototype.propertyIsEnumerable,nd=(n,t,r)=>t in n?N2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,sd=(n,t)=>{for(var r in t||(t={}))U2.call(t,r)&&nd(n,r,t[r]);if(id)for(var r of id(t))L2.call(t,r)&&nd(n,r,t[r]);return n};class Fu extends Bb{constructor(t){super(t),this.protocol=Tp,this.version=FS,this.name=Lu,this.events=new cr.exports.EventEmitter,this.initialized=!1,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||Rp;const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||jS.logger}));this.logger=Ze.generateChildLogger(r,this.name),this.heartbeat=new Nn.HeartBeat,this.crypto=new h2(this,this.logger,t==null?void 0:t.keychain),this.history=new A2(this,this.logger),this.expirer=new R2(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new Pb(sd(sd({},DS),t==null?void 0:t.storageOptions)),this.relayer=new I2({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new T2(this,this.logger),this.verify=new C2(this.projectId||"",this.logger)}static async init(t){const r=new Fu(t);await r.initialize();const s=await r.crypto.getClientId();return await r.storage.setItem(ZS,s),r}get context(){return Ze.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}}const F2=Fu,Cp="wc",Np=2,Up="client",ju=`${Cp}@${Np}:${Up}:`,Vc={name:Up,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},od="WALLETCONNECT_DEEPLINK_CHOICE",j2="proposal",Lp="Proposal expired",D2="session",Fo=be.SEVEN_DAYS,$2="engine",ls={wc_sessionPropose:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1104},res:{ttl:be.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1106},res:{ttl:be.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1112},res:{ttl:be.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1115}}},kc={min:be.FIVE_MINUTES,max:be.SEVEN_DAYS},yi={idle:"IDLE",active:"ACTIVE"},M2="request",q2=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var H2=Object.defineProperty,z2=Object.defineProperties,B2=Object.getOwnPropertyDescriptors,ad=Object.getOwnPropertySymbols,K2=Object.prototype.hasOwnProperty,V2=Object.prototype.propertyIsEnumerable,cd=(n,t,r)=>t in n?H2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,gr=(n,t)=>{for(var r in t||(t={}))K2.call(t,r)&&cd(n,r,t[r]);if(ad)for(var r of ad(t))V2.call(t,r)&&cd(n,r,t[r]);return n},fs=(n,t)=>z2(n,B2(t));class k2 extends Zb{constructor(t){super(t),this.name=$2,this.events=new cr.exports,this.initialized=!1,this.ignoredPayloadTypes=[tn],this.requestQueue={state:yi.idle,queue:[]},this.sessionRequestQueue={state:yi.idle,queue:[]},this.requestQueueDelay=be.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(ls)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},be.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const s=fs(gr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:a,requiredNamespaces:f,optionalNamespaces:m,sessionProperties:v,relays:w}=s;let x=a,R,j=!1;if(x&&(j=this.client.core.pairing.pairings.get(x).active),!x||!j){const{topic:B,uri:N}=await this.client.core.pairing.create();x=B,R=N}const z=await this.client.core.crypto.generateKeyPair(),$=gr({requiredNamespaces:f,optionalNamespaces:m,relays:w!=null?w:[{protocol:Ap}],proposer:{publicKey:z,metadata:this.client.metadata}},v&&{sessionProperties:v}),{reject:V,resolve:Z,done:ee}=xn(be.FIVE_MINUTES,Lp);if(this.events.once(Ht("session_connect"),async({error:B,session:N})=>{if(B)V(B);else if(N){N.self.publicKey=z;const U=fs(gr({},N),{requiredNamespaces:N.requiredNamespaces,optionalNamespaces:N.optionalNamespaces});await this.client.session.set(N.topic,U),await this.setExpiry(N.topic,N.expiry),x&&await this.client.core.pairing.updateMetadata({topic:x,metadata:N.peer.metadata}),Z(U)}}),!x){const{message:B}=de("NO_MATCHING_KEY",`connect() pairing topic: ${x}`);throw new Error(B)}const ue=await this.sendRequest({topic:x,method:"wc_sessionPropose",params:$}),M=Hr(be.FIVE_MINUTES);return await this.setProposal(ue,gr({id:ue,expiry:M},$)),{uri:R,approval:ee}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:a,namespaces:f,sessionProperties:m}=r,v=this.client.proposal.get(s);let{pairingTopic:w,proposer:x,requiredNamespaces:R,optionalNamespaces:j}=v;w=w||"",An(R)||(R=aE(f,"approve()"));const z=await this.client.core.crypto.generateKeyPair(),$=x.publicKey,V=await this.client.core.crypto.generateSharedKey(z,$);w&&s&&(await this.client.core.pairing.updateMetadata({topic:w,metadata:x.metadata}),await this.sendResult({id:s,topic:w,result:{relay:{protocol:a!=null?a:"irn"},responderPublicKey:z}}),await this.client.proposal.delete(s,Nt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:w}));const Z=gr({relay:{protocol:a!=null?a:"irn"},namespaces:f,requiredNamespaces:R,optionalNamespaces:j,pairingTopic:w,controller:{publicKey:z,metadata:this.client.metadata},expiry:Hr(Fo)},m&&{sessionProperties:m});await this.client.core.relayer.subscribe(V),await this.sendRequest({topic:V,method:"wc_sessionSettle",params:Z,throwOnFailedPublish:!0});const ee=fs(gr({},Z),{topic:V,pairingTopic:w,acknowledged:!1,self:Z.controller,peer:{publicKey:x.publicKey,metadata:x.metadata},controller:z});return await this.client.session.set(V,ee),await this.setExpiry(V,Hr(Fo)),{topic:V,acknowledged:()=>new Promise(ue=>setTimeout(()=>ue(this.client.session.get(V)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:s,reason:a}=r,{pairingTopic:f}=this.client.proposal.get(s);f&&(await this.sendError(s,f,a),await this.client.proposal.delete(s,Nt("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:a}=r,f=await this.sendRequest({topic:s,method:"wc_sessionUpdate",params:{namespaces:a}}),{done:m,resolve:v,reject:w}=xn();return this.events.once(Ht("session_update",f),({error:x})=>{x?w(x):v()}),await this.client.session.update(s,{namespaces:a}),{acknowledged:m}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,a=await this.sendRequest({topic:s,method:"wc_sessionExtend",params:{}}),{done:f,resolve:m,reject:v}=xn();return this.events.once(Ht("session_extend",a),({error:w})=>{w?v(w):m()}),await this.setExpiry(s,Hr(Fo)),{acknowledged:f}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:a,topic:f,expiry:m}=r,v=Cu(),{done:w,resolve:x,reject:R}=xn(m);return this.events.once(Ht("session_request",v),({error:j,result:z})=>{j?R(j):x(z)}),await Promise.all([new Promise(async j=>{await this.sendRequest({clientRpcId:v,topic:f,method:"wc_sessionRequest",params:{request:a,chainId:s},expiry:m,throwOnFailedPublish:!0}).catch(z=>R(z)),this.client.events.emit("session_request_sent",{topic:f,request:a,chainId:s,id:v}),j()}),new Promise(async j=>{const z=await this.client.core.storage.getItem(od);Gw({id:v,topic:f,wcDeepLink:z}),j()}),w()]).then(j=>j[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:a}=r,{id:f}=a;_i(a)?await this.sendResult({id:f,topic:s,result:a.result,throwOnFailedPublish:!0}):zr(a)&&await this.sendError(f,s,a.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const a=await this.sendRequest({topic:s,method:"wc_sessionPing",params:{}}),{done:f,resolve:m,reject:v}=xn();this.events.once(Ht("session_ping",a),({error:w})=>{w?v(w):m()}),await f()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:a,chainId:f}=r;await this.sendRequest({topic:s,method:"wc_sessionEvent",params:{event:a,chainId:f}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.client.session.keys.includes(s)?(await this.sendRequest({topic:s,method:"wc_sessionDelete",params:Nt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>hE(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const s=this.client.core.pairing.pairings.get(r.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(f=>{var m,v;return((m=f.peerMetadata)==null?void 0:m.url)&&((v=f.peerMetadata)==null?void 0:v.url)===r.peer.metadata.url&&f.topic&&f.topic!==s.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(f=>this.client.core.pairing.disconnect({topic:f.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(r,s)=>{const{self:a}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Nt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),s||this.client.core.expirer.del(r),this.client.core.storage.removeItem(od).catch(f=>this.client.logger.warn(f))},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,Nt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),a?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(f=>f.id!==r),a&&(this.sessionRequestQueue.state=yi.idle)},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=ls.wc_sessionRequest.req.ttl,{id:a,topic:f,params:m,verifyContext:v}=r;await this.client.pendingRequest.set(a,{id:a,topic:f,params:m,verifyContext:v}),s&&this.client.core.expirer.set(a,Hr(s))},this.sendRequest=async r=>{const{topic:s,method:a,params:f,expiry:m,relayRpcId:v,clientRpcId:w,throwOnFailedPublish:x}=r,R=Rn(a,f,w);if(Ps()&&q2.includes(a)){const $=Tn(JSON.stringify(R));this.client.core.verify.register({attestationId:$})}const j=await this.client.core.crypto.encode(s,R),z=ls[a].req;return m&&(z.ttl=m),v&&(z.id=v),this.client.core.history.set(s,R),x?(z.internal=fs(gr({},z.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,j,z)):this.client.core.relayer.publish(s,j,z).catch($=>this.client.logger.error($)),R.id},this.sendResult=async r=>{const{id:s,topic:a,result:f,throwOnFailedPublish:m}=r,v=Nu(s,f),w=await this.client.core.crypto.encode(a,v),x=await this.client.core.history.get(a,s),R=ls[x.request.method].res;m?(R.internal=fs(gr({},R.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(a,w,R)):this.client.core.relayer.publish(a,w,R).catch(j=>this.client.logger.error(j)),await this.client.core.history.resolve(v)},this.sendError=async(r,s,a)=>{const f=ea(r,a),m=await this.client.core.crypto.encode(s,f),v=await this.client.core.history.get(s,r),w=ls[v.request.method].res;this.client.core.relayer.publish(s,m,w),await this.client.core.history.resolve(f)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(a=>{Ai(a.expiry)&&r.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{Ai(a.expiry)&&s.push(a.id)}),await Promise.all([...r.map(a=>this.deleteSession(a)),...s.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===yi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=yi.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(s=>setTimeout(s,300))}catch(s){this.client.logger.warn(s)}}this.requestQueue.state=yi.idle},this.processRequest=r=>{const{topic:s,payload:a}=r,f=a.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeRequest(s,a);case"wc_sessionSettle":return this.onSessionSettleRequest(s,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,a);case"wc_sessionExtend":return this.onSessionExtendRequest(s,a);case"wc_sessionPing":return this.onSessionPingRequest(s,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,a);case"wc_sessionRequest":return this.onSessionRequest(s,a);case"wc_sessionEvent":return this.onSessionEventRequest(s,a);default:return this.client.logger.info(`Unsupported request method ${f}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:a}=r,f=(await this.client.core.history.get(s,a.id)).request.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeResponse(s,a);case"wc_sessionSettle":return this.onSessionSettleResponse(s,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,a);case"wc_sessionExtend":return this.onSessionExtendResponse(s,a);case"wc_sessionPing":return this.onSessionPingResponse(s,a);case"wc_sessionRequest":return this.onSessionRequestResponse(s,a);default:return this.client.logger.info(`Unsupported response method ${f}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:s}=r,{message:a}=de("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)},this.onSessionProposeRequest=async(r,s)=>{const{params:a,id:f}=s;try{this.isValidConnect(gr({},s.params));const m=Hr(be.FIVE_MINUTES),v=gr({id:f,pairingTopic:r,expiry:m},a);await this.setProposal(f,v);const w=Tn(JSON.stringify(s)),x=await this.getVerifyContext(w,v.proposer.metadata);this.client.events.emit("session_proposal",{id:f,params:v,verifyContext:x})}catch(m){await this.sendError(f,r,m),this.client.logger.error(m)}},this.onSessionProposeResponse=async(r,s)=>{const{id:a}=s;if(_i(s)){const{result:f}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:f});const m=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:m});const v=m.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:v});const w=f.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:w});const x=await this.client.core.crypto.generateSharedKey(v,w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:x});const R=await this.client.core.relayer.subscribe(x);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:R}),await this.client.core.pairing.activate({topic:r})}else zr(s)&&(await this.client.proposal.delete(a,Nt("USER_DISCONNECTED")),this.events.emit(Ht("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:a,params:f}=s;try{this.isValidSessionSettleRequest(f);const{relay:m,controller:v,expiry:w,namespaces:x,requiredNamespaces:R,optionalNamespaces:j,sessionProperties:z,pairingTopic:$}=s.params,V=gr({topic:r,relay:m,expiry:w,namespaces:x,acknowledged:!0,pairingTopic:$,requiredNamespaces:R,optionalNamespaces:j,controller:v.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:v.publicKey,metadata:v.metadata}},z&&{sessionProperties:z});await this.sendResult({id:s.id,topic:r,result:!0}),this.events.emit(Ht("session_connect"),{session:V}),this.cleanupDuplicatePairings(V)}catch(m){await this.sendError(a,r,m),this.client.logger.error(m)}},this.onSessionSettleResponse=async(r,s)=>{const{id:a}=s;_i(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ht("session_approve",a),{})):zr(s)&&(await this.client.session.delete(r,Nt("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",a),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:a,id:f}=s;try{const m=`${r}_session_update`,v=Lo.get(m);if(v&&this.isRequestOutOfSync(v,f)){this.client.logger.info(`Discarding out of sync request - ${f}`);return}this.isValidUpdate(gr({topic:r},a)),await this.client.session.update(r,{namespaces:a.namespaces}),await this.sendResult({id:f,topic:r,result:!0}),this.client.events.emit("session_update",{id:f,topic:r,params:a}),Lo.set(m,f)}catch(m){await this.sendError(f,r,m),this.client.logger.error(m)}},this.isRequestOutOfSync=(r,s)=>parseInt(s.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,s)=>{const{id:a}=s;_i(s)?this.events.emit(Ht("session_update",a),{}):zr(s)&&this.events.emit(Ht("session_update",a),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:a}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Hr(Fo)),await this.sendResult({id:a,topic:r,result:!0}),this.client.events.emit("session_extend",{id:a,topic:r})}catch(f){await this.sendError(a,r,f),this.client.logger.error(f)}},this.onSessionExtendResponse=(r,s)=>{const{id:a}=s;_i(s)?this.events.emit(Ht("session_extend",a),{}):zr(s)&&this.events.emit(Ht("session_extend",a),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:a}=s;try{this.isValidPing({topic:r}),await this.sendResult({id:a,topic:r,result:!0}),this.client.events.emit("session_ping",{id:a,topic:r})}catch(f){await this.sendError(a,r,f),this.client.logger.error(f)}},this.onSessionPingResponse=(r,s)=>{const{id:a}=s;setTimeout(()=>{_i(s)?this.events.emit(Ht("session_ping",a),{}):zr(s)&&this.events.emit(Ht("session_ping",a),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(f=>{this.client.core.relayer.once(Xt.publish,async()=>{f(await this.deleteSession(r))})}),this.sendResult({id:a,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:a,topic:r})}catch(f){this.client.logger.error(f)}},this.onSessionRequest=async(r,s)=>{const{id:a,params:f}=s;try{this.isValidRequest(gr({topic:r},f));const m=Tn(JSON.stringify(Rn("wc_sessionRequest",f,a))),v=this.client.session.get(r),w=await this.getVerifyContext(m,v.peer.metadata),x={id:a,topic:r,params:f,verifyContext:w};await this.setPendingSessionRequest(x),this.addSessionRequestToSessionRequestQueue(x),this.processSessionRequestQueue()}catch(m){await this.sendError(a,r,m),this.client.logger.error(m)}},this.onSessionRequestResponse=(r,s)=>{const{id:a}=s;_i(s)?this.events.emit(Ht("session_request",a),{result:s.result}):zr(s)&&this.events.emit(Ht("session_request",a),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:a,params:f}=s;try{const m=`${r}_session_event_${f.event.name}`,v=Lo.get(m);if(v&&this.isRequestOutOfSync(v,a)){this.client.logger.info(`Discarding out of sync request - ${a}`);return}this.isValidEmit(gr({topic:r},f)),this.client.events.emit("session_event",{id:a,topic:r,params:f}),Lo.set(m,a)}catch(m){await this.sendError(a,r,m),this.client.logger.error(m)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=yi.idle,this.processSessionRequestQueue()},be.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===yi.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=yi.active,this.client.events.emit("session_request",r)}catch(s){this.client.logger.error(s)}},this.onPairingCreated=r=>{if(r.active)return;const s=this.client.proposal.getAll().find(a=>a.pairingTopic===r.topic);s&&this.onSessionProposeRequest(r.topic,Rn("wc_sessionPropose",{requiredNamespaces:s.requiredNamespaces,optionalNamespaces:s.optionalNamespaces,relays:s.relays,proposer:s.proposer},s.id))},this.isValidConnect=async r=>{if(!yr(r)){const{message:w}=de("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(w)}const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:f,sessionProperties:m,relays:v}=r;if(or(s)||await this.isValidPairingTopic(s),!EE(v,!0)){const{message:w}=de("MISSING_OR_INVALID",`connect() relays: ${v}`);throw new Error(w)}!or(a)&&An(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!or(f)&&An(f)!==0&&this.validateNamespaces(f,"optionalNamespaces"),or(m)||this.validateSessionProps(m,"sessionProperties")},this.validateNamespaces=(r,s)=>{const a=wE(r,"connect()",s);if(a)throw new Error(a.message)},this.isValidApprove=async r=>{if(!yr(r))throw new Error(de("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:a,relayProtocol:f,sessionProperties:m}=r;await this.isValidProposalId(s);const v=this.client.proposal.get(s),w=Mo(a,"approve()");if(w)throw new Error(w.message);const x=Rf(v.requiredNamespaces,a,"approve()");if(x)throw new Error(x.message);if(!kt(f,!0)){const{message:R}=de("MISSING_OR_INVALID",`approve() relayProtocol: ${f}`);throw new Error(R)}or(m)||this.validateSessionProps(m,"sessionProperties")},this.isValidReject=async r=>{if(!yr(r)){const{message:f}=de("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(f)}const{id:s,reason:a}=r;if(await this.isValidProposalId(s),!IE(a)){const{message:f}=de("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(f)}},this.isValidSessionSettleRequest=r=>{if(!yr(r)){const{message:x}=de("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(x)}const{relay:s,controller:a,namespaces:f,expiry:m}=r;if(!ap(s)){const{message:x}=de("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(x)}const v=gE(a,"onSessionSettleRequest()");if(v)throw new Error(v.message);const w=Mo(f,"onSessionSettleRequest()");if(w)throw new Error(w.message);if(Ai(m)){const{message:x}=de("EXPIRED","onSessionSettleRequest()");throw new Error(x)}},this.isValidUpdate=async r=>{if(!yr(r)){const{message:w}=de("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(w)}const{topic:s,namespaces:a}=r;await this.isValidSessionTopic(s);const f=this.client.session.get(s),m=Mo(a,"update()");if(m)throw new Error(m.message);const v=Rf(f.requiredNamespaces,a,"update()");if(v)throw new Error(v.message)},this.isValidExtend=async r=>{if(!yr(r)){const{message:a}=de("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!yr(r)){const{message:w}=de("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(w)}const{topic:s,request:a,chainId:f,expiry:m}=r;await this.isValidSessionTopic(s);const{namespaces:v}=this.client.session.get(s);if(!Af(v,f)){const{message:w}=de("MISSING_OR_INVALID",`request() chainId: ${f}`);throw new Error(w)}if(!OE(a)){const{message:w}=de("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(w)}if(!TE(v,f,a.method)){const{message:w}=de("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(w)}if(m&&!NE(m,kc)){const{message:w}=de("MISSING_OR_INVALID",`request() expiry: ${m}. Expiry must be a number (in seconds) between ${kc.min} and ${kc.max}`);throw new Error(w)}},this.isValidRespond=async r=>{if(!yr(r)){const{message:f}=de("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(f)}const{topic:s,response:a}=r;if(await this.isValidSessionTopic(s),!PE(a)){const{message:f}=de("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(f)}},this.isValidPing=async r=>{if(!yr(r)){const{message:a}=de("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!yr(r)){const{message:v}=de("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(v)}const{topic:s,event:a,chainId:f}=r;await this.isValidSessionTopic(s);const{namespaces:m}=this.client.session.get(s);if(!Af(m,f)){const{message:v}=de("MISSING_OR_INVALID",`emit() chainId: ${f}`);throw new Error(v)}if(!xE(a)){const{message:v}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(v)}if(!AE(m,f,a.name)){const{message:v}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(v)}},this.isValidDisconnect=async r=>{if(!yr(r)){const{message:a}=de("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const a={verified:{verifyUrl:s.verifyUrl||qo,validation:"UNKNOWN",origin:s.url||""}};try{const f=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});f&&(a.verified.origin=f.origin,a.verified.isScam=f.isScam,a.verified.validation=f.origin===new URL(s.url).origin?"VALID":"INVALID")}catch(f){this.client.logger.info(f)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(a=>{if(!kt(a,!1)){const{message:f}=de("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(f)}})}}async isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Xt.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const a=await this.client.core.crypto.decode(r,s);try{Uu(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):ta(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a})}catch(f){this.client.logger.error(f)}})}registerExpirerEvents(){this.client.core.expirer.on(Lr.expired,async t=>{const{topic:r,id:s}=sp(t.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,de("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}registerPairingEvents(){this.client.core.pairing.events.on(gs.create,t=>this.onPairingCreated(t))}isValidPairingTopic(t){if(!kt(t,!1)){const{message:r}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(Ai(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=de("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!kt(t,!1)){const{message:r}=de("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(!this.client.session.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(Ai(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:r}=de("EXPIRED",`session topic: ${t}`);throw new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(kt(t,!1)){const{message:r}=de("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=de("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!SE(t)){const{message:r}=de("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(Ai(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:r}=de("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class G2 extends ia{constructor(t,r){super(t,r,j2,ju),this.core=t,this.logger=r}}class W2 extends ia{constructor(t,r){super(t,r,D2,ju),this.core=t,this.logger=r}}class Y2 extends ia{constructor(t,r){super(t,r,M2,ju,s=>s.id),this.core=t,this.logger=r}}class Du extends Xb{constructor(t){super(t),this.protocol=Cp,this.version=Np,this.name=Vc.name,this.events=new cr.exports.EventEmitter,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(a){throw this.logger.error(a.message),a}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(a){throw this.logger.error(a.message),a}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(a){throw this.logger.error(a.message),a}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(a){throw this.logger.error(a.message),a}},this.update=async s=>{try{return await this.engine.update(s)}catch(a){throw this.logger.error(a.message),a}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(a){throw this.logger.error(a.message),a}},this.request=async s=>{try{return await this.engine.request(s)}catch(a){throw this.logger.error(a.message),a}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(a){throw this.logger.error(a.message),a}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(a){throw this.logger.error(a.message),a}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(a){throw this.logger.error(a.message),a}},this.find=s=>{try{return this.engine.find(s)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(t==null?void 0:t.name)||Vc.name,this.metadata=(t==null?void 0:t.metadata)||qw();const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||Vc.logger}));this.core=(t==null?void 0:t.core)||new F2(t),this.logger=Ze.generateChildLogger(r,this.name),this.session=new W2(this.core,this.logger),this.proposal=new G2(this.core,this.logger),this.pendingRequest=new Y2(this.core,this.logger),this.engine=new k2(this)}static async init(t){const r=new Du(t);return await r.initialize(),r}get context(){return Ze.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}const J2={Accept:"application/json","Content-Type":"application/json"},Q2="POST",ud={headers:J2,method:Q2},hd=10;class rn{constructor(t,r=!1){if(this.url=t,this.disableProviderPing=r,this.events=new cr.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!Df(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t,r){this.isAvailable||await this.register();try{const s=vs(t),f=await(await Ml(this.url,Object.assign(Object.assign({},ud),{body:s}))).json();this.onPayload({data:f})}catch(s){this.onError(t.id,s)}}async register(t=this.url){if(!Df(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,a)=>{this.events.once("register_error",f=>{this.resetMaxListeners(),a(f)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return a(new Error("HTTP connection is missing or invalid"));s()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const r=vs({id:1,jsonrpc:"2.0",method:"test",params:[]});await Ml(t,Object.assign(Object.assign({},ud),{body:r}))}this.onOpen()}catch(r){const s=this.parseError(r);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?pu(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const s=this.parseError(r),a=s.message||s.toString(),f=ea(t,a);this.events.emit("payload",f)}parseError(t,r=this.url){return lp(t,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>hd&&this.events.setMaxListeners(hd)}}const ld="error",X2="wss://relay.walletconnect.com",Z2="wc",e3="universal_provider",fd=`${Z2}@2:${e3}:`,t3="https://rpc.walletconnect.com/v1/",Ui={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ds=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},hu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,t){(function(){var r,s="4.17.21",a=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",m="Expected a function",v="Invalid `variable` option passed into `_.template`",w="__lodash_hash_undefined__",x=500,R="__lodash_placeholder__",j=1,z=2,$=4,V=1,Z=2,ee=1,ue=2,M=4,B=8,N=16,U=32,O=64,u=128,_=256,Q=512,c=30,d="...",p=800,E=16,y=1,g=2,A=3,F=1/0,W=9007199254740991,P=17976931348623157e292,q=0/0,te=4294967295,re=te-1,ie=te>>>1,ge=[["ary",u],["bind",ee],["bindKey",ue],["curry",B],["curryRight",N],["flip",Q],["partial",U],["partialRight",O],["rearg",_]],le="[object Arguments]",me="[object Array]",J="[object AsyncFunction]",Y="[object Boolean]",H="[object Date]",l="[object DOMException]",L="[object Error]",he="[object Function]",pe="[object GeneratorFunction]",Oe="[object Map]",ze="[object Number]",Ve="[object Null]",De="[object Object]",pt="[object Promise]",gt="[object Proxy]",Me="[object RegExp]",Pe="[object Set]",Ue="[object String]",Le="[object Symbol]",qe="[object Undefined]",Te="[object WeakMap]",Fe="[object WeakSet]",Ie="[object ArrayBuffer]",Ae="[object DataView]",Be="[object Float32Array]",xe="[object Float64Array]",ke="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",Zt="[object Uint16Array]",ur="[object Uint32Array]",Vr=/\b__p \+= '';/g,er=/\b(__p \+=) '' \+/g,ti=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vi=/&(?:amp|lt|gt|quot|#39);/g,Li=/[&<>"']/g,wt=RegExp(vi.source),yt=RegExp(Li.source),Et=/<%-([\s\S]+?)%>/g,St=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lt=/^\w*$/,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,jt=RegExp(It.source),Ot=/^\s+/,Tt=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,Dt=/,? & /,$t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,na=/[()=,{}\[\]\/\s]/,sa=/\\(\\)?/g,oa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Or=/\w*$/,aa=/^[-+]0x[0-9a-f]+$/i,ca=/^0b[01]+$/i,ua=/^\[object .+?Constructor\]$/,ha=/^0o[0-7]+$/i,la=/^(?:0|[1-9]\d*)$/,ri=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,sn=/($^)/,fa=/['\n\r\u2028\u2029\\]/g,on="\\ud800-\\udfff",da="\\u0300-\\u036f",pa="\\ufe20-\\ufe2f",an="\\u20d0-\\u20ff",As=da+pa+an,Rs="\\u2700-\\u27bf",Fr="a-z\\xdf-\\xf6\\xf8-\\xff",ga="\\xac\\xb1\\xd7\\xf7",ya="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_a="\\u2000-\\u206f",va=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cs="A-Z\\xc0-\\xd6\\xd8-\\xde",Ns="\\ufe0e\\ufe0f",Fi=ga+ya+_a+va,Dn="['\u2019]",ji="["+on+"]",$n="["+Fi+"]",Di="["+As+"]",Us="\\d+",ba="["+Rs+"]",Ls="["+Fr+"]",Fs="[^"+on+Fi+Us+Rs+Fr+Cs+"]",cn="\\ud83c[\\udffb-\\udfff]",ma="(?:"+Di+"|"+cn+")",js="[^"+on+"]",un="(?:\\ud83c[\\udde6-\\uddff]){2}",bi="[\\ud800-\\udbff][\\udc00-\\udfff]",_r="["+Cs+"]",Ds="\\u200d",$s="(?:"+Ls+"|"+Fs+")",kr="(?:"+_r+"|"+Fs+")",Ms="(?:"+Dn+"(?:d|ll|m|re|s|t|ve))?",qs="(?:"+Dn+"(?:D|LL|M|RE|S|T|VE))?",Hs=ma+"?",zs="["+Ns+"]?",wa="(?:"+Ds+"(?:"+[js,un,bi].join("|")+")"+zs+Hs+")*",ii="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Bs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ks=zs+Hs+wa,hn="(?:"+[ba,un,bi].join("|")+")"+Ks,Ea="(?:"+[js+Di+"?",Di,un,bi,ji].join("|")+")",Mn=RegExp(Dn,"g"),Sa=RegExp(Di,"g"),ln=RegExp(cn+"(?="+cn+")|"+Ea+Ks,"g"),Vs=RegExp([_r+"?"+Ls+"+"+Ms+"(?="+[$n,_r,"$"].join("|")+")",kr+"+"+qs+"(?="+[$n,_r+$s,"$"].join("|")+")",_r+"?"+$s+"+"+Ms,_r+"+"+qs,Bs,ii,Us,hn].join("|"),"g"),ks=RegExp("["+Ds+on+As+Ns+"]"),$i=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ia=-1,ot={};ot[Be]=ot[xe]=ot[ke]=ot[We]=ot[et]=ot[tt]=ot[Je]=ot[Zt]=ot[ur]=!0,ot[le]=ot[me]=ot[Ie]=ot[Y]=ot[Ae]=ot[H]=ot[L]=ot[he]=ot[Oe]=ot[ze]=ot[De]=ot[Me]=ot[Pe]=ot[Ue]=ot[Te]=!1;var st={};st[le]=st[me]=st[Ie]=st[Ae]=st[Y]=st[H]=st[Be]=st[xe]=st[ke]=st[We]=st[et]=st[Oe]=st[ze]=st[De]=st[Me]=st[Pe]=st[Ue]=st[Le]=st[tt]=st[Je]=st[Zt]=st[ur]=!0,st[L]=st[he]=st[Te]=!1;var T={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},K={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ae={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ye={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,Ce=parseInt,ft=typeof ds=="object"&&ds&&ds.Object===Object&&ds,Mt=typeof self=="object"&&self&&self.Object===Object&&self,Qe=ft||Mt||Function("return this")(),ct=t&&!t.nodeType&&t,At=ct&&!0&&n&&!n.nodeType&&n,hr=At&&At.exports===ct,qt=hr&&ft.process,dt=function(){try{var k=At&&At.require&&At.require("util").types;return k||qt&&qt.binding&&qt.binding("util")}catch{}}(),tr=dt&&dt.isArrayBuffer,jr=dt&&dt.isDate,Pr=dt&&dt.isMap,Gr=dt&&dt.isRegExp,qn=dt&&dt.isSet,Mi=dt&&dt.isTypedArray;function Kt(k,ne,X){switch(X.length){case 0:return k.call(ne);case 1:return k.call(ne,X[0]);case 2:return k.call(ne,X[0],X[1]);case 3:return k.call(ne,X[0],X[1],X[2])}return k.apply(ne,X)}function Dp(k,ne,X,_e){for(var Re=-1,rt=k==null?0:k.length;++Re<rt;){var zt=k[Re];ne(_e,zt,X(zt),k)}return _e}function xr(k,ne){for(var X=-1,_e=k==null?0:k.length;++X<_e&&ne(k[X],X,k)!==!1;);return k}function $p(k,ne){for(var X=k==null?0:k.length;X--&&ne(k[X],X,k)!==!1;);return k}function qu(k,ne){for(var X=-1,_e=k==null?0:k.length;++X<_e;)if(!ne(k[X],X,k))return!1;return!0}function mi(k,ne){for(var X=-1,_e=k==null?0:k.length,Re=0,rt=[];++X<_e;){var zt=k[X];ne(zt,X,k)&&(rt[Re++]=zt)}return rt}function Ws(k,ne){var X=k==null?0:k.length;return!!X&&fn(k,ne,0)>-1}function Oa(k,ne,X){for(var _e=-1,Re=k==null?0:k.length;++_e<Re;)if(X(ne,k[_e]))return!0;return!1}function vt(k,ne){for(var X=-1,_e=k==null?0:k.length,Re=Array(_e);++X<_e;)Re[X]=ne(k[X],X,k);return Re}function wi(k,ne){for(var X=-1,_e=ne.length,Re=k.length;++X<_e;)k[Re+X]=ne[X];return k}function Pa(k,ne,X,_e){var Re=-1,rt=k==null?0:k.length;for(_e&&rt&&(X=k[++Re]);++Re<rt;)X=ne(X,k[Re],Re,k);return X}function Mp(k,ne,X,_e){var Re=k==null?0:k.length;for(_e&&Re&&(X=k[--Re]);Re--;)X=ne(X,k[Re],Re,k);return X}function xa(k,ne){for(var X=-1,_e=k==null?0:k.length;++X<_e;)if(ne(k[X],X,k))return!0;return!1}var qp=Ta("length");function Hp(k){return k.split("")}function zp(k){return k.match($t)||[]}function Hu(k,ne,X){var _e;return X(k,function(Re,rt,zt){if(ne(Re,rt,zt))return _e=rt,!1}),_e}function Ys(k,ne,X,_e){for(var Re=k.length,rt=X+(_e?1:-1);_e?rt--:++rt<Re;)if(ne(k[rt],rt,k))return rt;return-1}function fn(k,ne,X){return ne===ne?eg(k,ne,X):Ys(k,zu,X)}function Bp(k,ne,X,_e){for(var Re=X-1,rt=k.length;++Re<rt;)if(_e(k[Re],ne))return Re;return-1}function zu(k){return k!==k}function Bu(k,ne){var X=k==null?0:k.length;return X?Ra(k,ne)/X:q}function Ta(k){return function(ne){return ne==null?r:ne[k]}}function Aa(k){return function(ne){return k==null?r:k[ne]}}function Ku(k,ne,X,_e,Re){return Re(k,function(rt,zt,ut){X=_e?(_e=!1,rt):ne(X,rt,zt,ut)}),X}function Kp(k,ne){var X=k.length;for(k.sort(ne);X--;)k[X]=k[X].value;return k}function Ra(k,ne){for(var X,_e=-1,Re=k.length;++_e<Re;){var rt=ne(k[_e]);rt!==r&&(X=X===r?rt:X+rt)}return X}function Ca(k,ne){for(var X=-1,_e=Array(k);++X<k;)_e[X]=ne(X);return _e}function Vp(k,ne){return vt(ne,function(X){return[X,k[X]]})}function Vu(k){return k&&k.slice(0,Yu(k)+1).replace(Ot,"")}function vr(k){return function(ne){return k(ne)}}function Na(k,ne){return vt(ne,function(X){return k[X]})}function Hn(k,ne){return k.has(ne)}function ku(k,ne){for(var X=-1,_e=k.length;++X<_e&&fn(ne,k[X],0)>-1;);return X}function Gu(k,ne){for(var X=k.length;X--&&fn(ne,k[X],0)>-1;);return X}function kp(k,ne){for(var X=k.length,_e=0;X--;)k[X]===ne&&++_e;return _e}var Gp=Aa(T),Wp=Aa(K);function Yp(k){return"\\"+ye[k]}function Jp(k,ne){return k==null?r:k[ne]}function dn(k){return ks.test(k)}function Qp(k){return $i.test(k)}function Xp(k){for(var ne,X=[];!(ne=k.next()).done;)X.push(ne.value);return X}function Ua(k){var ne=-1,X=Array(k.size);return k.forEach(function(_e,Re){X[++ne]=[Re,_e]}),X}function Wu(k,ne){return function(X){return k(ne(X))}}function Ei(k,ne){for(var X=-1,_e=k.length,Re=0,rt=[];++X<_e;){var zt=k[X];(zt===ne||zt===R)&&(k[X]=R,rt[Re++]=X)}return rt}function Js(k){var ne=-1,X=Array(k.size);return k.forEach(function(_e){X[++ne]=_e}),X}function Zp(k){var ne=-1,X=Array(k.size);return k.forEach(function(_e){X[++ne]=[_e,_e]}),X}function eg(k,ne,X){for(var _e=X-1,Re=k.length;++_e<Re;)if(k[_e]===ne)return _e;return-1}function tg(k,ne,X){for(var _e=X+1;_e--;)if(k[_e]===ne)return _e;return _e}function pn(k){return dn(k)?ig(k):qp(k)}function Dr(k){return dn(k)?ng(k):Hp(k)}function Yu(k){for(var ne=k.length;ne--&&Tt.test(k.charAt(ne)););return ne}var rg=Aa(ae);function ig(k){for(var ne=ln.lastIndex=0;ln.test(k);)++ne;return ne}function ng(k){return k.match(ln)||[]}function sg(k){return k.match(Vs)||[]}var og=function k(ne){ne=ne==null?Qe:gn.defaults(Qe.Object(),ne,gn.pick(Qe,Gs));var X=ne.Array,_e=ne.Date,Re=ne.Error,rt=ne.Function,zt=ne.Math,ut=ne.Object,La=ne.RegExp,ag=ne.String,Tr=ne.TypeError,Qs=X.prototype,cg=rt.prototype,yn=ut.prototype,Xs=ne["__core-js_shared__"],Zs=cg.toString,nt=yn.hasOwnProperty,ug=0,Ju=function(){var e=/[^.]+$/.exec(Xs&&Xs.keys&&Xs.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),eo=yn.toString,hg=Zs.call(ut),lg=Qe._,fg=La("^"+Zs.call(nt).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),to=hr?ne.Buffer:r,Si=ne.Symbol,ro=ne.Uint8Array,Qu=to?to.allocUnsafe:r,io=Wu(ut.getPrototypeOf,ut),Xu=ut.create,Zu=yn.propertyIsEnumerable,no=Qs.splice,eh=Si?Si.isConcatSpreadable:r,zn=Si?Si.iterator:r,qi=Si?Si.toStringTag:r,so=function(){try{var e=Vi(ut,"defineProperty");return e({},"",{}),e}catch{}}(),dg=ne.clearTimeout!==Qe.clearTimeout&&ne.clearTimeout,pg=_e&&_e.now!==Qe.Date.now&&_e.now,gg=ne.setTimeout!==Qe.setTimeout&&ne.setTimeout,oo=zt.ceil,ao=zt.floor,Fa=ut.getOwnPropertySymbols,yg=to?to.isBuffer:r,th=ne.isFinite,_g=Qs.join,vg=Wu(ut.keys,ut),Bt=zt.max,Yt=zt.min,bg=_e.now,mg=ne.parseInt,rh=zt.random,wg=Qs.reverse,ja=Vi(ne,"DataView"),Bn=Vi(ne,"Map"),Da=Vi(ne,"Promise"),_n=Vi(ne,"Set"),Kn=Vi(ne,"WeakMap"),Vn=Vi(ut,"create"),co=Kn&&new Kn,vn={},Eg=ki(ja),Sg=ki(Bn),Ig=ki(Da),Og=ki(_n),Pg=ki(Kn),uo=Si?Si.prototype:r,kn=uo?uo.valueOf:r,ih=uo?uo.toString:r;function S(e){if(xt(e)&&!Ne(e)&&!(e instanceof Ye)){if(e instanceof Ar)return e;if(nt.call(e,"__wrapped__"))return nl(e)}return new Ar(e)}var bn=function(){function e(){}return function(i){if(!mt(i))return{};if(Xu)return Xu(i);e.prototype=i;var o=new e;return e.prototype=r,o}}();function ho(){}function Ar(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}S.templateSettings={escape:Et,evaluate:St,interpolate:bt,variable:"",imports:{_:S}},S.prototype=ho.prototype,S.prototype.constructor=S,Ar.prototype=bn(ho.prototype),Ar.prototype.constructor=Ar;function Ye(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function xg(){var e=new Ye(this.__wrapped__);return e.__actions__=lr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=lr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=lr(this.__views__),e}function Tg(){if(this.__filtered__){var e=new Ye(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Ag(){var e=this.__wrapped__.value(),i=this.__dir__,o=Ne(e),h=i<0,b=o?e.length:0,I=H0(0,b,this.__views__),C=I.start,D=I.end,G=D-C,se=h?D:C-1,oe=this.__iteratees__,ce=oe.length,fe=0,ve=Yt(G,this.__takeCount__);if(!o||!h&&b==G&&ve==G)return xh(e,this.__actions__);var Ee=[];e:for(;G--&&fe<ve;){se+=i;for(var He=-1,Se=e[se];++He<ce;){var Ge=oe[He],Xe=Ge.iteratee,wr=Ge.type,nr=Xe(Se);if(wr==g)Se=nr;else if(!nr){if(wr==y)continue e;break e}}Ee[fe++]=Se}return Ee}Ye.prototype=bn(ho.prototype),Ye.prototype.constructor=Ye;function Hi(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var h=e[i];this.set(h[0],h[1])}}function Rg(){this.__data__=Vn?Vn(null):{},this.size=0}function Cg(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function Ng(e){var i=this.__data__;if(Vn){var o=i[e];return o===w?r:o}return nt.call(i,e)?i[e]:r}function Ug(e){var i=this.__data__;return Vn?i[e]!==r:nt.call(i,e)}function Lg(e,i){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=Vn&&i===r?w:i,this}Hi.prototype.clear=Rg,Hi.prototype.delete=Cg,Hi.prototype.get=Ng,Hi.prototype.has=Ug,Hi.prototype.set=Lg;function ni(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var h=e[i];this.set(h[0],h[1])}}function Fg(){this.__data__=[],this.size=0}function jg(e){var i=this.__data__,o=lo(i,e);if(o<0)return!1;var h=i.length-1;return o==h?i.pop():no.call(i,o,1),--this.size,!0}function Dg(e){var i=this.__data__,o=lo(i,e);return o<0?r:i[o][1]}function $g(e){return lo(this.__data__,e)>-1}function Mg(e,i){var o=this.__data__,h=lo(o,e);return h<0?(++this.size,o.push([e,i])):o[h][1]=i,this}ni.prototype.clear=Fg,ni.prototype.delete=jg,ni.prototype.get=Dg,ni.prototype.has=$g,ni.prototype.set=Mg;function si(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var h=e[i];this.set(h[0],h[1])}}function qg(){this.size=0,this.__data__={hash:new Hi,map:new(Bn||ni),string:new Hi}}function Hg(e){var i=Io(this,e).delete(e);return this.size-=i?1:0,i}function zg(e){return Io(this,e).get(e)}function Bg(e){return Io(this,e).has(e)}function Kg(e,i){var o=Io(this,e),h=o.size;return o.set(e,i),this.size+=o.size==h?0:1,this}si.prototype.clear=qg,si.prototype.delete=Hg,si.prototype.get=zg,si.prototype.has=Bg,si.prototype.set=Kg;function zi(e){var i=-1,o=e==null?0:e.length;for(this.__data__=new si;++i<o;)this.add(e[i])}function Vg(e){return this.__data__.set(e,w),this}function kg(e){return this.__data__.has(e)}zi.prototype.add=zi.prototype.push=Vg,zi.prototype.has=kg;function $r(e){var i=this.__data__=new ni(e);this.size=i.size}function Gg(){this.__data__=new ni,this.size=0}function Wg(e){var i=this.__data__,o=i.delete(e);return this.size=i.size,o}function Yg(e){return this.__data__.get(e)}function Jg(e){return this.__data__.has(e)}function Qg(e,i){var o=this.__data__;if(o instanceof ni){var h=o.__data__;if(!Bn||h.length<a-1)return h.push([e,i]),this.size=++o.size,this;o=this.__data__=new si(h)}return o.set(e,i),this.size=o.size,this}$r.prototype.clear=Gg,$r.prototype.delete=Wg,$r.prototype.get=Yg,$r.prototype.has=Jg,$r.prototype.set=Qg;function nh(e,i){var o=Ne(e),h=!o&&Gi(e),b=!o&&!h&&Ti(e),I=!o&&!h&&!b&&Sn(e),C=o||h||b||I,D=C?Ca(e.length,ag):[],G=D.length;for(var se in e)(i||nt.call(e,se))&&!(C&&(se=="length"||b&&(se=="offset"||se=="parent")||I&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||ui(se,G)))&&D.push(se);return D}function sh(e){var i=e.length;return i?e[Wa(0,i-1)]:r}function Xg(e,i){return Oo(lr(e),Bi(i,0,e.length))}function Zg(e){return Oo(lr(e))}function $a(e,i,o){(o!==r&&!Mr(e[i],o)||o===r&&!(i in e))&&oi(e,i,o)}function Gn(e,i,o){var h=e[i];(!(nt.call(e,i)&&Mr(h,o))||o===r&&!(i in e))&&oi(e,i,o)}function lo(e,i){for(var o=e.length;o--;)if(Mr(e[o][0],i))return o;return-1}function e0(e,i,o,h){return Ii(e,function(b,I,C){i(h,b,o(b),C)}),h}function oh(e,i){return e&&Yr(i,Vt(i),e)}function t0(e,i){return e&&Yr(i,dr(i),e)}function oi(e,i,o){i=="__proto__"&&so?so(e,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[i]=o}function Ma(e,i){for(var o=-1,h=i.length,b=X(h),I=e==null;++o<h;)b[o]=I?r:bc(e,i[o]);return b}function Bi(e,i,o){return e===e&&(o!==r&&(e=e<=o?e:o),i!==r&&(e=e>=i?e:i)),e}function Rr(e,i,o,h,b,I){var C,D=i&j,G=i&z,se=i&$;if(o&&(C=b?o(e,h,b,I):o(e)),C!==r)return C;if(!mt(e))return e;var oe=Ne(e);if(oe){if(C=B0(e),!D)return lr(e,C)}else{var ce=Jt(e),fe=ce==he||ce==pe;if(Ti(e))return Rh(e,D);if(ce==De||ce==le||fe&&!b){if(C=G||fe?{}:Yh(e),!D)return G?N0(e,t0(C,e)):C0(e,oh(C,e))}else{if(!st[ce])return b?e:{};C=K0(e,ce,D)}}I||(I=new $r);var ve=I.get(e);if(ve)return ve;I.set(e,C),Il(e)?e.forEach(function(Se){C.add(Rr(Se,i,o,Se,e,I))}):El(e)&&e.forEach(function(Se,Ge){C.set(Ge,Rr(Se,i,o,Ge,e,I))});var Ee=se?G?sc:nc:G?dr:Vt,He=oe?r:Ee(e);return xr(He||e,function(Se,Ge){He&&(Ge=Se,Se=e[Ge]),Gn(C,Ge,Rr(Se,i,o,Ge,e,I))}),C}function r0(e){var i=Vt(e);return function(o){return ah(o,e,i)}}function ah(e,i,o){var h=o.length;if(e==null)return!h;for(e=ut(e);h--;){var b=o[h],I=i[b],C=e[b];if(C===r&&!(b in e)||!I(C))return!1}return!0}function ch(e,i,o){if(typeof e!="function")throw new Tr(m);return es(function(){e.apply(r,o)},i)}function Wn(e,i,o,h){var b=-1,I=Ws,C=!0,D=e.length,G=[],se=i.length;if(!D)return G;o&&(i=vt(i,vr(o))),h?(I=Oa,C=!1):i.length>=a&&(I=Hn,C=!1,i=new zi(i));e:for(;++b<D;){var oe=e[b],ce=o==null?oe:o(oe);if(oe=h||oe!==0?oe:0,C&&ce===ce){for(var fe=se;fe--;)if(i[fe]===ce)continue e;G.push(oe)}else I(i,ce,h)||G.push(oe)}return G}var Ii=Fh(Wr),uh=Fh(Ha,!0);function i0(e,i){var o=!0;return Ii(e,function(h,b,I){return o=!!i(h,b,I),o}),o}function fo(e,i,o){for(var h=-1,b=e.length;++h<b;){var I=e[h],C=i(I);if(C!=null&&(D===r?C===C&&!mr(C):o(C,D)))var D=C,G=I}return G}function n0(e,i,o,h){var b=e.length;for(o=$e(o),o<0&&(o=-o>b?0:b+o),h=h===r||h>b?b:$e(h),h<0&&(h+=b),h=o>h?0:Pl(h);o<h;)e[o++]=i;return e}function hh(e,i){var o=[];return Ii(e,function(h,b,I){i(h,b,I)&&o.push(h)}),o}function Gt(e,i,o,h,b){var I=-1,C=e.length;for(o||(o=k0),b||(b=[]);++I<C;){var D=e[I];i>0&&o(D)?i>1?Gt(D,i-1,o,h,b):wi(b,D):h||(b[b.length]=D)}return b}var qa=jh(),lh=jh(!0);function Wr(e,i){return e&&qa(e,i,Vt)}function Ha(e,i){return e&&lh(e,i,Vt)}function po(e,i){return mi(i,function(o){return hi(e[o])})}function Ki(e,i){i=Pi(i,e);for(var o=0,h=i.length;e!=null&&o<h;)e=e[Jr(i[o++])];return o&&o==h?e:r}function fh(e,i,o){var h=i(e);return Ne(e)?h:wi(h,o(e))}function rr(e){return e==null?e===r?qe:Ve:qi&&qi in ut(e)?q0(e):Z0(e)}function za(e,i){return e>i}function s0(e,i){return e!=null&&nt.call(e,i)}function o0(e,i){return e!=null&&i in ut(e)}function a0(e,i,o){return e>=Yt(i,o)&&e<Bt(i,o)}function Ba(e,i,o){for(var h=o?Oa:Ws,b=e[0].length,I=e.length,C=I,D=X(I),G=1/0,se=[];C--;){var oe=e[C];C&&i&&(oe=vt(oe,vr(i))),G=Yt(oe.length,G),D[C]=!o&&(i||b>=120&&oe.length>=120)?new zi(C&&oe):r}oe=e[0];var ce=-1,fe=D[0];e:for(;++ce<b&&se.length<G;){var ve=oe[ce],Ee=i?i(ve):ve;if(ve=o||ve!==0?ve:0,!(fe?Hn(fe,Ee):h(se,Ee,o))){for(C=I;--C;){var He=D[C];if(!(He?Hn(He,Ee):h(e[C],Ee,o)))continue e}fe&&fe.push(Ee),se.push(ve)}}return se}function c0(e,i,o,h){return Wr(e,function(b,I,C){i(h,o(b),I,C)}),h}function Yn(e,i,o){i=Pi(i,e),e=Zh(e,i);var h=e==null?e:e[Jr(Nr(i))];return h==null?r:Kt(h,e,o)}function dh(e){return xt(e)&&rr(e)==le}function u0(e){return xt(e)&&rr(e)==Ie}function h0(e){return xt(e)&&rr(e)==H}function Jn(e,i,o,h,b){return e===i?!0:e==null||i==null||!xt(e)&&!xt(i)?e!==e&&i!==i:l0(e,i,o,h,Jn,b)}function l0(e,i,o,h,b,I){var C=Ne(e),D=Ne(i),G=C?me:Jt(e),se=D?me:Jt(i);G=G==le?De:G,se=se==le?De:se;var oe=G==De,ce=se==De,fe=G==se;if(fe&&Ti(e)){if(!Ti(i))return!1;C=!0,oe=!1}if(fe&&!oe)return I||(I=new $r),C||Sn(e)?kh(e,i,o,h,b,I):$0(e,i,G,o,h,b,I);if(!(o&V)){var ve=oe&&nt.call(e,"__wrapped__"),Ee=ce&&nt.call(i,"__wrapped__");if(ve||Ee){var He=ve?e.value():e,Se=Ee?i.value():i;return I||(I=new $r),b(He,Se,o,h,I)}}return fe?(I||(I=new $r),M0(e,i,o,h,b,I)):!1}function f0(e){return xt(e)&&Jt(e)==Oe}function Ka(e,i,o,h){var b=o.length,I=b,C=!h;if(e==null)return!I;for(e=ut(e);b--;){var D=o[b];if(C&&D[2]?D[1]!==e[D[0]]:!(D[0]in e))return!1}for(;++b<I;){D=o[b];var G=D[0],se=e[G],oe=D[1];if(C&&D[2]){if(se===r&&!(G in e))return!1}else{var ce=new $r;if(h)var fe=h(se,oe,G,e,i,ce);if(!(fe===r?Jn(oe,se,V|Z,h,ce):fe))return!1}}return!0}function ph(e){if(!mt(e)||W0(e))return!1;var i=hi(e)?fg:ua;return i.test(ki(e))}function d0(e){return xt(e)&&rr(e)==Me}function p0(e){return xt(e)&&Jt(e)==Pe}function g0(e){return xt(e)&&Co(e.length)&&!!ot[rr(e)]}function gh(e){return typeof e=="function"?e:e==null?pr:typeof e=="object"?Ne(e)?vh(e[0],e[1]):_h(e):Dl(e)}function Va(e){if(!Zn(e))return vg(e);var i=[];for(var o in ut(e))nt.call(e,o)&&o!="constructor"&&i.push(o);return i}function y0(e){if(!mt(e))return X0(e);var i=Zn(e),o=[];for(var h in e)h=="constructor"&&(i||!nt.call(e,h))||o.push(h);return o}function ka(e,i){return e<i}function yh(e,i){var o=-1,h=fr(e)?X(e.length):[];return Ii(e,function(b,I,C){h[++o]=i(b,I,C)}),h}function _h(e){var i=ac(e);return i.length==1&&i[0][2]?Qh(i[0][0],i[0][1]):function(o){return o===e||Ka(o,e,i)}}function vh(e,i){return uc(e)&&Jh(i)?Qh(Jr(e),i):function(o){var h=bc(o,e);return h===r&&h===i?mc(o,e):Jn(i,h,V|Z)}}function go(e,i,o,h,b){e!==i&&qa(i,function(I,C){if(b||(b=new $r),mt(I))_0(e,i,C,o,go,h,b);else{var D=h?h(lc(e,C),I,C+"",e,i,b):r;D===r&&(D=I),$a(e,C,D)}},dr)}function _0(e,i,o,h,b,I,C){var D=lc(e,o),G=lc(i,o),se=C.get(G);if(se){$a(e,o,se);return}var oe=I?I(D,G,o+"",e,i,C):r,ce=oe===r;if(ce){var fe=Ne(G),ve=!fe&&Ti(G),Ee=!fe&&!ve&&Sn(G);oe=G,fe||ve||Ee?Ne(D)?oe=D:Rt(D)?oe=lr(D):ve?(ce=!1,oe=Rh(G,!0)):Ee?(ce=!1,oe=Ch(G,!0)):oe=[]:ts(G)||Gi(G)?(oe=D,Gi(D)?oe=xl(D):(!mt(D)||hi(D))&&(oe=Yh(G))):ce=!1}ce&&(C.set(G,oe),b(oe,G,h,I,C),C.delete(G)),$a(e,o,oe)}function bh(e,i){var o=e.length;if(o)return i+=i<0?o:0,ui(i,o)?e[i]:r}function mh(e,i,o){i.length?i=vt(i,function(I){return Ne(I)?function(C){return Ki(C,I.length===1?I[0]:I)}:I}):i=[pr];var h=-1;i=vt(i,vr(we()));var b=yh(e,function(I,C,D){var G=vt(i,function(se){return se(I)});return{criteria:G,index:++h,value:I}});return Kp(b,function(I,C){return R0(I,C,o)})}function v0(e,i){return wh(e,i,function(o,h){return mc(e,h)})}function wh(e,i,o){for(var h=-1,b=i.length,I={};++h<b;){var C=i[h],D=Ki(e,C);o(D,C)&&Qn(I,Pi(C,e),D)}return I}function b0(e){return function(i){return Ki(i,e)}}function Ga(e,i,o,h){var b=h?Bp:fn,I=-1,C=i.length,D=e;for(e===i&&(i=lr(i)),o&&(D=vt(e,vr(o)));++I<C;)for(var G=0,se=i[I],oe=o?o(se):se;(G=b(D,oe,G,h))>-1;)D!==e&&no.call(D,G,1),no.call(e,G,1);return e}function Eh(e,i){for(var o=e?i.length:0,h=o-1;o--;){var b=i[o];if(o==h||b!==I){var I=b;ui(b)?no.call(e,b,1):Qa(e,b)}}return e}function Wa(e,i){return e+ao(rh()*(i-e+1))}function m0(e,i,o,h){for(var b=-1,I=Bt(oo((i-e)/(o||1)),0),C=X(I);I--;)C[h?I:++b]=e,e+=o;return C}function Ya(e,i){var o="";if(!e||i<1||i>W)return o;do i%2&&(o+=e),i=ao(i/2),i&&(e+=e);while(i);return o}function Ke(e,i){return fc(Xh(e,i,pr),e+"")}function w0(e){return sh(In(e))}function E0(e,i){var o=In(e);return Oo(o,Bi(i,0,o.length))}function Qn(e,i,o,h){if(!mt(e))return e;i=Pi(i,e);for(var b=-1,I=i.length,C=I-1,D=e;D!=null&&++b<I;){var G=Jr(i[b]),se=o;if(G==="__proto__"||G==="constructor"||G==="prototype")return e;if(b!=C){var oe=D[G];se=h?h(oe,G,D):r,se===r&&(se=mt(oe)?oe:ui(i[b+1])?[]:{})}Gn(D,G,se),D=D[G]}return e}var Sh=co?function(e,i){return co.set(e,i),e}:pr,S0=so?function(e,i){return so(e,"toString",{configurable:!0,enumerable:!1,value:Ec(i),writable:!0})}:pr;function I0(e){return Oo(In(e))}function Cr(e,i,o){var h=-1,b=e.length;i<0&&(i=-i>b?0:b+i),o=o>b?b:o,o<0&&(o+=b),b=i>o?0:o-i>>>0,i>>>=0;for(var I=X(b);++h<b;)I[h]=e[h+i];return I}function O0(e,i){var o;return Ii(e,function(h,b,I){return o=i(h,b,I),!o}),!!o}function yo(e,i,o){var h=0,b=e==null?h:e.length;if(typeof i=="number"&&i===i&&b<=ie){for(;h<b;){var I=h+b>>>1,C=e[I];C!==null&&!mr(C)&&(o?C<=i:C<i)?h=I+1:b=I}return b}return Ja(e,i,pr,o)}function Ja(e,i,o,h){var b=0,I=e==null?0:e.length;if(I===0)return 0;i=o(i);for(var C=i!==i,D=i===null,G=mr(i),se=i===r;b<I;){var oe=ao((b+I)/2),ce=o(e[oe]),fe=ce!==r,ve=ce===null,Ee=ce===ce,He=mr(ce);if(C)var Se=h||Ee;else se?Se=Ee&&(h||fe):D?Se=Ee&&fe&&(h||!ve):G?Se=Ee&&fe&&!ve&&(h||!He):ve||He?Se=!1:Se=h?ce<=i:ce<i;Se?b=oe+1:I=oe}return Yt(I,re)}function Ih(e,i){for(var o=-1,h=e.length,b=0,I=[];++o<h;){var C=e[o],D=i?i(C):C;if(!o||!Mr(D,G)){var G=D;I[b++]=C===0?0:C}}return I}function Oh(e){return typeof e=="number"?e:mr(e)?q:+e}function br(e){if(typeof e=="string")return e;if(Ne(e))return vt(e,br)+"";if(mr(e))return ih?ih.call(e):"";var i=e+"";return i=="0"&&1/e==-F?"-0":i}function Oi(e,i,o){var h=-1,b=Ws,I=e.length,C=!0,D=[],G=D;if(o)C=!1,b=Oa;else if(I>=a){var se=i?null:j0(e);if(se)return Js(se);C=!1,b=Hn,G=new zi}else G=i?[]:D;e:for(;++h<I;){var oe=e[h],ce=i?i(oe):oe;if(oe=o||oe!==0?oe:0,C&&ce===ce){for(var fe=G.length;fe--;)if(G[fe]===ce)continue e;i&&G.push(ce),D.push(oe)}else b(G,ce,o)||(G!==D&&G.push(ce),D.push(oe))}return D}function Qa(e,i){return i=Pi(i,e),e=Zh(e,i),e==null||delete e[Jr(Nr(i))]}function Ph(e,i,o,h){return Qn(e,i,o(Ki(e,i)),h)}function _o(e,i,o,h){for(var b=e.length,I=h?b:-1;(h?I--:++I<b)&&i(e[I],I,e););return o?Cr(e,h?0:I,h?I+1:b):Cr(e,h?I+1:0,h?b:I)}function xh(e,i){var o=e;return o instanceof Ye&&(o=o.value()),Pa(i,function(h,b){return b.func.apply(b.thisArg,wi([h],b.args))},o)}function Xa(e,i,o){var h=e.length;if(h<2)return h?Oi(e[0]):[];for(var b=-1,I=X(h);++b<h;)for(var C=e[b],D=-1;++D<h;)D!=b&&(I[b]=Wn(I[b]||C,e[D],i,o));return Oi(Gt(I,1),i,o)}function Th(e,i,o){for(var h=-1,b=e.length,I=i.length,C={};++h<b;){var D=h<I?i[h]:r;o(C,e[h],D)}return C}function Za(e){return Rt(e)?e:[]}function ec(e){return typeof e=="function"?e:pr}function Pi(e,i){return Ne(e)?e:uc(e,i)?[e]:il(it(e))}var P0=Ke;function xi(e,i,o){var h=e.length;return o=o===r?h:o,!i&&o>=h?e:Cr(e,i,o)}var Ah=dg||function(e){return Qe.clearTimeout(e)};function Rh(e,i){if(i)return e.slice();var o=e.length,h=Qu?Qu(o):new e.constructor(o);return e.copy(h),h}function tc(e){var i=new e.constructor(e.byteLength);return new ro(i).set(new ro(e)),i}function x0(e,i){var o=i?tc(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}function T0(e){var i=new e.constructor(e.source,Or.exec(e));return i.lastIndex=e.lastIndex,i}function A0(e){return kn?ut(kn.call(e)):{}}function Ch(e,i){var o=i?tc(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}function Nh(e,i){if(e!==i){var o=e!==r,h=e===null,b=e===e,I=mr(e),C=i!==r,D=i===null,G=i===i,se=mr(i);if(!D&&!se&&!I&&e>i||I&&C&&G&&!D&&!se||h&&C&&G||!o&&G||!b)return 1;if(!h&&!I&&!se&&e<i||se&&o&&b&&!h&&!I||D&&o&&b||!C&&b||!G)return-1}return 0}function R0(e,i,o){for(var h=-1,b=e.criteria,I=i.criteria,C=b.length,D=o.length;++h<C;){var G=Nh(b[h],I[h]);if(G){if(h>=D)return G;var se=o[h];return G*(se=="desc"?-1:1)}}return e.index-i.index}function Uh(e,i,o,h){for(var b=-1,I=e.length,C=o.length,D=-1,G=i.length,se=Bt(I-C,0),oe=X(G+se),ce=!h;++D<G;)oe[D]=i[D];for(;++b<C;)(ce||b<I)&&(oe[o[b]]=e[b]);for(;se--;)oe[D++]=e[b++];return oe}function Lh(e,i,o,h){for(var b=-1,I=e.length,C=-1,D=o.length,G=-1,se=i.length,oe=Bt(I-D,0),ce=X(oe+se),fe=!h;++b<oe;)ce[b]=e[b];for(var ve=b;++G<se;)ce[ve+G]=i[G];for(;++C<D;)(fe||b<I)&&(ce[ve+o[C]]=e[b++]);return ce}function lr(e,i){var o=-1,h=e.length;for(i||(i=X(h));++o<h;)i[o]=e[o];return i}function Yr(e,i,o,h){var b=!o;o||(o={});for(var I=-1,C=i.length;++I<C;){var D=i[I],G=h?h(o[D],e[D],D,o,e):r;G===r&&(G=e[D]),b?oi(o,D,G):Gn(o,D,G)}return o}function C0(e,i){return Yr(e,cc(e),i)}function N0(e,i){return Yr(e,Gh(e),i)}function vo(e,i){return function(o,h){var b=Ne(o)?Dp:e0,I=i?i():{};return b(o,e,we(h,2),I)}}function mn(e){return Ke(function(i,o){var h=-1,b=o.length,I=b>1?o[b-1]:r,C=b>2?o[2]:r;for(I=e.length>3&&typeof I=="function"?(b--,I):r,C&&ir(o[0],o[1],C)&&(I=b<3?r:I,b=1),i=ut(i);++h<b;){var D=o[h];D&&e(i,D,h,I)}return i})}function Fh(e,i){return function(o,h){if(o==null)return o;if(!fr(o))return e(o,h);for(var b=o.length,I=i?b:-1,C=ut(o);(i?I--:++I<b)&&h(C[I],I,C)!==!1;);return o}}function jh(e){return function(i,o,h){for(var b=-1,I=ut(i),C=h(i),D=C.length;D--;){var G=C[e?D:++b];if(o(I[G],G,I)===!1)break}return i}}function U0(e,i,o){var h=i&ee,b=Xn(e);function I(){var C=this&&this!==Qe&&this instanceof I?b:e;return C.apply(h?o:this,arguments)}return I}function Dh(e){return function(i){i=it(i);var o=dn(i)?Dr(i):r,h=o?o[0]:i.charAt(0),b=o?xi(o,1).join(""):i.slice(1);return h[e]()+b}}function wn(e){return function(i){return Pa(Fl(Ll(i).replace(Mn,"")),e,"")}}function Xn(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var o=bn(e.prototype),h=e.apply(o,i);return mt(h)?h:o}}function L0(e,i,o){var h=Xn(e);function b(){for(var I=arguments.length,C=X(I),D=I,G=En(b);D--;)C[D]=arguments[D];var se=I<3&&C[0]!==G&&C[I-1]!==G?[]:Ei(C,G);if(I-=se.length,I<o)return zh(e,i,bo,b.placeholder,r,C,se,r,r,o-I);var oe=this&&this!==Qe&&this instanceof b?h:e;return Kt(oe,this,C)}return b}function $h(e){return function(i,o,h){var b=ut(i);if(!fr(i)){var I=we(o,3);i=Vt(i),o=function(D){return I(b[D],D,b)}}var C=e(i,o,h);return C>-1?b[I?i[C]:C]:r}}function Mh(e){return ci(function(i){var o=i.length,h=o,b=Ar.prototype.thru;for(e&&i.reverse();h--;){var I=i[h];if(typeof I!="function")throw new Tr(m);if(b&&!C&&So(I)=="wrapper")var C=new Ar([],!0)}for(h=C?h:o;++h<o;){I=i[h];var D=So(I),G=D=="wrapper"?oc(I):r;G&&hc(G[0])&&G[1]==(u|B|U|_)&&!G[4].length&&G[9]==1?C=C[So(G[0])].apply(C,G[3]):C=I.length==1&&hc(I)?C[D]():C.thru(I)}return function(){var se=arguments,oe=se[0];if(C&&se.length==1&&Ne(oe))return C.plant(oe).value();for(var ce=0,fe=o?i[ce].apply(this,se):oe;++ce<o;)fe=i[ce].call(this,fe);return fe}})}function bo(e,i,o,h,b,I,C,D,G,se){var oe=i&u,ce=i&ee,fe=i&ue,ve=i&(B|N),Ee=i&Q,He=fe?r:Xn(e);function Se(){for(var Ge=arguments.length,Xe=X(Ge),wr=Ge;wr--;)Xe[wr]=arguments[wr];if(ve)var nr=En(Se),Er=kp(Xe,nr);if(h&&(Xe=Uh(Xe,h,b,ve)),I&&(Xe=Lh(Xe,I,C,ve)),Ge-=Er,ve&&Ge<se){var Ct=Ei(Xe,nr);return zh(e,i,bo,Se.placeholder,o,Xe,Ct,D,G,se-Ge)}var qr=ce?o:this,fi=fe?qr[e]:e;return Ge=Xe.length,D?Xe=ey(Xe,D):Ee&&Ge>1&&Xe.reverse(),oe&&G<Ge&&(Xe.length=G),this&&this!==Qe&&this instanceof Se&&(fi=He||Xn(fi)),fi.apply(qr,Xe)}return Se}function qh(e,i){return function(o,h){return c0(o,e,i(h),{})}}function mo(e,i){return function(o,h){var b;if(o===r&&h===r)return i;if(o!==r&&(b=o),h!==r){if(b===r)return h;typeof o=="string"||typeof h=="string"?(o=br(o),h=br(h)):(o=Oh(o),h=Oh(h)),b=e(o,h)}return b}}function rc(e){return ci(function(i){return i=vt(i,vr(we())),Ke(function(o){var h=this;return e(i,function(b){return Kt(b,h,o)})})})}function wo(e,i){i=i===r?" ":br(i);var o=i.length;if(o<2)return o?Ya(i,e):i;var h=Ya(i,oo(e/pn(i)));return dn(i)?xi(Dr(h),0,e).join(""):h.slice(0,e)}function F0(e,i,o,h){var b=i&ee,I=Xn(e);function C(){for(var D=-1,G=arguments.length,se=-1,oe=h.length,ce=X(oe+G),fe=this&&this!==Qe&&this instanceof C?I:e;++se<oe;)ce[se]=h[se];for(;G--;)ce[se++]=arguments[++D];return Kt(fe,b?o:this,ce)}return C}function Hh(e){return function(i,o,h){return h&&typeof h!="number"&&ir(i,o,h)&&(o=h=r),i=li(i),o===r?(o=i,i=0):o=li(o),h=h===r?i<o?1:-1:li(h),m0(i,o,h,e)}}function Eo(e){return function(i,o){return typeof i=="string"&&typeof o=="string"||(i=Ur(i),o=Ur(o)),e(i,o)}}function zh(e,i,o,h,b,I,C,D,G,se){var oe=i&B,ce=oe?C:r,fe=oe?r:C,ve=oe?I:r,Ee=oe?r:I;i|=oe?U:O,i&=~(oe?O:U),i&M||(i&=~(ee|ue));var He=[e,i,b,ve,ce,Ee,fe,D,G,se],Se=o.apply(r,He);return hc(e)&&el(Se,He),Se.placeholder=h,tl(Se,e,i)}function ic(e){var i=zt[e];return function(o,h){if(o=Ur(o),h=h==null?0:Yt($e(h),292),h&&th(o)){var b=(it(o)+"e").split("e"),I=i(b[0]+"e"+(+b[1]+h));return b=(it(I)+"e").split("e"),+(b[0]+"e"+(+b[1]-h))}return i(o)}}var j0=_n&&1/Js(new _n([,-0]))[1]==F?function(e){return new _n(e)}:Oc;function Bh(e){return function(i){var o=Jt(i);return o==Oe?Ua(i):o==Pe?Zp(i):Vp(i,e(i))}}function ai(e,i,o,h,b,I,C,D){var G=i&ue;if(!G&&typeof e!="function")throw new Tr(m);var se=h?h.length:0;if(se||(i&=~(U|O),h=b=r),C=C===r?C:Bt($e(C),0),D=D===r?D:$e(D),se-=b?b.length:0,i&O){var oe=h,ce=b;h=b=r}var fe=G?r:oc(e),ve=[e,i,o,h,b,oe,ce,I,C,D];if(fe&&Q0(ve,fe),e=ve[0],i=ve[1],o=ve[2],h=ve[3],b=ve[4],D=ve[9]=ve[9]===r?G?0:e.length:Bt(ve[9]-se,0),!D&&i&(B|N)&&(i&=~(B|N)),!i||i==ee)var Ee=U0(e,i,o);else i==B||i==N?Ee=L0(e,i,D):(i==U||i==(ee|U))&&!b.length?Ee=F0(e,i,o,h):Ee=bo.apply(r,ve);var He=fe?Sh:el;return tl(He(Ee,ve),e,i)}function Kh(e,i,o,h){return e===r||Mr(e,yn[o])&&!nt.call(h,o)?i:e}function Vh(e,i,o,h,b,I){return mt(e)&&mt(i)&&(I.set(i,e),go(e,i,r,Vh,I),I.delete(i)),e}function D0(e){return ts(e)?r:e}function kh(e,i,o,h,b,I){var C=o&V,D=e.length,G=i.length;if(D!=G&&!(C&&G>D))return!1;var se=I.get(e),oe=I.get(i);if(se&&oe)return se==i&&oe==e;var ce=-1,fe=!0,ve=o&Z?new zi:r;for(I.set(e,i),I.set(i,e);++ce<D;){var Ee=e[ce],He=i[ce];if(h)var Se=C?h(He,Ee,ce,i,e,I):h(Ee,He,ce,e,i,I);if(Se!==r){if(Se)continue;fe=!1;break}if(ve){if(!xa(i,function(Ge,Xe){if(!Hn(ve,Xe)&&(Ee===Ge||b(Ee,Ge,o,h,I)))return ve.push(Xe)})){fe=!1;break}}else if(!(Ee===He||b(Ee,He,o,h,I))){fe=!1;break}}return I.delete(e),I.delete(i),fe}function $0(e,i,o,h,b,I,C){switch(o){case Ae:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case Ie:return!(e.byteLength!=i.byteLength||!I(new ro(e),new ro(i)));case Y:case H:case ze:return Mr(+e,+i);case L:return e.name==i.name&&e.message==i.message;case Me:case Ue:return e==i+"";case Oe:var D=Ua;case Pe:var G=h&V;if(D||(D=Js),e.size!=i.size&&!G)return!1;var se=C.get(e);if(se)return se==i;h|=Z,C.set(e,i);var oe=kh(D(e),D(i),h,b,I,C);return C.delete(e),oe;case Le:if(kn)return kn.call(e)==kn.call(i)}return!1}function M0(e,i,o,h,b,I){var C=o&V,D=nc(e),G=D.length,se=nc(i),oe=se.length;if(G!=oe&&!C)return!1;for(var ce=G;ce--;){var fe=D[ce];if(!(C?fe in i:nt.call(i,fe)))return!1}var ve=I.get(e),Ee=I.get(i);if(ve&&Ee)return ve==i&&Ee==e;var He=!0;I.set(e,i),I.set(i,e);for(var Se=C;++ce<G;){fe=D[ce];var Ge=e[fe],Xe=i[fe];if(h)var wr=C?h(Xe,Ge,fe,i,e,I):h(Ge,Xe,fe,e,i,I);if(!(wr===r?Ge===Xe||b(Ge,Xe,o,h,I):wr)){He=!1;break}Se||(Se=fe=="constructor")}if(He&&!Se){var nr=e.constructor,Er=i.constructor;nr!=Er&&"constructor"in e&&"constructor"in i&&!(typeof nr=="function"&&nr instanceof nr&&typeof Er=="function"&&Er instanceof Er)&&(He=!1)}return I.delete(e),I.delete(i),He}function ci(e){return fc(Xh(e,r,al),e+"")}function nc(e){return fh(e,Vt,cc)}function sc(e){return fh(e,dr,Gh)}var oc=co?function(e){return co.get(e)}:Oc;function So(e){for(var i=e.name+"",o=vn[i],h=nt.call(vn,i)?o.length:0;h--;){var b=o[h],I=b.func;if(I==null||I==e)return b.name}return i}function En(e){var i=nt.call(S,"placeholder")?S:e;return i.placeholder}function we(){var e=S.iteratee||Sc;return e=e===Sc?gh:e,arguments.length?e(arguments[0],arguments[1]):e}function Io(e,i){var o=e.__data__;return G0(i)?o[typeof i=="string"?"string":"hash"]:o.map}function ac(e){for(var i=Vt(e),o=i.length;o--;){var h=i[o],b=e[h];i[o]=[h,b,Jh(b)]}return i}function Vi(e,i){var o=Jp(e,i);return ph(o)?o:r}function q0(e){var i=nt.call(e,qi),o=e[qi];try{e[qi]=r;var h=!0}catch{}var b=eo.call(e);return h&&(i?e[qi]=o:delete e[qi]),b}var cc=Fa?function(e){return e==null?[]:(e=ut(e),mi(Fa(e),function(i){return Zu.call(e,i)}))}:Pc,Gh=Fa?function(e){for(var i=[];e;)wi(i,cc(e)),e=io(e);return i}:Pc,Jt=rr;(ja&&Jt(new ja(new ArrayBuffer(1)))!=Ae||Bn&&Jt(new Bn)!=Oe||Da&&Jt(Da.resolve())!=pt||_n&&Jt(new _n)!=Pe||Kn&&Jt(new Kn)!=Te)&&(Jt=function(e){var i=rr(e),o=i==De?e.constructor:r,h=o?ki(o):"";if(h)switch(h){case Eg:return Ae;case Sg:return Oe;case Ig:return pt;case Og:return Pe;case Pg:return Te}return i});function H0(e,i,o){for(var h=-1,b=o.length;++h<b;){var I=o[h],C=I.size;switch(I.type){case"drop":e+=C;break;case"dropRight":i-=C;break;case"take":i=Yt(i,e+C);break;case"takeRight":e=Bt(e,i-C);break}}return{start:e,end:i}}function z0(e){var i=e.match(ht);return i?i[1].split(Dt):[]}function Wh(e,i,o){i=Pi(i,e);for(var h=-1,b=i.length,I=!1;++h<b;){var C=Jr(i[h]);if(!(I=e!=null&&o(e,C)))break;e=e[C]}return I||++h!=b?I:(b=e==null?0:e.length,!!b&&Co(b)&&ui(C,b)&&(Ne(e)||Gi(e)))}function B0(e){var i=e.length,o=new e.constructor(i);return i&&typeof e[0]=="string"&&nt.call(e,"index")&&(o.index=e.index,o.input=e.input),o}function Yh(e){return typeof e.constructor=="function"&&!Zn(e)?bn(io(e)):{}}function K0(e,i,o){var h=e.constructor;switch(i){case Ie:return tc(e);case Y:case H:return new h(+e);case Ae:return x0(e,o);case Be:case xe:case ke:case We:case et:case tt:case Je:case Zt:case ur:return Ch(e,o);case Oe:return new h;case ze:case Ue:return new h(e);case Me:return T0(e);case Pe:return new h;case Le:return A0(e)}}function V0(e,i){var o=i.length;if(!o)return e;var h=o-1;return i[h]=(o>1?"& ":"")+i[h],i=i.join(o>2?", ":" "),e.replace(Pt,`{
/* [wrapped with `+i+`] */
`)}function k0(e){return Ne(e)||Gi(e)||!!(eh&&e&&e[eh])}function ui(e,i){var o=typeof e;return i=i!=null?i:W,!!i&&(o=="number"||o!="symbol"&&la.test(e))&&e>-1&&e%1==0&&e<i}function ir(e,i,o){if(!mt(o))return!1;var h=typeof i;return(h=="number"?fr(o)&&ui(i,o.length):h=="string"&&i in o)?Mr(o[i],e):!1}function uc(e,i){if(Ne(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||mr(e)?!0:Lt.test(e)||!_t.test(e)||i!=null&&e in ut(i)}function G0(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function hc(e){var i=So(e),o=S[i];if(typeof o!="function"||!(i in Ye.prototype))return!1;if(e===o)return!0;var h=oc(o);return!!h&&e===h[0]}function W0(e){return!!Ju&&Ju in e}var Y0=Xs?hi:xc;function Zn(e){var i=e&&e.constructor,o=typeof i=="function"&&i.prototype||yn;return e===o}function Jh(e){return e===e&&!mt(e)}function Qh(e,i){return function(o){return o==null?!1:o[e]===i&&(i!==r||e in ut(o))}}function J0(e){var i=Ao(e,function(h){return o.size===x&&o.clear(),h}),o=i.cache;return i}function Q0(e,i){var o=e[1],h=i[1],b=o|h,I=b<(ee|ue|u),C=h==u&&o==B||h==u&&o==_&&e[7].length<=i[8]||h==(u|_)&&i[7].length<=i[8]&&o==B;if(!(I||C))return e;h&ee&&(e[2]=i[2],b|=o&ee?0:M);var D=i[3];if(D){var G=e[3];e[3]=G?Uh(G,D,i[4]):D,e[4]=G?Ei(e[3],R):i[4]}return D=i[5],D&&(G=e[5],e[5]=G?Lh(G,D,i[6]):D,e[6]=G?Ei(e[5],R):i[6]),D=i[7],D&&(e[7]=D),h&u&&(e[8]=e[8]==null?i[8]:Yt(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=b,e}function X0(e){var i=[];if(e!=null)for(var o in ut(e))i.push(o);return i}function Z0(e){return eo.call(e)}function Xh(e,i,o){return i=Bt(i===r?e.length-1:i,0),function(){for(var h=arguments,b=-1,I=Bt(h.length-i,0),C=X(I);++b<I;)C[b]=h[i+b];b=-1;for(var D=X(i+1);++b<i;)D[b]=h[b];return D[i]=o(C),Kt(e,this,D)}}function Zh(e,i){return i.length<2?e:Ki(e,Cr(i,0,-1))}function ey(e,i){for(var o=e.length,h=Yt(i.length,o),b=lr(e);h--;){var I=i[h];e[h]=ui(I,o)?b[I]:r}return e}function lc(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var el=rl(Sh),es=gg||function(e,i){return Qe.setTimeout(e,i)},fc=rl(S0);function tl(e,i,o){var h=i+"";return fc(e,V0(h,ty(z0(h),o)))}function rl(e){var i=0,o=0;return function(){var h=bg(),b=E-(h-o);if(o=h,b>0){if(++i>=p)return arguments[0]}else i=0;return e.apply(r,arguments)}}function Oo(e,i){var o=-1,h=e.length,b=h-1;for(i=i===r?h:i;++o<i;){var I=Wa(o,b),C=e[I];e[I]=e[o],e[o]=C}return e.length=i,e}var il=J0(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(Ft,function(o,h,b,I){i.push(b?I.replace(sa,"$1"):h||o)}),i});function Jr(e){if(typeof e=="string"||mr(e))return e;var i=e+"";return i=="0"&&1/e==-F?"-0":i}function ki(e){if(e!=null){try{return Zs.call(e)}catch{}try{return e+""}catch{}}return""}function ty(e,i){return xr(ge,function(o){var h="_."+o[0];i&o[1]&&!Ws(e,h)&&e.push(h)}),e.sort()}function nl(e){if(e instanceof Ye)return e.clone();var i=new Ar(e.__wrapped__,e.__chain__);return i.__actions__=lr(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function ry(e,i,o){(o?ir(e,i,o):i===r)?i=1:i=Bt($e(i),0);var h=e==null?0:e.length;if(!h||i<1)return[];for(var b=0,I=0,C=X(oo(h/i));b<h;)C[I++]=Cr(e,b,b+=i);return C}function iy(e){for(var i=-1,o=e==null?0:e.length,h=0,b=[];++i<o;){var I=e[i];I&&(b[h++]=I)}return b}function ny(){var e=arguments.length;if(!e)return[];for(var i=X(e-1),o=arguments[0],h=e;h--;)i[h-1]=arguments[h];return wi(Ne(o)?lr(o):[o],Gt(i,1))}var sy=Ke(function(e,i){return Rt(e)?Wn(e,Gt(i,1,Rt,!0)):[]}),oy=Ke(function(e,i){var o=Nr(i);return Rt(o)&&(o=r),Rt(e)?Wn(e,Gt(i,1,Rt,!0),we(o,2)):[]}),ay=Ke(function(e,i){var o=Nr(i);return Rt(o)&&(o=r),Rt(e)?Wn(e,Gt(i,1,Rt,!0),r,o):[]});function cy(e,i,o){var h=e==null?0:e.length;return h?(i=o||i===r?1:$e(i),Cr(e,i<0?0:i,h)):[]}function uy(e,i,o){var h=e==null?0:e.length;return h?(i=o||i===r?1:$e(i),i=h-i,Cr(e,0,i<0?0:i)):[]}function hy(e,i){return e&&e.length?_o(e,we(i,3),!0,!0):[]}function ly(e,i){return e&&e.length?_o(e,we(i,3),!0):[]}function fy(e,i,o,h){var b=e==null?0:e.length;return b?(o&&typeof o!="number"&&ir(e,i,o)&&(o=0,h=b),n0(e,i,o,h)):[]}function sl(e,i,o){var h=e==null?0:e.length;if(!h)return-1;var b=o==null?0:$e(o);return b<0&&(b=Bt(h+b,0)),Ys(e,we(i,3),b)}function ol(e,i,o){var h=e==null?0:e.length;if(!h)return-1;var b=h-1;return o!==r&&(b=$e(o),b=o<0?Bt(h+b,0):Yt(b,h-1)),Ys(e,we(i,3),b,!0)}function al(e){var i=e==null?0:e.length;return i?Gt(e,1):[]}function dy(e){var i=e==null?0:e.length;return i?Gt(e,F):[]}function py(e,i){var o=e==null?0:e.length;return o?(i=i===r?1:$e(i),Gt(e,i)):[]}function gy(e){for(var i=-1,o=e==null?0:e.length,h={};++i<o;){var b=e[i];h[b[0]]=b[1]}return h}function cl(e){return e&&e.length?e[0]:r}function yy(e,i,o){var h=e==null?0:e.length;if(!h)return-1;var b=o==null?0:$e(o);return b<0&&(b=Bt(h+b,0)),fn(e,i,b)}function _y(e){var i=e==null?0:e.length;return i?Cr(e,0,-1):[]}var vy=Ke(function(e){var i=vt(e,Za);return i.length&&i[0]===e[0]?Ba(i):[]}),by=Ke(function(e){var i=Nr(e),o=vt(e,Za);return i===Nr(o)?i=r:o.pop(),o.length&&o[0]===e[0]?Ba(o,we(i,2)):[]}),my=Ke(function(e){var i=Nr(e),o=vt(e,Za);return i=typeof i=="function"?i:r,i&&o.pop(),o.length&&o[0]===e[0]?Ba(o,r,i):[]});function wy(e,i){return e==null?"":_g.call(e,i)}function Nr(e){var i=e==null?0:e.length;return i?e[i-1]:r}function Ey(e,i,o){var h=e==null?0:e.length;if(!h)return-1;var b=h;return o!==r&&(b=$e(o),b=b<0?Bt(h+b,0):Yt(b,h-1)),i===i?tg(e,i,b):Ys(e,zu,b,!0)}function Sy(e,i){return e&&e.length?bh(e,$e(i)):r}var Iy=Ke(ul);function ul(e,i){return e&&e.length&&i&&i.length?Ga(e,i):e}function Oy(e,i,o){return e&&e.length&&i&&i.length?Ga(e,i,we(o,2)):e}function Py(e,i,o){return e&&e.length&&i&&i.length?Ga(e,i,r,o):e}var xy=ci(function(e,i){var o=e==null?0:e.length,h=Ma(e,i);return Eh(e,vt(i,function(b){return ui(b,o)?+b:b}).sort(Nh)),h});function Ty(e,i){var o=[];if(!(e&&e.length))return o;var h=-1,b=[],I=e.length;for(i=we(i,3);++h<I;){var C=e[h];i(C,h,e)&&(o.push(C),b.push(h))}return Eh(e,b),o}function dc(e){return e==null?e:wg.call(e)}function Ay(e,i,o){var h=e==null?0:e.length;return h?(o&&typeof o!="number"&&ir(e,i,o)?(i=0,o=h):(i=i==null?0:$e(i),o=o===r?h:$e(o)),Cr(e,i,o)):[]}function Ry(e,i){return yo(e,i)}function Cy(e,i,o){return Ja(e,i,we(o,2))}function Ny(e,i){var o=e==null?0:e.length;if(o){var h=yo(e,i);if(h<o&&Mr(e[h],i))return h}return-1}function Uy(e,i){return yo(e,i,!0)}function Ly(e,i,o){return Ja(e,i,we(o,2),!0)}function Fy(e,i){var o=e==null?0:e.length;if(o){var h=yo(e,i,!0)-1;if(Mr(e[h],i))return h}return-1}function jy(e){return e&&e.length?Ih(e):[]}function Dy(e,i){return e&&e.length?Ih(e,we(i,2)):[]}function $y(e){var i=e==null?0:e.length;return i?Cr(e,1,i):[]}function My(e,i,o){return e&&e.length?(i=o||i===r?1:$e(i),Cr(e,0,i<0?0:i)):[]}function qy(e,i,o){var h=e==null?0:e.length;return h?(i=o||i===r?1:$e(i),i=h-i,Cr(e,i<0?0:i,h)):[]}function Hy(e,i){return e&&e.length?_o(e,we(i,3),!1,!0):[]}function zy(e,i){return e&&e.length?_o(e,we(i,3)):[]}var By=Ke(function(e){return Oi(Gt(e,1,Rt,!0))}),Ky=Ke(function(e){var i=Nr(e);return Rt(i)&&(i=r),Oi(Gt(e,1,Rt,!0),we(i,2))}),Vy=Ke(function(e){var i=Nr(e);return i=typeof i=="function"?i:r,Oi(Gt(e,1,Rt,!0),r,i)});function ky(e){return e&&e.length?Oi(e):[]}function Gy(e,i){return e&&e.length?Oi(e,we(i,2)):[]}function Wy(e,i){return i=typeof i=="function"?i:r,e&&e.length?Oi(e,r,i):[]}function pc(e){if(!(e&&e.length))return[];var i=0;return e=mi(e,function(o){if(Rt(o))return i=Bt(o.length,i),!0}),Ca(i,function(o){return vt(e,Ta(o))})}function hl(e,i){if(!(e&&e.length))return[];var o=pc(e);return i==null?o:vt(o,function(h){return Kt(i,r,h)})}var Yy=Ke(function(e,i){return Rt(e)?Wn(e,i):[]}),Jy=Ke(function(e){return Xa(mi(e,Rt))}),Qy=Ke(function(e){var i=Nr(e);return Rt(i)&&(i=r),Xa(mi(e,Rt),we(i,2))}),Xy=Ke(function(e){var i=Nr(e);return i=typeof i=="function"?i:r,Xa(mi(e,Rt),r,i)}),Zy=Ke(pc);function e_(e,i){return Th(e||[],i||[],Gn)}function t_(e,i){return Th(e||[],i||[],Qn)}var r_=Ke(function(e){var i=e.length,o=i>1?e[i-1]:r;return o=typeof o=="function"?(e.pop(),o):r,hl(e,o)});function ll(e){var i=S(e);return i.__chain__=!0,i}function i_(e,i){return i(e),e}function Po(e,i){return i(e)}var n_=ci(function(e){var i=e.length,o=i?e[0]:0,h=this.__wrapped__,b=function(I){return Ma(I,e)};return i>1||this.__actions__.length||!(h instanceof Ye)||!ui(o)?this.thru(b):(h=h.slice(o,+o+(i?1:0)),h.__actions__.push({func:Po,args:[b],thisArg:r}),new Ar(h,this.__chain__).thru(function(I){return i&&!I.length&&I.push(r),I}))});function s_(){return ll(this)}function o_(){return new Ar(this.value(),this.__chain__)}function a_(){this.__values__===r&&(this.__values__=Ol(this.value()));var e=this.__index__>=this.__values__.length,i=e?r:this.__values__[this.__index__++];return{done:e,value:i}}function c_(){return this}function u_(e){for(var i,o=this;o instanceof ho;){var h=nl(o);h.__index__=0,h.__values__=r,i?b.__wrapped__=h:i=h;var b=h;o=o.__wrapped__}return b.__wrapped__=e,i}function h_(){var e=this.__wrapped__;if(e instanceof Ye){var i=e;return this.__actions__.length&&(i=new Ye(this)),i=i.reverse(),i.__actions__.push({func:Po,args:[dc],thisArg:r}),new Ar(i,this.__chain__)}return this.thru(dc)}function l_(){return xh(this.__wrapped__,this.__actions__)}var f_=vo(function(e,i,o){nt.call(e,o)?++e[o]:oi(e,o,1)});function d_(e,i,o){var h=Ne(e)?qu:i0;return o&&ir(e,i,o)&&(i=r),h(e,we(i,3))}function p_(e,i){var o=Ne(e)?mi:hh;return o(e,we(i,3))}var g_=$h(sl),y_=$h(ol);function __(e,i){return Gt(xo(e,i),1)}function v_(e,i){return Gt(xo(e,i),F)}function b_(e,i,o){return o=o===r?1:$e(o),Gt(xo(e,i),o)}function fl(e,i){var o=Ne(e)?xr:Ii;return o(e,we(i,3))}function dl(e,i){var o=Ne(e)?$p:uh;return o(e,we(i,3))}var m_=vo(function(e,i,o){nt.call(e,o)?e[o].push(i):oi(e,o,[i])});function w_(e,i,o,h){e=fr(e)?e:In(e),o=o&&!h?$e(o):0;var b=e.length;return o<0&&(o=Bt(b+o,0)),No(e)?o<=b&&e.indexOf(i,o)>-1:!!b&&fn(e,i,o)>-1}var E_=Ke(function(e,i,o){var h=-1,b=typeof i=="function",I=fr(e)?X(e.length):[];return Ii(e,function(C){I[++h]=b?Kt(i,C,o):Yn(C,i,o)}),I}),S_=vo(function(e,i,o){oi(e,o,i)});function xo(e,i){var o=Ne(e)?vt:yh;return o(e,we(i,3))}function I_(e,i,o,h){return e==null?[]:(Ne(i)||(i=i==null?[]:[i]),o=h?r:o,Ne(o)||(o=o==null?[]:[o]),mh(e,i,o))}var O_=vo(function(e,i,o){e[o?0:1].push(i)},function(){return[[],[]]});function P_(e,i,o){var h=Ne(e)?Pa:Ku,b=arguments.length<3;return h(e,we(i,4),o,b,Ii)}function x_(e,i,o){var h=Ne(e)?Mp:Ku,b=arguments.length<3;return h(e,we(i,4),o,b,uh)}function T_(e,i){var o=Ne(e)?mi:hh;return o(e,Ro(we(i,3)))}function A_(e){var i=Ne(e)?sh:w0;return i(e)}function R_(e,i,o){(o?ir(e,i,o):i===r)?i=1:i=$e(i);var h=Ne(e)?Xg:E0;return h(e,i)}function C_(e){var i=Ne(e)?Zg:I0;return i(e)}function N_(e){if(e==null)return 0;if(fr(e))return No(e)?pn(e):e.length;var i=Jt(e);return i==Oe||i==Pe?e.size:Va(e).length}function U_(e,i,o){var h=Ne(e)?xa:O0;return o&&ir(e,i,o)&&(i=r),h(e,we(i,3))}var L_=Ke(function(e,i){if(e==null)return[];var o=i.length;return o>1&&ir(e,i[0],i[1])?i=[]:o>2&&ir(i[0],i[1],i[2])&&(i=[i[0]]),mh(e,Gt(i,1),[])}),To=pg||function(){return Qe.Date.now()};function F_(e,i){if(typeof i!="function")throw new Tr(m);return e=$e(e),function(){if(--e<1)return i.apply(this,arguments)}}function pl(e,i,o){return i=o?r:i,i=e&&i==null?e.length:i,ai(e,u,r,r,r,r,i)}function gl(e,i){var o;if(typeof i!="function")throw new Tr(m);return e=$e(e),function(){return--e>0&&(o=i.apply(this,arguments)),e<=1&&(i=r),o}}var gc=Ke(function(e,i,o){var h=ee;if(o.length){var b=Ei(o,En(gc));h|=U}return ai(e,h,i,o,b)}),yl=Ke(function(e,i,o){var h=ee|ue;if(o.length){var b=Ei(o,En(yl));h|=U}return ai(i,h,e,o,b)});function _l(e,i,o){i=o?r:i;var h=ai(e,B,r,r,r,r,r,i);return h.placeholder=_l.placeholder,h}function vl(e,i,o){i=o?r:i;var h=ai(e,N,r,r,r,r,r,i);return h.placeholder=vl.placeholder,h}function bl(e,i,o){var h,b,I,C,D,G,se=0,oe=!1,ce=!1,fe=!0;if(typeof e!="function")throw new Tr(m);i=Ur(i)||0,mt(o)&&(oe=!!o.leading,ce="maxWait"in o,I=ce?Bt(Ur(o.maxWait)||0,i):I,fe="trailing"in o?!!o.trailing:fe);function ve(Ct){var qr=h,fi=b;return h=b=r,se=Ct,C=e.apply(fi,qr),C}function Ee(Ct){return se=Ct,D=es(Ge,i),oe?ve(Ct):C}function He(Ct){var qr=Ct-G,fi=Ct-se,$l=i-qr;return ce?Yt($l,I-fi):$l}function Se(Ct){var qr=Ct-G,fi=Ct-se;return G===r||qr>=i||qr<0||ce&&fi>=I}function Ge(){var Ct=To();if(Se(Ct))return Xe(Ct);D=es(Ge,He(Ct))}function Xe(Ct){return D=r,fe&&h?ve(Ct):(h=b=r,C)}function wr(){D!==r&&Ah(D),se=0,h=G=b=D=r}function nr(){return D===r?C:Xe(To())}function Er(){var Ct=To(),qr=Se(Ct);if(h=arguments,b=this,G=Ct,qr){if(D===r)return Ee(G);if(ce)return Ah(D),D=es(Ge,i),ve(G)}return D===r&&(D=es(Ge,i)),C}return Er.cancel=wr,Er.flush=nr,Er}var j_=Ke(function(e,i){return ch(e,1,i)}),D_=Ke(function(e,i,o){return ch(e,Ur(i)||0,o)});function $_(e){return ai(e,Q)}function Ao(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new Tr(m);var o=function(){var h=arguments,b=i?i.apply(this,h):h[0],I=o.cache;if(I.has(b))return I.get(b);var C=e.apply(this,h);return o.cache=I.set(b,C)||I,C};return o.cache=new(Ao.Cache||si),o}Ao.Cache=si;function Ro(e){if(typeof e!="function")throw new Tr(m);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function M_(e){return gl(2,e)}var q_=P0(function(e,i){i=i.length==1&&Ne(i[0])?vt(i[0],vr(we())):vt(Gt(i,1),vr(we()));var o=i.length;return Ke(function(h){for(var b=-1,I=Yt(h.length,o);++b<I;)h[b]=i[b].call(this,h[b]);return Kt(e,this,h)})}),yc=Ke(function(e,i){var o=Ei(i,En(yc));return ai(e,U,r,i,o)}),ml=Ke(function(e,i){var o=Ei(i,En(ml));return ai(e,O,r,i,o)}),H_=ci(function(e,i){return ai(e,_,r,r,r,i)});function z_(e,i){if(typeof e!="function")throw new Tr(m);return i=i===r?i:$e(i),Ke(e,i)}function B_(e,i){if(typeof e!="function")throw new Tr(m);return i=i==null?0:Bt($e(i),0),Ke(function(o){var h=o[i],b=xi(o,0,i);return h&&wi(b,h),Kt(e,this,b)})}function K_(e,i,o){var h=!0,b=!0;if(typeof e!="function")throw new Tr(m);return mt(o)&&(h="leading"in o?!!o.leading:h,b="trailing"in o?!!o.trailing:b),bl(e,i,{leading:h,maxWait:i,trailing:b})}function V_(e){return pl(e,1)}function k_(e,i){return yc(ec(i),e)}function G_(){if(!arguments.length)return[];var e=arguments[0];return Ne(e)?e:[e]}function W_(e){return Rr(e,$)}function Y_(e,i){return i=typeof i=="function"?i:r,Rr(e,$,i)}function J_(e){return Rr(e,j|$)}function Q_(e,i){return i=typeof i=="function"?i:r,Rr(e,j|$,i)}function X_(e,i){return i==null||ah(e,i,Vt(i))}function Mr(e,i){return e===i||e!==e&&i!==i}var Z_=Eo(za),ev=Eo(function(e,i){return e>=i}),Gi=dh(function(){return arguments}())?dh:function(e){return xt(e)&&nt.call(e,"callee")&&!Zu.call(e,"callee")},Ne=X.isArray,tv=tr?vr(tr):u0;function fr(e){return e!=null&&Co(e.length)&&!hi(e)}function Rt(e){return xt(e)&&fr(e)}function rv(e){return e===!0||e===!1||xt(e)&&rr(e)==Y}var Ti=yg||xc,iv=jr?vr(jr):h0;function nv(e){return xt(e)&&e.nodeType===1&&!ts(e)}function sv(e){if(e==null)return!0;if(fr(e)&&(Ne(e)||typeof e=="string"||typeof e.splice=="function"||Ti(e)||Sn(e)||Gi(e)))return!e.length;var i=Jt(e);if(i==Oe||i==Pe)return!e.size;if(Zn(e))return!Va(e).length;for(var o in e)if(nt.call(e,o))return!1;return!0}function ov(e,i){return Jn(e,i)}function av(e,i,o){o=typeof o=="function"?o:r;var h=o?o(e,i):r;return h===r?Jn(e,i,r,o):!!h}function _c(e){if(!xt(e))return!1;var i=rr(e);return i==L||i==l||typeof e.message=="string"&&typeof e.name=="string"&&!ts(e)}function cv(e){return typeof e=="number"&&th(e)}function hi(e){if(!mt(e))return!1;var i=rr(e);return i==he||i==pe||i==J||i==gt}function wl(e){return typeof e=="number"&&e==$e(e)}function Co(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=W}function mt(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function xt(e){return e!=null&&typeof e=="object"}var El=Pr?vr(Pr):f0;function uv(e,i){return e===i||Ka(e,i,ac(i))}function hv(e,i,o){return o=typeof o=="function"?o:r,Ka(e,i,ac(i),o)}function lv(e){return Sl(e)&&e!=+e}function fv(e){if(Y0(e))throw new Re(f);return ph(e)}function dv(e){return e===null}function pv(e){return e==null}function Sl(e){return typeof e=="number"||xt(e)&&rr(e)==ze}function ts(e){if(!xt(e)||rr(e)!=De)return!1;var i=io(e);if(i===null)return!0;var o=nt.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&Zs.call(o)==hg}var vc=Gr?vr(Gr):d0;function gv(e){return wl(e)&&e>=-W&&e<=W}var Il=qn?vr(qn):p0;function No(e){return typeof e=="string"||!Ne(e)&&xt(e)&&rr(e)==Ue}function mr(e){return typeof e=="symbol"||xt(e)&&rr(e)==Le}var Sn=Mi?vr(Mi):g0;function yv(e){return e===r}function _v(e){return xt(e)&&Jt(e)==Te}function vv(e){return xt(e)&&rr(e)==Fe}var bv=Eo(ka),mv=Eo(function(e,i){return e<=i});function Ol(e){if(!e)return[];if(fr(e))return No(e)?Dr(e):lr(e);if(zn&&e[zn])return Xp(e[zn]());var i=Jt(e),o=i==Oe?Ua:i==Pe?Js:In;return o(e)}function li(e){if(!e)return e===0?e:0;if(e=Ur(e),e===F||e===-F){var i=e<0?-1:1;return i*P}return e===e?e:0}function $e(e){var i=li(e),o=i%1;return i===i?o?i-o:i:0}function Pl(e){return e?Bi($e(e),0,te):0}function Ur(e){if(typeof e=="number")return e;if(mr(e))return q;if(mt(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=mt(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Vu(e);var o=ca.test(e);return o||ha.test(e)?Ce(e.slice(2),o?2:8):aa.test(e)?q:+e}function xl(e){return Yr(e,dr(e))}function wv(e){return e?Bi($e(e),-W,W):e===0?e:0}function it(e){return e==null?"":br(e)}var Ev=mn(function(e,i){if(Zn(i)||fr(i)){Yr(i,Vt(i),e);return}for(var o in i)nt.call(i,o)&&Gn(e,o,i[o])}),Tl=mn(function(e,i){Yr(i,dr(i),e)}),Uo=mn(function(e,i,o,h){Yr(i,dr(i),e,h)}),Sv=mn(function(e,i,o,h){Yr(i,Vt(i),e,h)}),Iv=ci(Ma);function Ov(e,i){var o=bn(e);return i==null?o:oh(o,i)}var Pv=Ke(function(e,i){e=ut(e);var o=-1,h=i.length,b=h>2?i[2]:r;for(b&&ir(i[0],i[1],b)&&(h=1);++o<h;)for(var I=i[o],C=dr(I),D=-1,G=C.length;++D<G;){var se=C[D],oe=e[se];(oe===r||Mr(oe,yn[se])&&!nt.call(e,se))&&(e[se]=I[se])}return e}),xv=Ke(function(e){return e.push(r,Vh),Kt(Al,r,e)});function Tv(e,i){return Hu(e,we(i,3),Wr)}function Av(e,i){return Hu(e,we(i,3),Ha)}function Rv(e,i){return e==null?e:qa(e,we(i,3),dr)}function Cv(e,i){return e==null?e:lh(e,we(i,3),dr)}function Nv(e,i){return e&&Wr(e,we(i,3))}function Uv(e,i){return e&&Ha(e,we(i,3))}function Lv(e){return e==null?[]:po(e,Vt(e))}function Fv(e){return e==null?[]:po(e,dr(e))}function bc(e,i,o){var h=e==null?r:Ki(e,i);return h===r?o:h}function jv(e,i){return e!=null&&Wh(e,i,s0)}function mc(e,i){return e!=null&&Wh(e,i,o0)}var Dv=qh(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=eo.call(i)),e[i]=o},Ec(pr)),$v=qh(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=eo.call(i)),nt.call(e,i)?e[i].push(o):e[i]=[o]},we),Mv=Ke(Yn);function Vt(e){return fr(e)?nh(e):Va(e)}function dr(e){return fr(e)?nh(e,!0):y0(e)}function qv(e,i){var o={};return i=we(i,3),Wr(e,function(h,b,I){oi(o,i(h,b,I),h)}),o}function Hv(e,i){var o={};return i=we(i,3),Wr(e,function(h,b,I){oi(o,b,i(h,b,I))}),o}var zv=mn(function(e,i,o){go(e,i,o)}),Al=mn(function(e,i,o,h){go(e,i,o,h)}),Bv=ci(function(e,i){var o={};if(e==null)return o;var h=!1;i=vt(i,function(I){return I=Pi(I,e),h||(h=I.length>1),I}),Yr(e,sc(e),o),h&&(o=Rr(o,j|z|$,D0));for(var b=i.length;b--;)Qa(o,i[b]);return o});function Kv(e,i){return Rl(e,Ro(we(i)))}var Vv=ci(function(e,i){return e==null?{}:v0(e,i)});function Rl(e,i){if(e==null)return{};var o=vt(sc(e),function(h){return[h]});return i=we(i),wh(e,o,function(h,b){return i(h,b[0])})}function kv(e,i,o){i=Pi(i,e);var h=-1,b=i.length;for(b||(b=1,e=r);++h<b;){var I=e==null?r:e[Jr(i[h])];I===r&&(h=b,I=o),e=hi(I)?I.call(e):I}return e}function Gv(e,i,o){return e==null?e:Qn(e,i,o)}function Wv(e,i,o,h){return h=typeof h=="function"?h:r,e==null?e:Qn(e,i,o,h)}var Cl=Bh(Vt),Nl=Bh(dr);function Yv(e,i,o){var h=Ne(e),b=h||Ti(e)||Sn(e);if(i=we(i,4),o==null){var I=e&&e.constructor;b?o=h?new I:[]:mt(e)?o=hi(I)?bn(io(e)):{}:o={}}return(b?xr:Wr)(e,function(C,D,G){return i(o,C,D,G)}),o}function Jv(e,i){return e==null?!0:Qa(e,i)}function Qv(e,i,o){return e==null?e:Ph(e,i,ec(o))}function Xv(e,i,o,h){return h=typeof h=="function"?h:r,e==null?e:Ph(e,i,ec(o),h)}function In(e){return e==null?[]:Na(e,Vt(e))}function Zv(e){return e==null?[]:Na(e,dr(e))}function e1(e,i,o){return o===r&&(o=i,i=r),o!==r&&(o=Ur(o),o=o===o?o:0),i!==r&&(i=Ur(i),i=i===i?i:0),Bi(Ur(e),i,o)}function t1(e,i,o){return i=li(i),o===r?(o=i,i=0):o=li(o),e=Ur(e),a0(e,i,o)}function r1(e,i,o){if(o&&typeof o!="boolean"&&ir(e,i,o)&&(i=o=r),o===r&&(typeof i=="boolean"?(o=i,i=r):typeof e=="boolean"&&(o=e,e=r)),e===r&&i===r?(e=0,i=1):(e=li(e),i===r?(i=e,e=0):i=li(i)),e>i){var h=e;e=i,i=h}if(o||e%1||i%1){var b=rh();return Yt(e+b*(i-e+at("1e-"+((b+"").length-1))),i)}return Wa(e,i)}var i1=wn(function(e,i,o){return i=i.toLowerCase(),e+(o?Ul(i):i)});function Ul(e){return wc(it(e).toLowerCase())}function Ll(e){return e=it(e),e&&e.replace(ri,Gp).replace(Sa,"")}function n1(e,i,o){e=it(e),i=br(i);var h=e.length;o=o===r?h:Bi($e(o),0,h);var b=o;return o-=i.length,o>=0&&e.slice(o,b)==i}function s1(e){return e=it(e),e&&yt.test(e)?e.replace(Li,Wp):e}function o1(e){return e=it(e),e&&jt.test(e)?e.replace(It,"\\$&"):e}var a1=wn(function(e,i,o){return e+(o?"-":"")+i.toLowerCase()}),c1=wn(function(e,i,o){return e+(o?" ":"")+i.toLowerCase()}),u1=Dh("toLowerCase");function h1(e,i,o){e=it(e),i=$e(i);var h=i?pn(e):0;if(!i||h>=i)return e;var b=(i-h)/2;return wo(ao(b),o)+e+wo(oo(b),o)}function l1(e,i,o){e=it(e),i=$e(i);var h=i?pn(e):0;return i&&h<i?e+wo(i-h,o):e}function f1(e,i,o){e=it(e),i=$e(i);var h=i?pn(e):0;return i&&h<i?wo(i-h,o)+e:e}function d1(e,i,o){return o||i==null?i=0:i&&(i=+i),mg(it(e).replace(Ot,""),i||0)}function p1(e,i,o){return(o?ir(e,i,o):i===r)?i=1:i=$e(i),Ya(it(e),i)}function g1(){var e=arguments,i=it(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var y1=wn(function(e,i,o){return e+(o?"_":"")+i.toLowerCase()});function _1(e,i,o){return o&&typeof o!="number"&&ir(e,i,o)&&(i=o=r),o=o===r?te:o>>>0,o?(e=it(e),e&&(typeof i=="string"||i!=null&&!vc(i))&&(i=br(i),!i&&dn(e))?xi(Dr(e),0,o):e.split(i,o)):[]}var v1=wn(function(e,i,o){return e+(o?" ":"")+wc(i)});function b1(e,i,o){return e=it(e),o=o==null?0:Bi($e(o),0,e.length),i=br(i),e.slice(o,o+i.length)==i}function m1(e,i,o){var h=S.templateSettings;o&&ir(e,i,o)&&(i=r),e=it(e),i=Uo({},i,h,Kh);var b=Uo({},i.imports,h.imports,Kh),I=Vt(b),C=Na(b,I),D,G,se=0,oe=i.interpolate||sn,ce="__p += '",fe=La((i.escape||sn).source+"|"+oe.source+"|"+(oe===bt?oa:sn).source+"|"+(i.evaluate||sn).source+"|$","g"),ve="//# sourceURL="+(nt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ia+"]")+`
`;e.replace(fe,function(Se,Ge,Xe,wr,nr,Er){return Xe||(Xe=wr),ce+=e.slice(se,Er).replace(fa,Yp),Ge&&(D=!0,ce+=`' +
__e(`+Ge+`) +
'`),nr&&(G=!0,ce+=`';
`+nr+`;
__p += '`),Xe&&(ce+=`' +
((__t = (`+Xe+`)) == null ? '' : __t) +
'`),se=Er+Se.length,Se}),ce+=`';
`;var Ee=nt.call(i,"variable")&&i.variable;if(!Ee)ce=`with (obj) {
`+ce+`
}
`;else if(na.test(Ee))throw new Re(v);ce=(G?ce.replace(Vr,""):ce).replace(er,"$1").replace(ti,"$1;"),ce="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(D?", __e = _.escape":"")+(G?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var He=jl(function(){return rt(I,ve+"return "+ce).apply(r,C)});if(He.source=ce,_c(He))throw He;return He}function w1(e){return it(e).toLowerCase()}function E1(e){return it(e).toUpperCase()}function S1(e,i,o){if(e=it(e),e&&(o||i===r))return Vu(e);if(!e||!(i=br(i)))return e;var h=Dr(e),b=Dr(i),I=ku(h,b),C=Gu(h,b)+1;return xi(h,I,C).join("")}function I1(e,i,o){if(e=it(e),e&&(o||i===r))return e.slice(0,Yu(e)+1);if(!e||!(i=br(i)))return e;var h=Dr(e),b=Gu(h,Dr(i))+1;return xi(h,0,b).join("")}function O1(e,i,o){if(e=it(e),e&&(o||i===r))return e.replace(Ot,"");if(!e||!(i=br(i)))return e;var h=Dr(e),b=ku(h,Dr(i));return xi(h,b).join("")}function P1(e,i){var o=c,h=d;if(mt(i)){var b="separator"in i?i.separator:b;o="length"in i?$e(i.length):o,h="omission"in i?br(i.omission):h}e=it(e);var I=e.length;if(dn(e)){var C=Dr(e);I=C.length}if(o>=I)return e;var D=o-pn(h);if(D<1)return h;var G=C?xi(C,0,D).join(""):e.slice(0,D);if(b===r)return G+h;if(C&&(D+=G.length-D),vc(b)){if(e.slice(D).search(b)){var se,oe=G;for(b.global||(b=La(b.source,it(Or.exec(b))+"g")),b.lastIndex=0;se=b.exec(oe);)var ce=se.index;G=G.slice(0,ce===r?D:ce)}}else if(e.indexOf(br(b),D)!=D){var fe=G.lastIndexOf(b);fe>-1&&(G=G.slice(0,fe))}return G+h}function x1(e){return e=it(e),e&&wt.test(e)?e.replace(vi,rg):e}var T1=wn(function(e,i,o){return e+(o?" ":"")+i.toUpperCase()}),wc=Dh("toUpperCase");function Fl(e,i,o){return e=it(e),i=o?r:i,i===r?Qp(e)?sg(e):zp(e):e.match(i)||[]}var jl=Ke(function(e,i){try{return Kt(e,r,i)}catch(o){return _c(o)?o:new Re(o)}}),A1=ci(function(e,i){return xr(i,function(o){o=Jr(o),oi(e,o,gc(e[o],e))}),e});function R1(e){var i=e==null?0:e.length,o=we();return e=i?vt(e,function(h){if(typeof h[1]!="function")throw new Tr(m);return[o(h[0]),h[1]]}):[],Ke(function(h){for(var b=-1;++b<i;){var I=e[b];if(Kt(I[0],this,h))return Kt(I[1],this,h)}})}function C1(e){return r0(Rr(e,j))}function Ec(e){return function(){return e}}function N1(e,i){return e==null||e!==e?i:e}var U1=Mh(),L1=Mh(!0);function pr(e){return e}function Sc(e){return gh(typeof e=="function"?e:Rr(e,j))}function F1(e){return _h(Rr(e,j))}function j1(e,i){return vh(e,Rr(i,j))}var D1=Ke(function(e,i){return function(o){return Yn(o,e,i)}}),$1=Ke(function(e,i){return function(o){return Yn(e,o,i)}});function Ic(e,i,o){var h=Vt(i),b=po(i,h);o==null&&!(mt(i)&&(b.length||!h.length))&&(o=i,i=e,e=this,b=po(i,Vt(i)));var I=!(mt(o)&&"chain"in o)||!!o.chain,C=hi(e);return xr(b,function(D){var G=i[D];e[D]=G,C&&(e.prototype[D]=function(){var se=this.__chain__;if(I||se){var oe=e(this.__wrapped__),ce=oe.__actions__=lr(this.__actions__);return ce.push({func:G,args:arguments,thisArg:e}),oe.__chain__=se,oe}return G.apply(e,wi([this.value()],arguments))})}),e}function M1(){return Qe._===this&&(Qe._=lg),this}function Oc(){}function q1(e){return e=$e(e),Ke(function(i){return bh(i,e)})}var H1=rc(vt),z1=rc(qu),B1=rc(xa);function Dl(e){return uc(e)?Ta(Jr(e)):b0(e)}function K1(e){return function(i){return e==null?r:Ki(e,i)}}var V1=Hh(),k1=Hh(!0);function Pc(){return[]}function xc(){return!1}function G1(){return{}}function W1(){return""}function Y1(){return!0}function J1(e,i){if(e=$e(e),e<1||e>W)return[];var o=te,h=Yt(e,te);i=we(i),e-=te;for(var b=Ca(h,i);++o<e;)i(o);return b}function Q1(e){return Ne(e)?vt(e,Jr):mr(e)?[e]:lr(il(it(e)))}function X1(e){var i=++ug;return it(e)+i}var Z1=mo(function(e,i){return e+i},0),eb=ic("ceil"),tb=mo(function(e,i){return e/i},1),rb=ic("floor");function ib(e){return e&&e.length?fo(e,pr,za):r}function nb(e,i){return e&&e.length?fo(e,we(i,2),za):r}function sb(e){return Bu(e,pr)}function ob(e,i){return Bu(e,we(i,2))}function ab(e){return e&&e.length?fo(e,pr,ka):r}function cb(e,i){return e&&e.length?fo(e,we(i,2),ka):r}var ub=mo(function(e,i){return e*i},1),hb=ic("round"),lb=mo(function(e,i){return e-i},0);function fb(e){return e&&e.length?Ra(e,pr):0}function db(e,i){return e&&e.length?Ra(e,we(i,2)):0}return S.after=F_,S.ary=pl,S.assign=Ev,S.assignIn=Tl,S.assignInWith=Uo,S.assignWith=Sv,S.at=Iv,S.before=gl,S.bind=gc,S.bindAll=A1,S.bindKey=yl,S.castArray=G_,S.chain=ll,S.chunk=ry,S.compact=iy,S.concat=ny,S.cond=R1,S.conforms=C1,S.constant=Ec,S.countBy=f_,S.create=Ov,S.curry=_l,S.curryRight=vl,S.debounce=bl,S.defaults=Pv,S.defaultsDeep=xv,S.defer=j_,S.delay=D_,S.difference=sy,S.differenceBy=oy,S.differenceWith=ay,S.drop=cy,S.dropRight=uy,S.dropRightWhile=hy,S.dropWhile=ly,S.fill=fy,S.filter=p_,S.flatMap=__,S.flatMapDeep=v_,S.flatMapDepth=b_,S.flatten=al,S.flattenDeep=dy,S.flattenDepth=py,S.flip=$_,S.flow=U1,S.flowRight=L1,S.fromPairs=gy,S.functions=Lv,S.functionsIn=Fv,S.groupBy=m_,S.initial=_y,S.intersection=vy,S.intersectionBy=by,S.intersectionWith=my,S.invert=Dv,S.invertBy=$v,S.invokeMap=E_,S.iteratee=Sc,S.keyBy=S_,S.keys=Vt,S.keysIn=dr,S.map=xo,S.mapKeys=qv,S.mapValues=Hv,S.matches=F1,S.matchesProperty=j1,S.memoize=Ao,S.merge=zv,S.mergeWith=Al,S.method=D1,S.methodOf=$1,S.mixin=Ic,S.negate=Ro,S.nthArg=q1,S.omit=Bv,S.omitBy=Kv,S.once=M_,S.orderBy=I_,S.over=H1,S.overArgs=q_,S.overEvery=z1,S.overSome=B1,S.partial=yc,S.partialRight=ml,S.partition=O_,S.pick=Vv,S.pickBy=Rl,S.property=Dl,S.propertyOf=K1,S.pull=Iy,S.pullAll=ul,S.pullAllBy=Oy,S.pullAllWith=Py,S.pullAt=xy,S.range=V1,S.rangeRight=k1,S.rearg=H_,S.reject=T_,S.remove=Ty,S.rest=z_,S.reverse=dc,S.sampleSize=R_,S.set=Gv,S.setWith=Wv,S.shuffle=C_,S.slice=Ay,S.sortBy=L_,S.sortedUniq=jy,S.sortedUniqBy=Dy,S.split=_1,S.spread=B_,S.tail=$y,S.take=My,S.takeRight=qy,S.takeRightWhile=Hy,S.takeWhile=zy,S.tap=i_,S.throttle=K_,S.thru=Po,S.toArray=Ol,S.toPairs=Cl,S.toPairsIn=Nl,S.toPath=Q1,S.toPlainObject=xl,S.transform=Yv,S.unary=V_,S.union=By,S.unionBy=Ky,S.unionWith=Vy,S.uniq=ky,S.uniqBy=Gy,S.uniqWith=Wy,S.unset=Jv,S.unzip=pc,S.unzipWith=hl,S.update=Qv,S.updateWith=Xv,S.values=In,S.valuesIn=Zv,S.without=Yy,S.words=Fl,S.wrap=k_,S.xor=Jy,S.xorBy=Qy,S.xorWith=Xy,S.zip=Zy,S.zipObject=e_,S.zipObjectDeep=t_,S.zipWith=r_,S.entries=Cl,S.entriesIn=Nl,S.extend=Tl,S.extendWith=Uo,Ic(S,S),S.add=Z1,S.attempt=jl,S.camelCase=i1,S.capitalize=Ul,S.ceil=eb,S.clamp=e1,S.clone=W_,S.cloneDeep=J_,S.cloneDeepWith=Q_,S.cloneWith=Y_,S.conformsTo=X_,S.deburr=Ll,S.defaultTo=N1,S.divide=tb,S.endsWith=n1,S.eq=Mr,S.escape=s1,S.escapeRegExp=o1,S.every=d_,S.find=g_,S.findIndex=sl,S.findKey=Tv,S.findLast=y_,S.findLastIndex=ol,S.findLastKey=Av,S.floor=rb,S.forEach=fl,S.forEachRight=dl,S.forIn=Rv,S.forInRight=Cv,S.forOwn=Nv,S.forOwnRight=Uv,S.get=bc,S.gt=Z_,S.gte=ev,S.has=jv,S.hasIn=mc,S.head=cl,S.identity=pr,S.includes=w_,S.indexOf=yy,S.inRange=t1,S.invoke=Mv,S.isArguments=Gi,S.isArray=Ne,S.isArrayBuffer=tv,S.isArrayLike=fr,S.isArrayLikeObject=Rt,S.isBoolean=rv,S.isBuffer=Ti,S.isDate=iv,S.isElement=nv,S.isEmpty=sv,S.isEqual=ov,S.isEqualWith=av,S.isError=_c,S.isFinite=cv,S.isFunction=hi,S.isInteger=wl,S.isLength=Co,S.isMap=El,S.isMatch=uv,S.isMatchWith=hv,S.isNaN=lv,S.isNative=fv,S.isNil=pv,S.isNull=dv,S.isNumber=Sl,S.isObject=mt,S.isObjectLike=xt,S.isPlainObject=ts,S.isRegExp=vc,S.isSafeInteger=gv,S.isSet=Il,S.isString=No,S.isSymbol=mr,S.isTypedArray=Sn,S.isUndefined=yv,S.isWeakMap=_v,S.isWeakSet=vv,S.join=wy,S.kebabCase=a1,S.last=Nr,S.lastIndexOf=Ey,S.lowerCase=c1,S.lowerFirst=u1,S.lt=bv,S.lte=mv,S.max=ib,S.maxBy=nb,S.mean=sb,S.meanBy=ob,S.min=ab,S.minBy=cb,S.stubArray=Pc,S.stubFalse=xc,S.stubObject=G1,S.stubString=W1,S.stubTrue=Y1,S.multiply=ub,S.nth=Sy,S.noConflict=M1,S.noop=Oc,S.now=To,S.pad=h1,S.padEnd=l1,S.padStart=f1,S.parseInt=d1,S.random=r1,S.reduce=P_,S.reduceRight=x_,S.repeat=p1,S.replace=g1,S.result=kv,S.round=hb,S.runInContext=k,S.sample=A_,S.size=N_,S.snakeCase=y1,S.some=U_,S.sortedIndex=Ry,S.sortedIndexBy=Cy,S.sortedIndexOf=Ny,S.sortedLastIndex=Uy,S.sortedLastIndexBy=Ly,S.sortedLastIndexOf=Fy,S.startCase=v1,S.startsWith=b1,S.subtract=lb,S.sum=fb,S.sumBy=db,S.template=m1,S.times=J1,S.toFinite=li,S.toInteger=$e,S.toLength=Pl,S.toLower=w1,S.toNumber=Ur,S.toSafeInteger=wv,S.toString=it,S.toUpper=E1,S.trim=S1,S.trimEnd=I1,S.trimStart=O1,S.truncate=P1,S.unescape=x1,S.uniqueId=X1,S.upperCase=T1,S.upperFirst=wc,S.each=fl,S.eachRight=dl,S.first=cl,Ic(S,function(){var e={};return Wr(S,function(i,o){nt.call(S.prototype,o)||(e[o]=i)}),e}(),{chain:!1}),S.VERSION=s,xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){S[e].placeholder=S}),xr(["drop","take"],function(e,i){Ye.prototype[e]=function(o){o=o===r?1:Bt($e(o),0);var h=this.__filtered__&&!i?new Ye(this):this.clone();return h.__filtered__?h.__takeCount__=Yt(o,h.__takeCount__):h.__views__.push({size:Yt(o,te),type:e+(h.__dir__<0?"Right":"")}),h},Ye.prototype[e+"Right"]=function(o){return this.reverse()[e](o).reverse()}}),xr(["filter","map","takeWhile"],function(e,i){var o=i+1,h=o==y||o==A;Ye.prototype[e]=function(b){var I=this.clone();return I.__iteratees__.push({iteratee:we(b,3),type:o}),I.__filtered__=I.__filtered__||h,I}}),xr(["head","last"],function(e,i){var o="take"+(i?"Right":"");Ye.prototype[e]=function(){return this[o](1).value()[0]}}),xr(["initial","tail"],function(e,i){var o="drop"+(i?"":"Right");Ye.prototype[e]=function(){return this.__filtered__?new Ye(this):this[o](1)}}),Ye.prototype.compact=function(){return this.filter(pr)},Ye.prototype.find=function(e){return this.filter(e).head()},Ye.prototype.findLast=function(e){return this.reverse().find(e)},Ye.prototype.invokeMap=Ke(function(e,i){return typeof e=="function"?new Ye(this):this.map(function(o){return Yn(o,e,i)})}),Ye.prototype.reject=function(e){return this.filter(Ro(we(e)))},Ye.prototype.slice=function(e,i){e=$e(e);var o=this;return o.__filtered__&&(e>0||i<0)?new Ye(o):(e<0?o=o.takeRight(-e):e&&(o=o.drop(e)),i!==r&&(i=$e(i),o=i<0?o.dropRight(-i):o.take(i-e)),o)},Ye.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ye.prototype.toArray=function(){return this.take(te)},Wr(Ye.prototype,function(e,i){var o=/^(?:filter|find|map|reject)|While$/.test(i),h=/^(?:head|last)$/.test(i),b=S[h?"take"+(i=="last"?"Right":""):i],I=h||/^find/.test(i);b&&(S.prototype[i]=function(){var C=this.__wrapped__,D=h?[1]:arguments,G=C instanceof Ye,se=D[0],oe=G||Ne(C),ce=function(Ge){var Xe=b.apply(S,wi([Ge],D));return h&&fe?Xe[0]:Xe};oe&&o&&typeof se=="function"&&se.length!=1&&(G=oe=!1);var fe=this.__chain__,ve=!!this.__actions__.length,Ee=I&&!fe,He=G&&!ve;if(!I&&oe){C=He?C:new Ye(this);var Se=e.apply(C,D);return Se.__actions__.push({func:Po,args:[ce],thisArg:r}),new Ar(Se,fe)}return Ee&&He?e.apply(this,D):(Se=this.thru(ce),Ee?h?Se.value()[0]:Se.value():Se)})}),xr(["pop","push","shift","sort","splice","unshift"],function(e){var i=Qs[e],o=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",h=/^(?:pop|shift)$/.test(e);S.prototype[e]=function(){var b=arguments;if(h&&!this.__chain__){var I=this.value();return i.apply(Ne(I)?I:[],b)}return this[o](function(C){return i.apply(Ne(C)?C:[],b)})}}),Wr(Ye.prototype,function(e,i){var o=S[i];if(o){var h=o.name+"";nt.call(vn,h)||(vn[h]=[]),vn[h].push({name:i,func:o})}}),vn[bo(r,ue).name]=[{name:"wrapper",func:r}],Ye.prototype.clone=xg,Ye.prototype.reverse=Tg,Ye.prototype.value=Ag,S.prototype.at=n_,S.prototype.chain=s_,S.prototype.commit=o_,S.prototype.next=a_,S.prototype.plant=u_,S.prototype.reverse=h_,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=l_,S.prototype.first=S.prototype.head,zn&&(S.prototype[zn]=c_),S},gn=og();At?((At.exports=gn)._=gn,ct._=gn):Qe._=gn}).call(ds)})(hu,hu.exports);var r3=Object.defineProperty,i3=Object.defineProperties,n3=Object.getOwnPropertyDescriptors,dd=Object.getOwnPropertySymbols,s3=Object.prototype.hasOwnProperty,o3=Object.prototype.propertyIsEnumerable,pd=(n,t,r)=>t in n?r3(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,jo=(n,t)=>{for(var r in t||(t={}))s3.call(t,r)&&pd(n,r,t[r]);if(dd)for(var r of dd(t))o3.call(t,r)&&pd(n,r,t[r]);return n},a3=(n,t)=>i3(n,n3(t));function jn(n,t,r){var s;const a=Sw(n);return((s=t.rpcMap)==null?void 0:s[a.reference])||`${t3}?chainId=${a.namespace}:${a.reference}&projectId=${r}`}function nn(n){return n.includes(":")?n.split(":")[1]:n}function Fp(n){return n.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function c3(n,t){const r=Object.keys(t.namespaces).filter(a=>a.includes(n));if(!r.length)return[];const s=[];return r.forEach(a=>{const f=t.namespaces[a].accounts;s.push(...f)}),s}function u3(n={},t={}){const r=gd(n),s=gd(t);return hu.exports.merge(r,s)}function gd(n){var t,r,s,a;const f={};if(!An(n))return f;for(const[m,v]of Object.entries(n)){const w=Tu(m)?[m]:v.chains,x=v.methods||[],R=v.events||[],j=v.rpcMap||{},z=ps(m);f[z]=a3(jo(jo({},f[z]),v),{chains:Mc(w,(t=f[z])==null?void 0:t.chains),methods:Mc(x,(r=f[z])==null?void 0:r.methods),events:Mc(R,(s=f[z])==null?void 0:s.events),rpcMap:jo(jo({},j),(a=f[z])==null?void 0:a.rpcMap)})}return f}function h3(n){return n.includes(":")?n.split(":")[2]:n}function l3(n){const t={};for(const[r,s]of Object.entries(n)){const a=s.methods||[],f=s.events||[],m=s.accounts||[],v=Tu(r)?[r]:s.chains?s.chains:Fp(s.accounts);t[r]={chains:v,methods:a,events:f,accounts:m}}return t}function Gc(n){return typeof n=="number"?n:n.includes("0x")?parseInt(n,16):n.includes(":")?Number(n.split(":")[1]):Number(n)}const jp={},Ut=n=>jp[n],Wc=(n,t)=>{jp[n]=t};class f3{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const a=nn(r);t[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jn(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ni(new rn(s,Ut("disableProviderPing")))}}class d3{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=Ut("events"),this.client=Ut("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(parseInt(t),r),this.chainId=parseInt(t),this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const s=r||jn(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ni(new rn(s,Ut("disableProviderPing")))}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const a=parseInt(nn(r));t[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}async handleSwitchChain(t){var r,s;let a=t.request.params?(r=t.request.params[0])==null?void 0:r.chainId:"0x0";a=a.startsWith("0x")?a:`0x${a}`;const f=parseInt(a,16);if(this.isChainApproved(f))this.setDefaultChain(`${f}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:a}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${f}`);else throw new Error(`Failed to switch to chain 'eip155:${f}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}}class p3{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const a=nn(r);t[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jn(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ni(new rn(s,Ut("disableProviderPing")))}}class g3{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const a=nn(r);t[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jn(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ni(new rn(s,Ut("disableProviderPing")))}}class y3{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r),a=nn(r);t[a]=this.createHttpProvider(a,s)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){const r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||this.getCardanoRPCUrl(t);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ni(new rn(s,Ut("disableProviderPing")))}}class _3{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const a=nn(r);t[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jn(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ni(new rn(s,Ut("disableProviderPing")))}}class v3{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const a=nn(r);t[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jn(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Ni(new rn(s,Ut("disableProviderPing")))}}var b3=Object.defineProperty,m3=Object.defineProperties,w3=Object.getOwnPropertyDescriptors,yd=Object.getOwnPropertySymbols,E3=Object.prototype.hasOwnProperty,S3=Object.prototype.propertyIsEnumerable,_d=(n,t,r)=>t in n?b3(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Do=(n,t)=>{for(var r in t||(t={}))E3.call(t,r)&&_d(n,r,t[r]);if(yd)for(var r of yd(t))S3.call(t,r)&&_d(n,r,t[r]);return n},Yc=(n,t)=>m3(n,w3(t));class $u{constructor(t){this.events=new cr.exports,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||ld})),this.disableProviderPing=(t==null?void 0:t.disableProviderPing)||!1}static async init(t){const r=new $u(t);return await r.initialize(),r}async request(t,r){const[s,a]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Do({},t),chainId:`${s}:${a}`,topic:this.session.topic})}sendAsync(t,r,s){this.request(t,s).then(a=>r(null,a)).catch(a=>r(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Nt("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:a}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await a().then(f=>{this.session=f,this.namespaces||(this.namespaces=l3(f.namespaces),this.persist("namespaces",this.namespaces))}).catch(f=>{if(f.message!==Lp)throw f;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,r){try{if(!this.session)return;const[s,a]=this.validateChain(t);this.getProvider(s).setDefaultChain(a,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(ei(r)){for(const s of r)t.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Du.init({logger:this.providerOpts.logger||ld,relayUrl:this.providerOpts.relayUrl||X2,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(r=>ps(r)))];Wc("client",this.client),Wc("events",this.events),Wc("disableProviderPing",this.disableProviderPing),t.forEach(r=>{if(!this.session)return;const s=c3(r,this.session),a=Fp(s),f=u3(this.namespaces,this.optionalNamespaces),m=Yc(Do({},f[r]),{accounts:s,chains:a});switch(r){case"eip155":this.rpcProviders[r]=new d3({namespace:m});break;case"solana":this.rpcProviders[r]=new p3({namespace:m});break;case"cosmos":this.rpcProviders[r]=new g3({namespace:m});break;case"polkadot":this.rpcProviders[r]=new f3({namespace:m});break;case"cip34":this.rpcProviders[r]=new y3({namespace:m});break;case"elrond":this.rpcProviders[r]=new _3({namespace:m});break;case"multiversx":this.rpcProviders[r]=new v3({namespace:m});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:r}=t,{event:s}=r;if(s.name==="accountsChanged"){const a=s.data;a&&ei(a)&&this.events.emit("accountsChanged",a.map(h3))}else if(s.name==="chainChanged"){const a=r.chainId,f=r.event.data,m=ps(a),v=Gc(a)!==Gc(f)?`${m}:${Gc(f)}`:a;this.onChainChanged(v)}else this.events.emit(s.name,s.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var s;const{namespaces:a}=r,f=(s=this.client)==null?void 0:s.session.get(t);this.session=Yc(Do({},f),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",Yc(Do({},Nt("USER_DISCONNECTED")),{data:t.topic}))}),this.on(Ui.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var r;this.getProvider(t).updateNamespace((r=this.session)==null?void 0:r.namespaces[t])})}setNamespaces(t){const{namespaces:r,optionalNamespaces:s,sessionProperties:a}=t;r&&Object.keys(r).length&&(this.namespaces=r),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=a,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(t){const[r,s]=(t==null?void 0:t.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,s];if(r&&!Object.keys(this.namespaces||{}).map(m=>ps(m)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const a=ps(Object.keys(this.namespaces)[0]),f=this.rpcProviders[a].getDefaultChain();return[a,f]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,r=!1){var s;if(!this.namespaces)return;const[a,f]=this.validateChain(t);r||this.getProvider(a).setDefaultChain(f),((s=this.namespaces[a])!=null?s:this.namespaces[`${a}:${f}`]).defaultChain=f,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",f)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,r){this.client.core.storage.setItem(`${fd}/${t}`,r)}async getFromStore(t){return await this.client.core.storage.getItem(`${fd}/${t}`)}}const I3=$u,O3="wc",P3="ethereum_provider",x3=`${O3}@2:${P3}:`,T3="https://rpc.walletconnect.com/v1/",lu=["eth_sendTransaction","personal_sign"],A3=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],fu=["chainChanged","accountsChanged"],R3=["chainChanged","accountsChanged","message","disconnect","connect"];var C3=Object.defineProperty,N3=Object.defineProperties,U3=Object.getOwnPropertyDescriptors,vd=Object.getOwnPropertySymbols,L3=Object.prototype.hasOwnProperty,F3=Object.prototype.propertyIsEnumerable,bd=(n,t,r)=>t in n?C3(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,ys=(n,t)=>{for(var r in t||(t={}))L3.call(t,r)&&bd(n,r,t[r]);if(vd)for(var r of vd(t))F3.call(t,r)&&bd(n,r,t[r]);return n},md=(n,t)=>N3(n,U3(t));function ko(n){return Number(n[0].split(":")[1])}function Jc(n){return`0x${n.toString(16)}`}function j3(n){const{chains:t,optionalChains:r,methods:s,optionalMethods:a,events:f,optionalEvents:m,rpcMap:v}=n;if(!ei(t))throw new Error("Invalid chains");const w={chains:t,methods:s||lu,events:f||fu,rpcMap:ys({},t.length?{[ko(t)]:v[ko(t)]}:{})},x=f==null?void 0:f.filter($=>!fu.includes($)),R=s==null?void 0:s.filter($=>!lu.includes($));if(!r&&!m&&!a&&!(x!=null&&x.length)&&!(R!=null&&R.length))return{required:t.length?w:void 0};const j=(x==null?void 0:x.length)&&(R==null?void 0:R.length)||!r,z={chains:[...new Set(j?w.chains.concat(r||[]):r)],methods:[...new Set(w.methods.concat(a!=null&&a.length?a:A3))],events:[...new Set(w.events.concat(m!=null&&m.length?m:R3))],rpcMap:v};return{required:t.length?w:void 0,optional:r.length?z:void 0}}class Mu{constructor(){this.events=new cr.exports.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=x3,this.on=(t,r)=>(this.events.on(t,r),this),this.once=(t,r)=>(this.events.once(t,r),this),this.removeListener=(t,r)=>(this.events.removeListener(t,r),this),this.off=(t,r)=>(this.events.off(t,r),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const r=new Mu;return await r.initialize(t),r}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,r){this.signer.sendAsync(t,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:r,optional:s}=j3(this.rpc);try{const a=await new Promise(async(m,v)=>{var w;this.rpc.showQrModal&&((w=this.modal)==null||w.subscribeModal(x=>{!x.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),v(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(md(ys({namespaces:ys({},r&&{[this.namespace]:r})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:t==null?void 0:t.pairingTopic})).then(x=>{m(x)}).catch(x=>{v(new Error(x.message))})});if(!a)return;const f=Iw(a.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:f),this.setAccounts(f),this.events.emit("connect",{chainId:Jc(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{const{params:r}=t,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{const r=parseInt(t);this.chainId=r,this.events.emit("chainChanged",Jc(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",md(ys({},Nt("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:t})),this.events.emit("display_uri",t)})}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const r=t.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Jc(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const r=this.parseChainId(t);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(t){const[r,s,a]=t.split(":");return{chainId:`${r}:${s}`,address:a}}setAccounts(t){this.accounts=t.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var r,s;const a=(r=t==null?void 0:t.chains)!=null?r:[],f=(s=t==null?void 0:t.optionalChains)!=null?s:[],m=a.concat(f);if(!m.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const v=a.length?(t==null?void 0:t.methods)||lu:[],w=a.length?(t==null?void 0:t.events)||fu:[],x=(t==null?void 0:t.optionalMethods)||[],R=(t==null?void 0:t.optionalEvents)||[],j=(t==null?void 0:t.rpcMap)||this.buildRpcMap(m,t.projectId),z=(t==null?void 0:t.qrModalOptions)||void 0;return{chains:a==null?void 0:a.map($=>this.formatChainId($)),optionalChains:f.map($=>this.formatChainId($)),methods:v,events:w,optionalMethods:x,optionalEvents:R,rpcMap:j,showQrModal:!!(t!=null&&t.showQrModal),qrModalOptions:z,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,r){const s={};return t.forEach(a=>{s[a]=this.getRpcUrl(a,r)}),s}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?ko(this.rpc.chains):ko(this.rpc.optionalChains),this.signer=await I3.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:s}=await _b(()=>import("./index.b641e5a6.js").then(a=>a.i),["assets/index.b641e5a6.js","assets/index.7b9ea63a.js","assets/index.20a49df5.css"]);r=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(ys({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:r,optionalChains:s,rpcMap:a}=t;r&&ei(r)&&(this.rpc.chains=r.map(f=>this.formatChainId(f)),r.forEach(f=>{this.rpc.rpcMap[f]=(a==null?void 0:a[f])||this.getRpcUrl(f)})),s&&ei(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(f=>this.formatChainId(f)),s.forEach(f=>{this.rpc.rpcMap[f]=(a==null?void 0:a[f])||this.getRpcUrl(f)}))}getRpcUrl(t,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[t])||`${T3}?chainId=eip155:${t}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:r==null?void 0:r.accounts),this.setAccounts(r==null?void 0:r.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map(r=>this.parseAccount(r))}}const M3=Mu;export{M3 as EthereumProvider,R3 as OPTIONAL_EVENTS,A3 as OPTIONAL_METHODS,fu as REQUIRED_EVENTS,lu as REQUIRED_METHODS,Mu as default};
